# MKT Order

```mermaid
graph TD
    person[person]
    order[order]
    orderItem[orderItem]
    payment[payment]
    fulfillment[fulfillment]

    person --> order
    order --> orderItem
    order --> payment
    order --> fulfillment

```


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ðŸ“¦ MKT Order Payment

```mermaid
sequenceDiagram
    participant U as Person
    participant S as Order Service
    participant PG as Payment Gateway
    participant A as Accounting
    participant F as Fulfillment Service

    U->>S: Táº¡o Ä‘Æ¡n hÃ ng (nhiá»u variants)
    S-->>U: XÃ¡c nháº­n Ä‘Æ¡n hÃ ng (PENDING_PAYMENT)

    U->>PG: Thá»±c hiá»‡n thanh toÃ¡n
    PG-->>S: Gá»­i thÃ´ng bÃ¡o thanh toÃ¡n (Webhook/Callback)

    S->>A: Gá»­i yÃªu cáº§u Ä‘á»‘i soÃ¡t giao dá»‹ch
    A-->>S: XÃ¡c nháº­n Transaction ID há»£p lá»‡

    S-->>U: Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng (PAID)

    S->>F: YÃªu cáº§u giao hÃ ng (file, mÃ£ kÃ­ch hoáº¡t, há»£p Ä‘á»“ng...)
    F-->>U: Gá»­i hÃ ng hÃ³a Ä‘áº¿n khÃ¡ch

    U->>S: (TÃ¹y chá»n) YÃªu cáº§u xuáº¥t há»£p Ä‘á»“ng PDF
    S->>F: Sinh há»£p Ä‘á»“ng PDF vÃ  gá»­i email
    F-->>U: Há»£p Ä‘á»“ng PDF Ä‘Ã£ Ä‘Æ°á»£c gá»­i


```

# ðŸ“¦ MKT Order Contract Flow

```mermaid
sequenceDiagram
    participant P as Person
    participant T as Template
    participant C as Contract
    participant O as Order
    participant I as Invoice
    participant L as License

    P->>T: YÃªu cáº§u máº«u há»£p Ä‘á»“ng
    T-->>P: Cung cáº¥p Template Contract
    P->>C: KÃ½ há»£p Ä‘á»“ng (dÃ¹ng template)
    C-->>P: XÃ¡c nháº­n há»£p Ä‘á»“ng

    P->>O: Táº¡o Order tá»« Contract
    O-->>P: XÃ¡c nháº­n Order

    O->>I: Sinh Invoice tá»« Order
    I-->>P: Gá»­i Invoice

    P->>I: Thanh toÃ¡n Invoice
    I-->>O: XÃ¡c nháº­n Ä‘Ã£ thanh toÃ¡n

    O->>L: PhÃ¡t hÃ nh License
    L-->>P: Gá»­i License cho khÃ¡ch

```

# ðŸ“¦ MKT Order Contract ERD

```mermaid
erDiagram
    PERSON ||--o{ CONTRACT : "signs"
    CONTRACT ||--o{ ORDER : "contains"
    ORDER ||--o{ INVOICE : "billed by"
    ORDER ||--o{ LICENSE : "issues"

    TEMPLATE ||--o{ CONTRACT : "used for"
    TEMPLATE ||--o{ INVOICE : "used for"

    PERSON {
        string id PK
        string name
        string contactInfo
        string type
    }

    CONTRACT {
        string id PK
        string personId FK
        string templateId FK
        date startDate
        date endDate
        string status
    }

    ORDER {
        string id PK
        string contractId FK
        decimal totalAmount
        string status
    }

    INVOICE {
        string id PK
        string orderId FK
        string templateId FK
        decimal amount
        date issuedDate
        date dueDate
        string status
    }

    TEMPLATE {
        string id PK
        string type
        string content
        string version
    }

    LICENSE {
        string id PK
        string orderId FK
        string licenseKey
        date startDate
        date endDate
        string status
    }
```