---
title: Oppgraderingsveiledning
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Generelle retningslinjer

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Hvis du brukte Docker Compose, f칮lg disse trinnene:

1. I et terminalvindu, p친 verten hvor Twenty kj칮rer, sl친r du av Twenty: `docker compose down`

2. Oppgrader versjonen ved 친 endre `TAG`-verdien i .env-filen n칝r din docker-compose. ( Vi anbefaler 친 bruke `major.minor` versjon som `v0.53` )

3. Sett Twenty tilbake online med `docker compose up -d`

Hvis du vil oppgradere instansen din med noen f친 versjoner, f.eks. fra v0.33.0 til v0.35.0, m친 du oppgradere instansen din sekvensielt, i dette eksempelet fra v0.33.0 til v0.34.0, deretter fra v0.34.0 til v0.35.0.

**S칮rg for at etter hver oppgraderte versjon har du en ukorrumpert sikkerhetskopi.**

## Versjonsspesifikke oppgraderingstrinn

## v1.0

Hei Twenty v1.0! 游꿀

## v0.60

### Ytelsesforbedringer

Alle interaksjoner med metadata API-en har blitt optimalisert for bedre ytelse, spesielt for metadata-manipulering av objekt og opprettelse av arbeidsomr친der.

Vi har omstrukturert v친r caching-strategi for 친 prioritere cache-treff fremfor databaseforesp칮rsler n친r det er mulig, noe som betydelig forbedrer ytelsen av metadata-API-operasjoner.

Hvis du f친r noen kj칮retidsproblemer etter oppgraderingen, kan det v칝re n칮dvendig 친 t칮mme cachen for 친 sikre at den er synkronisert med de siste endringene. Kj칮r denne kommandoen i din twenty-server-container:

```bash
yarn command:prod cache:flush
```

### v0.55

Oppgrader din Twenty-instans for 친 bruke v0.55-bildet

Du trenger ikke lenger 친 kj칮re noen kommando, det nye bildet vil automatisk ta seg av 친 kj칮re alle n칮dvendige migrasjoner.

### `User does not have permission` error

Hvis du f친r autorisasjonsfeil p친 de fleste foresp칮rsler etter oppgraderingen, kan det v칝re n칮dvendig 친 t칮mme cachen for 친 beregne de siste tillatelsene.

I din `twenty-server` container, kj칮r:

```bash
yarn command:prod cache:flush
```

Dette problemet er spesifikt for denne Twenty-versjonen og b칮r ikke kreves for fremtidige oppgraderinger.

### v0.54

Siden versjon `0.53`, er ingen manuelle handlinger n칮dvendig.

#### Nedleggelse av metadataskjema

Vi har sl친tt sammen `metadata` skjemaet med `core` for 친 forenkle datainnhenting fra `TypeORM`.
Vi har sl친tt sammen `migrate` kommando-trinnet innenfor `upgrade` kommandoen. We do not recommend running `migrate` manually within any of your server/worker containers.

### Siden v0.53

Startende fra `0.53`, gj칮res oppgraderingen programmatisk innenfor `DockerFile`, dette betyr at fra n친 av, trenger du ikke kj칮re noen kommandoer manuelt lenger.

S칮rg for 친 fortsette 친 oppgradere instansen din sekvensielt, uten 친 hoppe over noen store versjoner (f.eks. `0.43.3` til `0.44.0` er tillatt, men `0.43.1` til `0.45.0` er ikke). Hvis ikke, kan det f칮re til at arbeidsomr친dets versjon desynkroniseres, som kan resultere i kj칮retidsfeil og manglende funksjonalitet.

For 친 sjekke om et arbeidsomr친de har blitt korrekt migrert kan du gjennomg친 dens versjon i databasen i `core.workspace` tabellen.

Det b칮r alltid v칝re i omr친de av din n친v칝rende Twenty-instans `major.minor` versjon. Du kan se din instans versjon i administrasjonspanelet (p친 `/settings/admin-panel`, tilgjengelig hvis ditt bruker har `canAccessFullAdminPanel` eiendommen satt til sann i databasen) eller ved 친 kj칮re `echo $APP_VERSION` i din `twenty-server` container.

For 친 fikse en desynkronisert arbeidsomr친deversjon, m친 du oppgradere fra den tilsvarende twenty's versjonen etter relaterte oppgraderingsmanualer sekvensielt og s친 videre til den n친r 칮nsket versjon.

#### `auditLog` fjerning

Vi har fjernet auditLog-standardsobjekt, noe som betyr at din sikkerhetskopist칮rrelse kan bli betydelig redusert etter denne migrasjonen.

### v0.51 til v0.52

Oppgrader din Twenty-instans for 친 bruke v0.52-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Jeg har et arbeidsomr친de blokkert i versjon mellom `0.52.0` og `0.52.6`

Dessverre har `0.52.0` og `0.52.6` blitt helt fjernet fra dockerHub.
Du m친 manuelt oppdatere din arbeidsomr친deversjon til `0.51.0` i databasen og oppgradere med twenty versjon `0.52.11` etter dens nettopp nevnte oppgraderingsmanual.

### v0.50 til v0.51

Oppgrader din Twenty-instans for 친 bruke v0.51-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 til v0.50.0

Oppgrader din Twenty-instans for 친 bruke v0.50.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml mutasjon

Denne versjonen inkluderer en endring av `docker-compose.yml` for 친 gi `worker` tjenesten tilgang til `server-local-data` volumet.
Vennligst oppdater din lokale `docker-compose.yml` etter [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 til v0.44.0

Oppgrader din Twenty-instans for 친 bruke v0.44.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 til v0.43.0

Oppgrader din Twenty-instans for 친 bruke v0.43.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

I denne versjonen har vi ogs친 byttet til postgres:16-bildet i docker-compose.yml.

#### (Valg 1) Databasemigrasjon

칀 beholde det eksisterende postgres-spilo-bildet er greit, men du m친 fryse versjonen i docker-compose.yml til 0.43.0.

#### (Valg 2) Databasemigrasjon

Hvis du vil migrere databasen din til det nye postgres:16-bildet, f칮lg disse trinnene:

1. Dump databasen din fra den gamle postgres-spilo beholderen

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

S칮rg for at dumpfilen din ikke er tom.

2. Oppgrader din docker-compose.yml for 친 bruke postgres:16 bildet som i [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) filen.

3. Gjenopprett databasen til den nye postgres:16-beholderen

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 til v0.42.0

Oppgrader din Twenty-instans for 친 bruke v0.42.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Milj칮variabler**

- Fjernet: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Lagt til: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 til v0.41.0

Oppgrader din Twenty-instans for 친 bruke v0.41.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Milj칮variabler**

- Fjernet: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 til v0.40.0

Oppgrader din Twenty-instans for 친 bruke v0.40.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Milj칮variabler**

- Lagt til: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 til v0.35.0

Oppgrader din Twenty-instans for 친 bruke v0.35.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.35` tar seg av datamigrasjonen til alle arbeidsomr친dene.

**Milj칮variabler**

- Vi erstattet `ENABLE_DB_MIGRATIONS` med `DISABLE_DB_MIGRATIONS` (standardverdien er n친 `false`, du trenger sannsynligvis ikke angi noe)

### v0.33.0 til v0.34.0

Oppgrader din Twenty-instans for 친 bruke v0.34.0-bildet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.34` tar seg av datamigrasjonen til alle arbeidsomr친dene.

**Milj칮variabler**

- Fjernet: `FRONT_BASE_URL`
- Lagt til: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Vi har oppdatert m친ten vi h친ndterer frontend-URL-en.
Du kan n친 sette frontend-URL-en ved hjelp av `FRONT_DOMAIN`, `FRONT_PROTOCOL` og `FRONT_PORT` variablene.
Hvis FRONT_DOMAIN ikke er satt, vil frontend-URL-en falle tilbake til `SERVER_URL`.

### v0.32.0 til v0.33.0

Oppgrader din Twenty-instans for 친 bruke v0.33.0-bildet

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

`yarn command:prod cache:flush` kommandoen vil t칮mme Redis-cachen.
`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.33` tar seg av datamigrasjonen til alle arbeidsomr친dene.

Fra denne versjonen ble twenty-postgres-bildet for DB avviklet og twenty-postgres-spilo benyttes i stedet.
Hvis du vil fortsette 친 bruke twenty-postgres bildet, erstatt ganske enkelt `twentycrm/twenty-postgres:${TAG}` med `twentycrm/twenty-postgres` i docker-compose.yml.

### v0.31.0 til v0.32.0

Oppgrader din Twenty-instans for 친 bruke v0.32.0-bildet

**Skjema- og datamigrering**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.32` tar seg av datamigrasjonen til alle arbeidsomr친dene.

**Milj칮variabler**

Vi har oppdatert m친ten vi h친ndterer Redis-tilkoblingen.

- Fjernet: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Lagt til: `REDIS_URL`

Oppdater din `.env` fil for 친 bruke den nye `REDIS_URL` variabelen i stedet for de individuelle Redis-tilkoblingsparametrene.

Vi har ogs친 forenklet m친ten vi h친ndterer JWT-tokenene p친.

- Fjernet: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Lagt til: `APP_SECRET`

Oppdater .env-filen din for 친 bruke den nye `APP_SECRET` variabelen i stedet for de individuelle token- hemmelighetene (du kan bruke den samme hemmeligheten som f칮r eller generere en ny tilfeldig streng)

**Tilknyttet konto**

Hvis du bruker sammenkoblede kontoer for 친 synkronisere dine Google-e-poster og kalendere, m친 du aktivere [Folk API](https://developers.google.com/people) p친 din Google Admin-konsoll.

### v0.30.0 til v0.31.0

Oppgrader din Twenty-instans for 친 bruke v0.31.0-bildet

**Skjema- og datamigrasjon**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.31` tar seg av datamigrasjonen til alle arbeidsomr친dene.

### v0.24.0 til v0.30.0

Oppgrader din Twenty-instans for 친 bruke v0.30.0-bildet

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Vi har oppdatert v친r [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) for 친 reflektere dette.
S칮rg for 친 oppdatere din konfigurasjon og oppdatere dine milj칮variabler tilsvarende:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Skjema- og datamigrasjon**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.30` tar seg av datamigrasjonen til alle arbeidsomr친dene.

### v0.23.0 til v0.24.0

Oppgrader din Twenty-instans for 친 bruke v0.24.0-bildet

Kj칮r de f칮lgende kommandoene:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til databasestrukturen (kjerne- og metadata-skjema)
`yarn command:prod upgrade-0.24` tar seg av datamigrasjonen til alle arbeidsomr친dene.

### v0.22.0 til v0.23.0

Oppgrader din Twenty-instans for 친 bruke v0.23.0-bildet

Kj칮r de f칮lgende kommandoene:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til Database.
`yarn command:prod upgrade-0.23` tar seg av datamigrasjonen, inkludert overf칮ring av aktiviteter til oppgaver/notater.

### v0.21.0 til v0.22.0

Oppgrader din Twenty-instans for 친 bruke v0.22.0-bildet

Kj칮r de f칮lgende kommandoene:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

`yarn database:migrate:prod` kommandoen vil anvende migrasjonene til Database.
Kommandoen `yarn command:prod workspace:sync-metadata -f` vil synkronisere definisjonen av standardobjekter til metadata-tabellene og anvende n칮dvendige migreringer i eksisterende arbeidsomr친der.
The `yarn command:prod upgrade-0.22` command will apply specific data transformations to adapt to the new object defaultRequestInstrumentationOptions.




