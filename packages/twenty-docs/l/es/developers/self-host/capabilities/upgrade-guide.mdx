---
title: Gu铆a de actualizaci贸n
---

## Gu铆as generales

**Aseg煤rese siempre de respaldar su base de datos antes de iniciar el proceso de actualizaci贸n** ejecutando `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

Para restaurar el respaldo, ejecute `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Si us贸 Docker Compose, siga estos pasos:

1. En una terminal, en el host donde Twenty est谩 funcionando, apague Twenty: `docker compose down`

2. Actualice la versi贸n cambiando el valor de `TAG` en el archivo .env cerca de su docker-compose. ( Recomendamos consumir la versi贸n `major.minor` como `v0.53` )

3. Vuelva a conectar Twenty con `docker compose up -d`

Si desea actualizar su instancia por algunas versiones, por ejemplo de v0.33.0 a v0.35.0, debe actualizar su instancia secuencialmente, en este ejemplo de v0.33.0 a v0.34.0, luego de v0.34.0 a v0.35.0.

**Aseg煤rese de que despu茅s de cada versi贸n actualizada tenga una copia de respaldo no corrupta.**

## Pasos de actualizaci贸n espec铆ficos por versi贸n

## v1.0

隆Hola Twenty v1.0! 

## v0.60

### Mejoras de rendimiento

Todas las interacciones con la API de metadatos han sido optimizadas para un mejor rendimiento, particularmente para la manipulaci贸n de metadatos de objetos y operaciones de creaci贸n de espacios de trabajo.

Hemos reestructurado nuestra estrategia de almacenamiento en cach茅 para priorizar los aciertos de cach茅 sobre las consultas de base de datos cuando sea posible, mejorando significativamente el rendimiento de las operaciones de la API de metadatos.

Si encuentra problemas de ejecuci贸n despu茅s de actualizar, es posible que deba vaciar su cach茅 para asegurar que est茅 sincronizado con los cambios m谩s recientes. Ejecute este comando en su contenedor del servidor de twenty:

```bash
yarn command:prod cache:flush
```

### v0.55

Actualice su instancia de Twenty para usar la imagen v0.55

Ya no necesita ejecutar ning煤n comando, la nueva imagen se encargar谩 autom谩ticamente de ejecutar todas las migraciones necesarias.

### Error: `El usuario no tiene permiso`

Si encuentra errores de autorizaci贸n en la mayor铆a de solicitudes despu茅s de actualizar, es posible que deba vaciar su cach茅 para recalcular los permisos m谩s recientes.

En su contenedor `twenty-server`, ejecute:

```bash
yarn command:prod cache:flush
```

Este problema es espec铆fico de esta versi贸n de Twenty y no deber铆a ser necesario para futuras actualizaciones.

### v0.54

Desde la versi贸n `0.53`, no se necesitan acciones manuales.

#### Desaparici贸n del esquema de metadatos

Hemos fusionado el esquema `metadata` en el esquema `core` para simplificar la recuperaci贸n de datos desde `TypeORM`.
Hemos fusionado el paso del comando `migrate` dentro del comando `upgrade`. No recomendamos ejecutar `migrate` manualmente dentro de ninguno de sus contenedores de servidor/trabajador.

### Desde v0.53

A partir de `0.53`, la actualizaci贸n se realiza de forma program谩tica dentro del `DockerFile`, esto significa que de ahora en adelante, no deber铆a necesitar ejecutar ning煤n comando manualmente.

Aseg煤rese de seguir actualizando su instancia secuencialmente, sin omitir ninguna versi贸n principal (por ejemplo, de `0.43.3` a `0.44.0` est谩 permitido, pero de `0.43.1` a `0.45.0` no lo est谩), de lo contrario, podr铆a provocar un desincronizaci贸n de la versi贸n del espacio de trabajo que podr铆a resultar en errores de ejecuci贸n y funciones faltantes.

Para verificar si un espacio de trabajo se ha migrado correctamente, puede revisar su versi贸n en la base de datos en la tabla `core.workspace`.

Siempre deber铆a estar dentro del rango de la versi贸n `major.minor` actual de su instancia de Twenty; puede ver la versi贸n de su instancia en el panel de administraci贸n (en `/settings/admin-panel`, accesible si su usuario tiene la propiedad `canAccessFullAdminPanel` establecida en verdadero en la base de datos) o ejecutando `echo $APP_VERSION` en su contenedor `twenty-server`.

Para corregir una versi贸n de espacio de trabajo desincronizada, tendr谩 que actualizar desde la correspondiente versi贸n de twenty siguiendo la gu铆a de actualizaci贸n relacionada secuencialmente, y as铆 sucesivamente hasta alcanzar la versi贸n deseada.

#### Eliminaci贸n de `auditLog`

Hemos eliminado el objeto est谩ndar auditLog, lo que significa que el tama帽o de su copia de seguridad podr铆a reducirse significativamente despu茅s de esta migraci贸n.

### v0.51 a v0.52

Actualice su instancia de Twenty para usar la imagen v0.52

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Tengo un espacio de trabajo bloqueado en la versi贸n entre `0.52.0` y `0.52.6`

Desafortunadamente, `0.52.0` y `0.52.6` se han eliminado completamente de dockerHub.
Tendr谩 que actualizar manualmente la versi贸n de su espacio de trabajo a `0.51.0` en la base de datos y actualizar usando la versi贸n twenty `0.52.11` siguiendo su gu铆a de actualizaci贸n justo arriba.

### v0.50 a v0.51

Actualice su instancia de Twenty para usar la imagen v0.51

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 a v0.50.0

Actualice su instancia de Twenty para usar la imagen v0.50.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Mutaci贸n del docker-compose.yml

Esta versi贸n incluye una mutaci贸n del `docker-compose.yml` para dar acceso al servicio `worker` al volumen `server-local-data`.
Actualice su `docker-compose.yml` local con el [docker-compose.yml de v0.50.0](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 a v0.44.0

Actualice su instancia de Twenty para usar la imagen v0.44.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 a v0.43.0

Actualice su instancia de Twenty para usar la imagen v0.43.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

En esta versi贸n, tambi茅n hemos cambiado a la imagen de postgres:16 en docker-compose.yml.

#### (Opci贸n 1) Migraci贸n de base de datos

Mantener la imagen postgres-spilo existente est谩 bien, pero tendr谩 que congelar la versi贸n en su docker-compose.yml a 0.43.0.

#### (Opci贸n 2) Migraci贸n de base de datos

Si desea migrar su base de datos a la nueva imagen de postgres:16, siga estos pasos:

1. Descargue su base de datos del contenedor antiguo de postgres-spilo

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Aseg煤rese de que su archivo de respaldo no est茅 vac铆o.

2. Actualice su docker-compose.yml para usar la imagen de postgres:16 como en el archivo [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml).

3. Restaure la base de datos al nuevo contenedor postgres:16

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 a v0.42.0

Actualice su instancia de Twenty para usar la imagen v0.42.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Variables del entorno**

* Removidos: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
* Agregados: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 a v0.41.0

Actualice su instancia de Twenty para usar la imagen v0.41.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Variables del entorno**

* Removido: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 a v0.40.0

Actualice su instancia de Twenty para usar la imagen v0.40.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Variables del entorno**

* Agregados: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 a v0.35.0

Actualice su instancia de Twenty para usar la imagen v0.35.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.35` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

**Variables del entorno**

* Reemplazamos `ENABLE_DB_MIGRATIONS` por `DISABLE_DB_MIGRATIONS` (valor predeterminado ahora es `false`, probablemente no tenga que establecer nada)

### v0.33.0 a v0.34.0

Actualice su instancia de Twenty para usar la imagen v0.34.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.34` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

**Variables del entorno**

* Removido: `FRONT_BASE_URL`
* Agregados: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Hemos actualizado la forma en que manejamos la URL del frontend.
Ahora puede configurar la URL del frontend usando las variables `FRONT_DOMAIN`, `FRONT_PROTOCOL` y `FRONT_PORT`.
Si FRONT_DOMAIN no est谩 configurado, la URL del frontend volver谩 a `SERVER_URL`.

### v0.32.0 a v0.33.0

Actualice su instancia de Twenty para usar la imagen v0.33.0

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

El comando `yarn command:prod cache:flush` eliminar谩 la cach茅 de Redis.
El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.33` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

A partir de esta versi贸n, la imagen twenty-postgres para DB qued贸 obsoleta y ahora se usa twenty-postgres-spilo.
Si desea seguir usando la imagen twenty-postgres, simplemente reemplace `twentycrm/twenty-postgres:${TAG}` con `twentycrm/twenty-postgres` en docker-compose.yml.

### v0.31.0 a v0.32.0

Actualice su instancia de Twenty para usar la imagen v0.32.0

**Migraci贸n de esquemas y datos**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.32` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

**Variables del entorno**

Hemos actualizado la forma en que manejamos la conexi贸n Redis.

* Removidos: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
* Agregado: `REDIS_URL`

Actualice su archivo `.env` para usar la nueva variable `REDIS_URL` en lugar de los par谩metros de conexi贸n individuales de Redis.

Tambi茅n hemos simplificado la forma en que manejamos los tokens JWT.

* Removidos: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
* Agregado: `APP_SECRET`

Actualice su archivo `.env` para usar la nueva variable `APP_SECRET` en lugar de los secretos de tokens individuales (puede usar el mismo secreto que antes o generar una nueva cadena aleatoria)

**Cuenta conectada**

Si est谩 utilizando cuentas conectadas para sincronizar sus correos electr贸nicos y calendarios de Google, deber谩 activar la [API de People](https://developers.google.com/people) en su consola de administraci贸n de Google.

### v0.30.0 a v0.31.0

Actualice su instancia de Twenty para usar la imagen v0.31.0

**Migraci贸n de esquemas y datos:**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.31` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

### v0.24.0 a v0.30.0

Actualice su instancia de Twenty para usar la imagen v0.30.0

**Cambio importante**:
Para mejorar el rendimiento, Twenty ahora requiere que la cach茅 redis est茅 configurada. Hemos actualizado nuestro [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) para reflejar esto.
Aseg煤rese de actualizar su configuraci贸n y sus variables de entorno en consecuencia:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Migraci贸n de esquemas y datos:**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.30` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

### v0.23.0 a v0.24.0

Actualice su instancia de Twenty para usar la imagen v0.24.0

Ejecuci贸n de los siguientes comandos:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la estructura de la base de datos (esquemas core y metadata)
El `yarn command:prod upgrade-0.24` se encarga de la migraci贸n de datos de todos los espacios de trabajo.

### v0.22.0 a v0.23.0

Actualice su instancia de Twenty para usar la imagen v0.23.0

Ejecuci贸n de los siguientes comandos:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la base de datos.
El `yarn command:prod upgrade-0.23` se encarga de la migraci贸n de datos, incluyendo la transferencia de actividades a tareas/notas.

### v0.21.0 a v0.22.0

Actualice su instancia de Twenty para usar la imagen v0.22.0

Ejecuci贸n de los siguientes comandos:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

El comando `yarn database:migrate:prod` aplicar谩 las migraciones a la base de datos.
El comando `yarn command:prod workspace:sync-metadata -f` sincronizar谩 la definici贸n de objetos est谩ndar a las tablas de metadatos y aplicar谩 las migraciones requeridas a los espacios de trabajo existentes.
El comando `yarn command:prod upgrade-0.22` aplicar谩 transformaciones de datos espec铆ficas para adaptarse a las nuevas opciones predeterminadas de instrumentaci贸n de solicitud de objetos.
