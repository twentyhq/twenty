---
title: D√©tecter les opportunit√©s stagnantes
description: Avertissez automatiquement les responsables lorsque les opportunit√©s n'ont pas √©t√© mises √† jour.
---

Maintenez la sant√© de votre pipeline en alertant les responsables lorsque des opportunit√©s deviennent stagnantes. Ce flux de travail v√©rifie les opportunit√©s qui n'ont pas √©t√© mises √† jour depuis un nombre de jours d√©fini.

## Le probl√®me

Des opportunit√©s laiss√©es sans mise √† jour entra√Ænent :

* Affaires qui se refroidissent
* Pr√©visions peu fiables
* Perte de revenus

## La solution

Cr√©ez un flux de travail planifi√© qui identifie les opportunit√©s stagnantes et envoie un e-mail √† leurs responsables.

## Configuration pas √† pas

### √âtape 1 : Cr√©er le flux de travail

1. Allez dans **Param√®tres ‚Üí Flux de travail**
2. Cliquez sur **+ Nouveau flux de travail**
3. Nommez-le "Alerte d'opportunit√©s stagnantes"

### √âtape 2 : Configurer le d√©clencheur

1. S√©lectionnez **Selon un calendrier**
2. D√©finissez l'ex√©cution quotidienne (par ex., chaque jour √† 8 h)

### √âtape 3 : Rechercher les opportunit√©s stagnantes

1. Ajoutez l'action **Rechercher des enregistrements**
2. Configurer:

| Champ      | Valeur                                                  |
| ---------- | ------------------------------------------------------- |
| **Objet**  | Opportunit√©s                                            |
| **Filtre** | Updated At est ant√©rieur √† (today - 7 days)             |
| **Filtre** | Stage n'est pas "Closed Won" ET n'est pas "Closed Lost" |
| **Limite** | 100                                                     |

### √âtape 4 : V√©rifier si des r√©sultats ont √©t√© trouv√©s

1. Ajoutez l'action **Filtre**
2. Condition : `{{searchRecords.length}}` est sup√©rieur √† 0
3. S'il n'y a pas d'opportunit√©s stagnantes, le flux de travail s'arr√™te ici

### √âtape 5 : Formater l'alerte (action Code)

Ajoutez une action **Code** pour formater l'e-mail :

```javascript
export const main = async (params) => {
  const opportunities = params.opportunities;

  // Group opportunities by owner
  const byOwner = {};
  opportunities.forEach(opp => {
    const ownerEmail = opp.owner?.email || 'unassigned';
    if (!byOwner[ownerEmail]) {
      byOwner[ownerEmail] = [];
    }
    byOwner[ownerEmail].push({
      name: opp.name,
      amount: opp.amount,
      lastUpdated: opp.updatedAt,
      stage: opp.stage
    });
  });

  // Format summary for manager
  let summary = "Stale Opportunities Report\n\n";
  Object.entries(byOwner).forEach(([owner, opps]) => {
    summary += `${owner}: ${opps.length} stale opportunities\n`;
    opps.forEach(opp => {
      summary += `  - ${opp.name} (${opp.stage})\n`;
    });
    summary += "\n";
  });

  return {
    summary,
    totalCount: opportunities.length
  };
};
```

### √âtape 6 : Envoyer l'e-mail d'alerte

Ajoutez l'action **Envoyer un e-mail** :

| Champ                | Valeur                                                                       |
| -------------------- | ---------------------------------------------------------------------------- |
| **√Ä**                | sales-manager@yourcompany.com                                                |
| **Objet**            | `üö® {{code.totalCount}} opportunit√©s stagnantes n√©cessitent votre attention` |
| **Corps du message** | `{{code.summary}}`                                                           |

### √âtape 7 : Tester et activer

1. Cliquez sur **Test** pour ex√©cuter le flux de travail
2. V√©rifiez que l'e-mail contient les bonnes donn√©es
3. Activez lorsque vous √™tes pr√™t

## Options de personnalisation

### Modifier le seuil de stagnation

Modifiez le filtre Rechercher des enregistrements pour changer de 7 jours √† la p√©riode de votre choix :

* 3 jours pour les ventes √† cadence √©lev√©e
* 14 jours pour les affaires grands comptes
* 30 jours pour les cycles de vente longs

### Alerter les commerciaux individuellement

Au lieu d'un seul e-mail au responsable, utilisez **Iterator** pour envoyer des e-mails personnalis√©s √† chaque commercial au sujet de ses propres affaires stagnantes.

### Ajouter une escalade

Cr√©ez plusieurs flux de travail avec une s√©v√©rit√© croissante :

1. Jour 7 : e-mail au commercial
2. Jour 14 : e-mail au commercial + au responsable
3. Jour 21 : cr√©er une t√¢che pour que le responsable intervienne

### Inclure dans Slack

Utilisez **HTTP Request** pour publier vers un webhook Slack √† la place d'un e-mail ou en compl√©ment.

## Articles connexes

* [Actions de workflows](/l/fr/user-guide/workflows/capabilities/workflow-actions)
* [Envoyer des e-mails depuis des workflows](/l/fr/user-guide/workflows/capabilities/send-emails-from-workflows)
