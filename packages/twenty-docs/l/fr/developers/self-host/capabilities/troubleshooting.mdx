---
title: R√©solution des probl√®mes
---

## R√©solution des probl√®mes

Si vous rencontrez un probl√®me lors de la configuration de l'environnement pour le d√©veloppement, la mise √† niveau de votre instance ou l'auto-h√©bergement, voici quelques solutions pour les probl√®mes courants.

### Auto-h√©bergement

#### La premi√®re installation entra√Æne l'erreur `l'authentification du mot de passe a √©chou√© pour l'utilisateur "postgres"`

üö® **IMPORTANT : Cette solution est UNIQUEMENT pour les nouvelles installations** üö®
Si vous avez une instance Twenty existante avec des donn√©es de production, **NE SUIVEZ PAS** ces √©tapes, car elles supprimeront d√©finitivement votre base de donn√©es !

Lors de l'installation de Twenty pour la premi√®re fois, vous pouvez vouloir changer le mot de passe par d√©faut de la base de donn√©es.
Le mot de passe que vous d√©finissez lors de la premi√®re installation est stock√© de fa√ßon permanente dans le volume de la base de donn√©es. Si vous essayez ensuite de changer ce mot de passe dans votre configuration sans supprimer l'ancien volume, vous obtiendrez des erreurs d'authentification car la base de donn√©es utilise toujours le mot de passe original.

‚ö†Ô∏è AVERTISSEMENT : Les √©tapes suivantes SUPPRIMERONT D√âFINITIVEMENT toutes les donn√©es de la base de donn√©es ! ‚ö†Ô∏è
N'avancez que s'il s'agit d'une nouvelle installation sans donn√©es importantes.

Pour mettre √† jour le `PG_DATABASE_PASSWORD`, vous devez :

```sh
# Update the PG_DATABASE_PASSWORD in .env
docker compose down --volumes
docker compose up -d
```

#### Retours √† la ligne CR trouv√©s [Windows]

Cela est d√ª aux caract√®res de saut de ligne de Windows et √† la configuration de git. Essayez de lancer :

```
git config --global core.autocrlf false
```

Ensuite, supprimez le d√©p√¥t et clonez-le de nouveau.

#### Sch√©ma de m√©tadonn√©es manquant

Pendant l'installation de Twenty, vous devez approvisionner votre base de donn√©es postgres avec les bons sch√©mas, extensions et utilisateurs.
Si vous r√©ussissez cet approvisionnement, vous devriez avoir des sch√©mas `default` et `metadata` dans votre base de donn√©es.
Sinon, assurez-vous de ne pas avoir plus d'une instance postgres fonctionnant sur votre ordinateur.

#### Impossible de trouver le module 'twenty-emails' ou les d√©clarations de type correspondantes.

Vous devez construire le package `twenty-emails` avant de lancer l'initialisation de la base de donn√©es avec `npx nx run twenty-emails:build`

#### Package twenty-x manquant

Assurez-vous d'ex√©cuter yarn dans le r√©pertoire racine, puis d'ex√©cuter `npx nx server:dev twenty-server`. Si cela ne fonctionne toujours pas, essayez de construire le package manquant manuellement.

#### Lint √† l'enregistrement ne fonctionne pas

Cela devrait fonctionner directement avec l'extension eslint install√©e. Si cela ne fonctionne pas, essayez d'ajouter ceci aux param√®tres de votre vscode (dans le champ du conteneur de d√©veloppement) :

```
"editor.codeActionsOnSave": {

  "source.fixAll.eslint": "explicit"

}
```

#### Pendant l'ex√©cution de `npx nx start` ou `npx nx start twenty-front`, une erreur de m√©moire est renvoy√©e

Dans `packages/twenty-front/.env`, d√©commentez `VITE_DISABLE_TYPESCRIPT_CHECKER=true` et `VITE_DISABLE_ESLINT_CHECKER=true` pour d√©sactiver les v√©rifications en arri√®re-plan, r√©duisant ainsi la quantit√© de RAM n√©cessaire.

**Si cela ne fonctionne pas :**
Lancez uniquement les services dont vous avez besoin, au lieu de `npx nx start`. Par exemple, si vous travaillez sur le serveur, lancez seulement `npx nx worker twenty-server`

**Si cela ne fonctionne pas :**
Si vous avez essay√© de lancer uniquement `npx nx run twenty-server:start` sur WSL et que cela √©choue avec l'erreur de m√©moire ci-dessous :

`ERREUR FATALE : Les compactages inefficaces pr√®s de la limite du tas Allocation √©chou√©e - tas JavaScript sans m√©moire`

Une solution de contournement consiste √† ex√©cuter la commande ci-dessous dans le terminal ou √† l'ajouter au profil .bashrc pour la configurer automatiquement :

`export NODE_OPTIONS="--max-old-space-size=8192"`

L'option --max-old-space-size=8192 fixe une limite sup√©rieure de 8 Go pour le tas Node.js ; l'utilisation s'adapte √† la demande de l'application.
R√©f√©rence : https://stackoverflow.com/questions/56982005/where-do-i-set-node-options-max-old-space-size-2048

**Si cela ne fonctionne pas :**
Examinez quels processus consomment le plus de RAM sur votre machine. Chez Twenty, nous avons remarqu√© que certaines extensions de VScode consommaient beaucoup de RAM, nous les d√©sactivons donc temporairement.

**Si cela ne fonctionne pas :**
Le red√©marrage de votre machine aide √† nettoyer les processus fant√¥mes.

#### Pendant l'ex√©cution de `npx nx start`, il y a des [0] et [1] √©tranges dans les journaux

C'est attendu car la commande `npx nx start` ex√©cute plus de commandes en arri√®re-plan

#### Aucun e-mail n'est envoy√©

La plupart du temps, c'est parce que le `worker` ne fonctionne pas en arri√®re-plan. Essayez de lancer

```
npx nx worker twenty-server
```

#### Impossible de connecter mon compte Microsoft 365

La plupart du temps, c'est parce que votre administrateur n'a pas activ√© la licence Microsoft 365 pour votre compte. V√©rifiez [https://admin.microsoft.com/](https://admin.microsoft.com/Adminportal/Home).

Si vous avez un code d'erreur `AADSTS50020`, cela signifie probablement que vous utilisez un compte personnel Microsoft. Cela n'est pas encore pris en charge. Plus d'informations [ici](https://learn.microsoft.com/fr-fr/troubleshoot/entra/entra-id/app-integration/error-code-aadsts50020-user-account-identity-provider-does-not-exist)

#### Des avertissements apparaissent dans la console pendant l'ex√©cution de `yarn`

Les avertissements informent du tirage de d√©pendances suppl√©mentaires qui ne sont pas explicitement sp√©cifi√©es dans `package.json`, donc tant qu'aucune erreur bloquante n'appara√Æt, tout devrait fonctionner comme pr√©vu.

#### Lorsque l'utilisateur acc√®de √† la page de connexion, une erreur concernant des utilisateurs non autoris√©s essayant d'acc√©der √† l'espace de travail appara√Æt dans les journaux

C'est attendu car l'utilisateur est non autoris√© lorsqu'il est d√©connect√© puisque son identit√© n'est pas v√©rifi√©e.

#### Comment v√©rifier si votre worker fonctionne ?

* Allez sur [webhook-test.com](https://webhook-test.com/) et copiez **Votre URL Webhook Unique**.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-test.jpg" alt="Test de Webhook" />
</div>

* Ouvrez votre application Twenty, naviguez jusqu'√† `/settings`, et activez le bouton **Avanc√©** en bas √† gauche de l'√©cran.
* Cr√©ez un nouveau webhook.
* Collez **Votre URL Webhook Unique** dans le champ **URL de l'Endpoint** de Twenty. R√©glez les **Filtres** sur `Soci√©t√©s` et `Cr√©√©`.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-settings.jpg" alt="Param√®tres du Webhook" />
</div>

* Acc√©dez √† `/objects/companies` et cr√©ez un nouvel enregistrement de soci√©t√©.
* Retournez sur [webhook-test.com](https://webhook-test.com/) et v√©rifiez si une nouvelle **requ√™te POST** a √©t√© re√ßue.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-test-result.jpg" alt="R√©sultat du test du Webhook" />
</div>

* Si une **requ√™te POST** est re√ßue, votre worker fonctionne avec succ√®s. Sinon, vous devez r√©soudre les probl√®mes de votre worker.

#### Le front-end √©choue √† d√©marrer et renvoie l'erreur TS5042 : L'option 'project' ne peut pas √™tre m√©lang√©e avec les fichiers sources en ligne de commande

Commentez le plugin de v√©rification dans `packages/twenty-ui/vite-config.ts` comme dans l'exemple ci-dessous

```
plugins: [
      react({ jsxImportSource: '@emotion/react' }),
      tsconfigPaths(),
      svgr(),
      dts(dtsConfig),
      // checker(checkersConfig),
      wyw({
        include: [
          '**/OverflowingTextWithTooltip.tsx',
          '**/Chip.tsx',
          '**/Tag.tsx',
          '**/Avatar.tsx',
          '**/AvatarChip.tsx',
        ],
        babelOptions: {
          presets: ['@babel/preset-typescript', '@babel/preset-react'],
        },
      }),
    ],
```

#### Panneau d'administration inaccessible

Ex√©cutez `UPDATE core."user" SET "canAccessFullAdminPanel" = TRUE WHERE email = 'vous@votredomaine.com';` dans le conteneur de base de donn√©es pour obtenir l'acc√®s au panneau d'administration.

### Docker compose en un clic

#### Impossible de se connecter

Si vous ne pouvez pas vous connecter apr√®s la configuration :

1. Ex√©cutez les commandes suivantes :
   ```bash
   docker exec -it twenty-server-1 yarn
   docker exec -it twenty-server-1 npx nx database:reset  --configuration=no-seed
   ```
2. Red√©marrez les conteneurs Docker :
   ```bash
   docker compose down
   docker compose up -d
   ```

Notez que la commande database:reset effacera compl√®tement votre base de donn√©es et la recr√©era √† partir de z√©ro.

#### Probl√®mes de connexion derri√®re un proxy inverse

Si vous ex√©cutez Twenty derri√®re un proxy inverse et rencontrez des probl√®mes de connexion :

1. **V√©rifiez SERVER_URL :**

   Assurez-vous que `SERVER_URL` dans votre fichier `.env` correspond √† l'URL d'acc√®s externe, incluant `https` si SSL est activ√©.

2. **V√©rifiez les param√®tres du proxy inverse :**

   * Confirmez que votre proxy inverse transf√®re correctement les requ√™tes au serveur Twenty.
   * Assurez-vous que les en-t√™tes comme `X-Forwarded-For` et `X-Forwarded-Proto` sont correctement configur√©s.

3. **Red√©marrez les services :**

   Apr√®s avoir apport√© des modifications, red√©marrez √† la fois le proxy inverse et les conteneurs Twenty.

#### Erreur lors du t√©l√©chargement d'une image - permission refus√©e

Changer la propri√©t√© du dossier de donn√©es sur l'h√¥te de root √† un autre utilisateur et groupe r√©sout ce probl√®me.

## Obtenir de l'aide

Si vous rencontrez des probl√®mes non couverts par ce guide :

* V√©rifiez les journaux :

  Consultez les journaux de conteneur pour les messages d'erreur :

  ```bash
  docker compose logs
  ```

* Support communautaire :

  Contactez la [communaut√© Twenty](https://github.com/twentyhq/twenty/issues) ou les [canaux de support](https://discord.gg/cx5n4Jzs57) pour obtenir de l'aide.
