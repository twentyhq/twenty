---
title: Upgrade guide
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Algemene richtlijnen

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Als u Docker Compose gebruikt, volg dan deze stappen:

1. Zet in een terminal, op de host waar Twenty draait, Twenty uit: `docker compose down`

2. Werk de versie bij door de waarde `TAG` in het .env-bestand nabij uw docker-compose te wijzigen. ( We raden aan om `major.minor` versie te gebruiken, zoals `v0.53` )

3. Breng Twenty weer online met `docker compose up -d`

Als je je instantie wilt upgraden met een paar versies, bijv. van v0.33.0 naar v0.35.0, moet je de instantie opeenvolgend upgraden, in dit voorbeeld van v0.33.0 naar v0.34.0, daarna van v0.34.0 naar v0.35.0.

**Zorg ervoor dat u na elke geÃ¼pgradede versie een niet-beschadigde back-up hebt.**

## Version-specific upgrade steps

## v1.0

Hallo Twenty v1.0! ðŸŽ‰

## v0.60

### Performance Enhancements

Alle interacties met de metadata API zijn geoptimaliseerd voor betere prestaties, met name voor object metadatamanipulaties en werkruimtecreatie-opdrachten.

We hebben onze cachingstrategie opnieuw doordacht om cache-hits boven databasequery's te stellen waar mogelijk, wat de prestaties van metadata API-opdrachten aanzienlijk verbeterde.

Als u runtime-problemen ondervindt na het upgraden, moet u mogelijk uw cache leegmaken om ervoor te zorgen dat deze is gesynchroniseerd met de laatste wijzigingen. Voer deze opdracht uit in uw twenty-server container:

```bash
yarn command:prod cache:flush
```

### v0.55

Upgrade je Twenty-instantie om v0.55 afbeelding te gebruiken

U hoeft geen enkele opdracht meer uit te voeren, de nieuwe afbeelding zal automatisch voor alle vereiste migraties zorgen.

### `Gebruiker heeft geen toestemming` foutbericht

Als u machtigingsfouten ondervindt bij de meeste verzoeken na het upgraden, moet u mogelijk uw cache leegmaken om de laatste machtigingen opnieuw te berekenen.

In je `twenty-server`-container, voer uit:

```bash
yarn command:prod cache:flush
```

Dit probleem is specifiek voor deze Twenty-versie en zou niet nodig moeten zijn voor toekomstige upgrades.

### v0.54

Sinds versie `0.53`, zijn geen handmatige acties meer nodig.

#### Afschaffing van metadataschema

We hebben het `metadata`-schema samengevoegd in de `core` om dataverzameling uit `TypeORM` te vereenvoudigen.
We hebben de stap `migrate` opdracht opgenomen binnen de `upgrade` opdracht. We raden niet aan om `migrate` handmatig uit te voeren binnen een van uw server-/werkercontainers.

### Sinds v0.53

Vanaf `0.53` wordt de upgrade programmatisch uitgevoerd binnen het `DockerFile`, dit betekent dat je voortaan geen enkele opdracht meer handmatig hoeft uit te voeren.

Zorg ervoor dat u uw instantie opeenvolgend blijft upgraden, zonder enige hoofdversie over te slaan (bijv. `0.43.3` naar `0.44.0` is toegestaan, maar `0.43.1` naar `0.45.0` niet), anders kan dit leiden tot werkruimteversie desynchronisatie die kan resulteren in runtime fout en ontbrekende functionaliteit.

Om te controleren of een werkruimte correct is gemigreerd, kunt u de versie ervan in de database in `core.workspace`-tabel bekijken.

Het moet altijd binnen het bereik van uw huidige Twenty-instantie `major.minor` versie zijn, u kunt uw instantieversie bekijken in het beheerderspaneel (op `/settings/admin-panel`, toegankelijk als uw gebruiker `canAccessFullAdminPanel` eigenschap heeft ingesteld op true in de database) of door `echo $APP_VERSION` uit te voeren in uw `twenty-server` container.

Om een gedesynchroniseerde werkruimteversie te repareren, moet u upgraden vanaf de overeenkomstige versie van twintig volgens de gerelateerde upgrade-gids opeenvolgend en ga zo door totdat deze de gewenste versie bereikt.

#### `auditLog` verwijdering

We hebben het standaardobject van auditLog verwijderd, wat betekent dat uw back-up maat aanzienlijk kan verminderen na deze migratie.

### v0.51 naar v0.52

Upgrade je Twenty-instantie om v0.52 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Ik heb een werkruimte geblokkeerd in de versie tussen `0.52.0` en `0.52.6`

Helaas zijn `0.52.0` en `0.52.6` volledig verwijderd van dockerHub.
You will have to manually update your workspace version to `0.51.0` in database and upgrade using twenty version `0.52.11` following its just above upgrade guide.

### v0.50 naar v0.51

Upgrade je Twenty-instantie om v0.51 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 naar v0.50.0

Upgrade je Twenty-instantie naar v0.50.0 afbeelding

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml mutatie

Deze versie omvat een `docker-compose.yml` mutatie om de `werker` dienst toegang te geven tot het `server-local-data` volume.
Werk uw lokale `docker-compose.yml` bij met [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 naar v0.44.0

Upgrade je Twenty-instantie om v0.44.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 naar v0.43.0

Upgrade je Twenty-instantie om v0.43.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade
```

In deze versie zijn we ook overgeschakeld naar postgres:16 afbeelding in docker-compose.yml.

#### (Optie 1) Database migratie

Het behouden van de bestaande postgres-spilo afbeelding is prima, maar u moet de versie in uw docker-compose.yml bevriezen op 0.43.0.

#### (Optie 2) Database migratie

Als je je database wilt migreren naar de nieuwe postgres:16 afbeelding, volg dan deze stappen:

1. Dump je database uit de oude postgres-spilo container

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Zorg ervoor dat uw dumpbestand niet leeg is.

2. Upgrade uw docker-compose.yml om de postgres:16 afbeelding te gebruiken zoals in het [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) bestand.

3. Herstel de database naar de nieuwe postgres:16 container

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 naar v0.42.0

Upgrade je Twenty-instantie om v0.42.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Omgevingsvariabelen**

- Verwijderd: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Toegevoegd: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 naar v0.41.0

Upgrade je Twenty-instantie om v0.41.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Omgevingsvariabelen**

- Verwijderd: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 naar v0.40.0

Upgrade je Twenty-instantie om v0.40.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Omgevingsvariabelen**

- Toegevoegd: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 naar v0.35.0

Upgrade je Twenty-instantie om v0.35.0 afbeelding te gebruiken

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.35` zorgt voor de datamigratie van alle werkruimtes.

**Omgevingsvariabelen**

- We hebben `ENABLE_DB_MIGRATIONS` vervangen door `DISABLE_DB_MIGRATIONS` (standaardwaarde is nu `false`, je hoeft waarschijnlijk niets in te stellen)

### v0.33.0 naar v0.34.0

Upgrade je Twenty-instantie naar v0.34.0 afbeelding

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.34` zorgt voor de datamigratie van alle werkruimtes.

**Omgevingsvariabelen**

- Verwijderd: `FRONT_BASE_URL`
- Toegevoegd: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

We hebben de manier waarop we de frontend URL afhandelen bijgewerkt.
U kunt nu de frontend URL instellen met de variabelen `FRONT_DOMAIN`, `FRONT_PROTOCOL` en `FRONT_PORT`.
Als FRONT_DOMAIN niet is ingesteld, zal de frontend-URL terugvallen op `SERVER_URL`.

### v0.32.0 naar v0.33.0

Upgrade je Twenty-instantie om v0.33.0 afbeelding te gebruiken

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

De opdracht `yarn command:prod cache:flush` maakt de Redis-cache leeg.
De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.33` zorgt voor de datamigratie van alle werkruimtes.

Vanaf deze versie is de twenty-postgres afbeelding voor DB verouderd en wordt er in plaats daarvan gebruikgemaakt van twenty-postgres-spilo.
Als je de twenty-postgres afbeelding wilt blijven gebruiken, vervang dan eenvoudig `twentycrm/twenty-postgres:${TAG}` door `twentycrm/twenty-postgres` in docker-compose.yml.

### v0.31.0 naar v0.32.0

Upgrade je Twenty-instantie naar v0.32.0 afbeelding

**Schema en datamigratie**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.32` zorgt voor de datamigratie van alle werkruimtes.

**Omgevingsvariabelen**

We hebben de manier waarop we de Redis-verbinding afhandelen bijgewerkt.

- Verwijderd: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Toegevoegd: `REDIS_URL`

Werk uw `.env`-bestand bij om de nieuwe `REDIS_URL`-variabele te gebruiken in plaats van de afzonderlijke Redis-verbindingsparameters.

We hebben ook de manier waarop we JWT-tokens afhandelen vereenvoudigd.

- Verwijderd: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Toegevoegd: `APP_SECRET`

Werk uw `.env`-bestand bij om de nieuwe `APP_SECRET`-variabele te gebruiken in plaats van de afzonderlijke token geheimen (u kunt hetzelfde geheim als voorheen gebruiken of een nieuwe willekeurige tekenreeks genereren)

**Gekoppelde account**

Als u een gekoppeld account gebruikt om uw Google-e-mails en -agenda's te synchroniseren, moet u de [People API](https://developers.google.com/people) op uw Google Admin-console activeren.

### v0.30.0 naar v0.31.0

Upgrade je Twenty-instantie om v0.31.0 afbeelding te gebruiken

**Schema en datamigratie**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.31` zorgt voor de datamigratie van alle werkruimtes.

### v0.24.0 naar v0.30.0

Upgrade je Twenty-instantie om v0.30.0 afbeelding te gebruiken

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. We hebben onze [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) bijgewerkt om dit te weerspiegelen.
Zorg ervoor dat u uw configuratie bijwerkt en uw omgevingsvariabelen dienovereenkomstig bijwerkt:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Schema en datamigratie**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.30` zorgt voor de datamigratie van alle werkruimtes.

### v0.23.0 naar v0.24.0

Upgrade je Twenty-instantie om v0.24.0 afbeelding te gebruiken

Voer de volgende opdrachten uit:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de databasestructuur (kern- en metadataschema's)
De `yarn command:prod upgrade-0.24` zorgt voor de datamigratie van alle werkruimtes.

### v0.22.0 naar v0.23.0

Upgrade je Twenty-instantie om v0.23.0 afbeelding te gebruiken

Voer de volgende opdrachten uit:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de Database.
De opdracht `yarn command:prod upgrade-0.23` zorgt voor de datamigratie, inclusief het overbrengen van activiteiten naar taken/notities.

### v0.21.0 naar v0.22.0

Upgrade je Twenty-instantie om v0.22.0 afbeelding te gebruiken

Voer de volgende opdrachten uit:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

De opdracht `yarn database:migrate:prod` past de migraties toe op de Database.
Het commando `yarn command:prod workspace:sync-metadata -f` synchroniseert de definitie van standaardobjecten naar de metadatatabellen en past de vereiste migraties toe op bestaande werkruimten.
The `yarn command:prod upgrade-0.22` command will apply specific data transformations to adapt to the new object defaultRequestInstrumentationOptions.




