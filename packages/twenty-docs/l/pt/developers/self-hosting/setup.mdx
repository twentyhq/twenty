---
title: Configuração
image: /images/user-guide/table-views/table.png
---

<Frame>
  <img src="/images/user-guide/table-views/table.png" alt="Header" />
</Frame>

import OptionTable from '@site/src/theme/OptionTable'

# Gerenciamento de Configurações

<Warning>
**First time installing?** Follow the [Docker Compose installation guide](https://docs.twenty.com/l/pt/developers/self-hosting/docker-compose) to get Twenty running, then return here for configuration.
</Warning>

O Twenty oferece **dois modos de configuração** para atender diferentes necessidades de deployment:

**Admin panel access:** Only users with admin privileges (`canAccessFullAdminPanel: true`) can access the configuration interface.

## 1. Configuração do Painel de Controle (Padrão)

```bash
IS_CONFIG_VARIABLES_IN_DB_ENABLED=true  # default
```

**A maior parte da configuração acontece através da UI** após a instalação:

1. Acesse sua instância do Twenty (geralmente `http://localhost:3000`)
2. Vá para **Configurações / Painel de Controle / Variáveis de Configuração**
3. Configure integrações, email, armazenamento e mais
4. As alterações entram em vigor imediatamente (dentro de 15 segundos para deployments em múltiplos containers)

<Warning>
**Deployments em Múltiplos Containers:** Quando usa configuração via banco de dados (`IS_CONFIG_VARIABLES_IN_DB_ENABLED=true`), tanto os containers de servidor quanto de worker leem do mesmo banco de dados. As alterações no painel de controle afetam ambos automaticamente, eliminando a necessidade de duplicar variáveis de ambiente entre containers (exceto para variáveis de infraestrutura).
</Warning>

**O que você pode configurar através do painel de controle:**

- **Autenticação** - Google/Microsoft OAuth, configurações de senha
- **Email** - configurações de SMTP, templates, verificação
- **Armazenamento** - configuração S3, caminhos de armazenamento local
- **Integrações** - Gmail, Google Calendar, serviços Microsoft
- **Workflow & Rate Limiting** - Execution limits, API throttling
- **E muito mais...**

![Variáveis de Configuração do Painel de Controle](/images/user-guide/setup/admin-panel-config-variables.png)

<Warning>
Cada variável está documentada com descrições no seu painel de controle em **Configurações → Painel de Controle → Variáveis de Configuração**.
Algumas configurações de infraestrutura, como conexões de banco de dados (`PG_DATABASE_URL`), URLs do servidor (`SERVER_URL`) e segredos do aplicativo (`APP_SECRET`) só podem ser configuradas via arquivo `.env`.

[Complete technical reference →](https://github.com/twentyhq/twenty/blob/main/packages/twenty-server/src/engine/core-modules/twenty-config/config-variables.ts) </Warning>

## 2. Configuração Somente Ambiente

```bash
IS_CONFIG_VARIABLES_IN_DB_ENABLED=false
```

**Toda a configuração gerida através de arquivos `.env`:**

1. Defina `IS_CONFIG_VARIABLES_IN_DB_ENABLED=false` em seu arquivo `.env`
2. Adicione todas as variáveis de configuração ao seu arquivo `.env`
3. Reinicie os containers para que as alterações entrem em vigor
4. O painel de controle mostrará os valores atuais, mas não poderá modificá-los

## Integração com Gmail & Google Calendar

### Crie um Projeto no Google Cloud

1. Acesse o [Google Cloud Console](https://console.cloud.google.com/)
2. Crie um novo projeto ou selecione um existente
3. Ative essas APIs:

- [Gmail API](https://console.cloud.google.com/apis/library/gmail.googleapis.com)
- [Google Calendar API](https://console.cloud.google.com/apis/library/calendar-json.googleapis.com)
- [People API](https://console.cloud.google.com/apis/library/people.googleapis.com)

### Configure o OAuth

1. Acesse [Credenciais](https://console.cloud.google.com/apis/credentials)
2. Crie um ID de cliente OAuth 2.0
3. Adicione esses URIs de redirecionamento:
   - `https://{your-domain}/auth/google/redirect` (for SSO)
   - `https://{your-domain}/auth/google-apis/get-access-token` (for integrations)

### Configure no Twenty

1. Vá para **Configurações → Painel de Controle → Variáveis de Configuração**
2. Encontre a seção **Google Auth**
3. Defina estas variáveis:
   - `MESSAGING_PROVIDER_GMAIL_ENABLED=true`
   - `CALENDAR_PROVIDER_GOOGLE_ENABLED=true`
   - `AUTH_GOOGLE_CLIENT_ID={client-id}`
   - `AUTH_GOOGLE_CLIENT_SECRET={client-secret}`
   - `AUTH_GOOGLE_CALLBACK_URL=https://{your-domain}/auth/google/redirect`
   - `AUTH_GOOGLE_APIS_CALLBACK_URL=https://{your-domain}/auth/google-apis/get-access-token`

<Warning>
**Environment-only mode:** If you set `IS_CONFIG_VARIABLES_IN_DB_ENABLED=false`, add these variables to your `.env` file instead.
</Warning>

**Escopos necessários** (configurados automaticamente): [Veja o código-fonte relevante](https://github.com/twentyhq/twenty/blob/main/packages/twenty-server/src/engine/core-modules/auth/utils/get-google-apis-oauth-scopes.ts#L4-L10)

- `https://www.googleapis.com/auth/calendar.events`
- `https://www.googleapis.com/auth/gmail.readonly`
- `https://www.googleapis.com/auth/profile.emails.read`

### Se o seu aplicativo estiver no modo de teste

Se o seu aplicativo estiver no modo de teste, você precisará adicionar usuários de teste ao seu projeto.

Em [Tela de consentimento OAuth](https://console.cloud.google.com/apis/credentials/consent), adicione seus usuários de teste na seção "Usuários de teste".

## Integração com Microsoft 365

<Warning>
Os usuários precisam ter uma [Licença Microsoft 365](https://admin.microsoft.com/Adminportal/Home) para poder usar as APIs de Calendário e Mensagens. Eles não poderão sincronizar suas contas no Twenty sem uma.
</Warning>

### Crie um projeto no Microsoft Azure

Você precisará criar um projeto no [Microsoft Azure](https://portal.azure.com/#view/Microsoft_AAD_IAM/AppGalleryBladeV2) e obter as credenciais.

### Ativar APIs

No Console do Microsoft Azure ative as seguintes APIs em "Permissões":

- Microsoft Graph: Mail.ReadWrite
- Microsoft Graph: Mail.Send
- Microsoft Graph: Calendars.Read
- Microsoft Graph: User.Read
- Microsoft Graph: openid
- Microsoft Graph: email
- Microsoft Graph: profile
- Microsoft Graph: offline_access

Nota: "Mail.ReadWrite" e "Mail.Send" são obrigatórios apenas se você quiser enviar emails usando nossas ações de fluxo de trabalho. Você pode usar "Mail.Read" ao invés caso queira apenas receber emails.

### URIs de redirecionamento autorizados

Você precisa adicionar os seguintes URIs de redirecionamento ao seu projeto:

- `https://{your-domain}/auth/microsoft/redirect` if you want to use Microsoft SSO
- `https://{your-domain}/auth/microsoft-apis/get-access-token`

### Configure no Twenty

1. Vá para **Configurações → Painel de Controle → Variáveis de Configuração**
2. Encontre a seção **Microsoft Auth**
3. Defina estas variáveis:
   - `MESSAGING_PROVIDER_MICROSOFT_ENABLED=true`
   - `CALENDAR_PROVIDER_MICROSOFT_ENABLED=true`
   - `AUTH_MICROSOFT_ENABLED=true`
   - `AUTH_MICROSOFT_CLIENT_ID={client-id}`
   - `AUTH_MICROSOFT_CLIENT_SECRET={client-secret}`
   - `AUTH_MICROSOFT_CALLBACK_URL=https://{your-domain}/auth/microsoft/redirect`
   - `AUTH_MICROSOFT_APIS_CALLBACK_URL=https://{your-domain}/auth/microsoft-apis/get-access-token`

<Warning>
**Environment-only mode:** If you set `IS_CONFIG_VARIABLES_IN_DB_ENABLED=false`, add these variables to your `.env` file instead.
</Warning>

### Configure os escopos

[Veja o código-fonte relevante](https://github.com/twentyhq/twenty/blob/main/packages/twenty-server/src/engine/core-modules/auth/utils/get-microsoft-apis-oauth-scopes.ts#L2-L9)

- 'openid'
- 'email'
- 'perfil'
- 'offline_access'
- 'Mail.ReadWrite'
- 'Mail.Send'
- 'Calendars.Read'

### Se o seu aplicativo estiver no modo de teste

Se o seu aplicativo estiver no modo de teste, você precisará adicionar usuários de teste ao seu projeto.

Adicione seus usuários de teste à seção "Usuários e grupos".

## Jobs em Segundo Plano para Calendário & Mensagens

Após configurar as integrações do Gmail, Google Calendar ou Microsoft 365, você precisará iniciar os jobs em segundo plano que sincronizam dados.

Registre os seguintes jobs recorrentes em seu container worker:

```bash
# from your worker container
yarn command:prod cron:messaging:messages-import
yarn command:prod cron:messaging:message-list-fetch
yarn command:prod cron:calendar:calendar-event-list-fetch
yarn command:prod cron:calendar:calendar-events-import
yarn command:prod cron:messaging:ongoing-stale
yarn command:prod cron:calendar:ongoing-stale
yarn command:prod cron:workflow:automated-cron-trigger
```

## Configuração de Email

1. Vá para **Configurações → Painel de Controle → Variáveis de Configuração**
2. Encontre a seção **Email**
3. Configure suas configurações de SMTP:

<ArticleTabs label1="Gmail" label2="Office365" label3="Smtp4dev">

  <ArticleTab>

Você precisará provisionar uma [Senha de Aplicativo](https://support.google.com/accounts/answer/185833).

- EMAIL_DRIVER=smtp
- EMAIL_SMTP_HOST=smtp.gmail.com
- EMAIL_SMTP_PORT=465
- EMAIL_SMTP_USER=gmail_email_address
- EMAIL_SMTP_PASSWORD='gmail_app_password'

  </ArticleTab>

  <ArticleTab>

Lembre-se que, se você tiver a autenticação em 2 fatores ativada, precisará provisionar uma [Senha de Aplicativo](https://support.microsoft.com/en-us/account-billing/manage-app-passwords-for-two-step-verification-d6dc8c6d-4bf7-4851-ad95-6d07799387e9).

- EMAIL_DRIVER=smtp
- EMAIL_SMTP_HOST=smtp.office365.com
- EMAIL_SMTP_PORT=587
- EMAIL_SMTP_USER=office365_email_address
- EMAIL_SMTP_PASSWORD='office365_password'

  </ArticleTab>

  <ArticleTab>

**smtp4dev** é um servidor SMTP falso para desenvolvimento e teste.

- Execute a imagem smtp4dev: `docker run --rm -it -p 8090:80 -p 2525:25 rnwood/smtp4dev`
- Acesse a UI do smtp4dev aqui: [http://localhost:8090](http://localhost:8090)
- Defina as seguintes variáveis:
  - EMAIL_DRIVER=smtp
  - EMAIL_SMTP_HOST=localhost
  - EMAIL_SMTP_PORT=2525

  </ArticleTab>

</ArticleTabs>

<Warning>
**Environment-only mode:** If you set `IS_CONFIG_VARIABLES_IN_DB_ENABLED=false`, add these variables to your `.env` file instead.
</Warning>