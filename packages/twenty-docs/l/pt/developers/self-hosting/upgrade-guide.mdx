---
title: Guia de Atualiza√ß√£o
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Diretrizes gerais

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Se voc√™ usou Docker Compose, siga estes passos:

1. Em um terminal, no host onde Twenty est√° sendo executado, desligue o Twenty: `docker compose down`

2. Atualize a vers√£o alterando o valor `TAG` no arquivo .env pr√≥ximo ao seu docker-compose. ( Recomendamos consumir a vers√£o `major.minor`, como `v0.53` )

3. Reative o Twenty com `docker compose up -d`

Se voc√™ deseja atualizar sua inst√¢ncia por algumas vers√µes, por exemplo, de v0.33.0 para v0.35.0, voc√™ deve atualizar sua inst√¢ncia sequencialmente, neste exemplo de v0.33.0 para v0.34.0, depois de v0.34.0 para v0.35.0.

**Certifique-se de que ap√≥s cada vers√£o atualizada voc√™ tenha um backup n√£o corrompido.**

## Passos de atualiza√ß√£o espec√≠ficos da vers√£o

## v1.0

Ol√° Twenty v1.0! üéâ

## v0.60

### Melhorias de Desempenho

Todas as intera√ß√µes com a API de metadados foram otimizadas para melhor desempenho, particularmente para manipula√ß√£o de metadados de objeto e opera√ß√µes de cria√ß√£o de espa√ßo de trabalho.

Refatoramos nossa estrat√©gia de cache para priorizar acertos de cache sobre consultas de banco de dados sempre que poss√≠vel, melhorando significativamente o desempenho das opera√ß√µes da API de metadados.

Se voc√™ encontrar problemas de tempo de execu√ß√£o ap√≥s a atualiza√ß√£o, pode ser necess√°rio limpar seu cache para garantir que esteja sincronizado com as altera√ß√µes mais recentes. Execute este comando no seu cont√™iner do servidor Twenty:

```bash
yarn command:prod cache:flush
```

### v0.55

Atualize sua inst√¢ncia Twenty para usar a imagem v0.55

Voc√™ n√£o precisa mais executar nenhum comando, a nova imagem cuidar√° automaticamente de executar todas as migra√ß√µes necess√°rias.

### Erro `Usu√°rio n√£o tem permiss√£o`

Se voc√™ encontrar erros de autoriza√ß√£o na maioria das solicita√ß√µes ap√≥s a atualiza√ß√£o, pode ser necess√°rio limpar seu cache para recalcular as permiss√µes mais recentes.

No seu cont√™iner `twenty-server`, execute:

```bash
yarn command:prod cache:flush
```

Este problema √© espec√≠fico desta vers√£o do Twenty e n√£o deve ser necess√°rio para futuras atualiza√ß√µes.

### v0.54

Desde a vers√£o `0.53`, nenhuma a√ß√£o manual √© necess√°ria.

#### Descontinua√ß√£o do esquema de metadados

Mesclamos o esquema `metadata` no esquema `core` para simplificar a recupera√ß√£o de dados do `TypeORM`.
Mesclamos o passo do comando `migrate` dentro do comando `upgrade`. N√£o recomendamos executar `migrate` manualmente em nenhum de seus cont√™ineres de servidor/trabalhadores.

### Desde v0.53

A partir da vers√£o `0.53`, a atualiza√ß√£o √© realizada programaticamente dentro do `DockerFile`, o que significa que a partir de agora, voc√™ n√£o precisar√° mais executar comandos manualmente.

Certifique-se de continuar atualizando sua inst√¢ncia sequencialmente, sem pular nenhuma vers√£o principal (por exemplo, `0.43.3` para `0.44.0` √© permitido, mas `0.43.1` para `0.45.0` n√£o √©), caso contr√°rio, pode levar a uma dessincroniza√ß√£o da vers√£o do espa√ßo de trabalho que pode resultar em erro de tempo de execu√ß√£o e funcionalidade ausente.

Para verificar se um espa√ßo de trabalho foi migrado corretamente, voc√™ pode revisar sua vers√£o no banco de dados na tabela `core.workspace`.

Ela deve estar sempre no alcance da vers√£o `major.minor` da sua inst√¢ncia atual do Twenty, voc√™ pode visualizar a vers√£o da sua inst√¢ncia no painel de administra√ß√£o (em `/settings/admin-panel`, acess√≠vel se sua propriedade de usu√°rio tiver `canAccessFullAdminPanel` definida como verdadeira no banco de dados) ou executando `echo $APP_VERSION` no seu cont√™iner `twenty-server`.

Para corrigir uma vers√£o de espa√ßo de trabalho dessincronizada, voc√™ ter√° que atualizar a partir da vers√£o correspondente do Twenty seguindo o guia de atualiza√ß√£o relacionado sequencialmente e assim por diante at√© atingir a vers√£o desejada.

#### `auditLog` removal

Removemos o objeto padr√£o auditLog, o que significa que o tamanho do backup pode ser significativamente reduzido ap√≥s esta migra√ß√£o.

### v0.51 para v0.52

Atualize sua inst√¢ncia Twenty para usar a imagem v0.52

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Eu tenho um espa√ßo de trabalho bloqueado na vers√£o entre `0.52.0` e `0.52.6`

Infelizmente `0.52.0` e `0.52.6` foram completamente removidos do dockerHub.
Voc√™ ter√° que atualizar manualmente a vers√£o do seu espa√ßo de trabalho para `0.51.0` no banco de dados e atualizar usando a vers√£o twenty `0.52.11` seguindo seu guia de atualiza√ß√£o logo acima.

### v0.50 para v0.51

Atualize sua inst√¢ncia Twenty para usar a imagem v0.51

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 para v0.50.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.50.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Muta√ß√£o do Docker-compose.yml

Esta vers√£o inclui uma muta√ß√£o `docker-compose.yml` para dar ao servi√ßo `worker` acesso ao volume `server-local-data`.
Por favor, atualize seu `docker-compose.yml` local com [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 para v0.44.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.44.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 para v0.43.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.43.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

Nesta vers√£o, tamb√©m mudamos para a imagem postgres:16 no docker-compose.yml.

#### (Op√ß√£o 1) Migra√ß√£o de Banco de Dados

Manter a imagem postgres-spilo existente est√° bem, mas voc√™ ter√° que congelar a vers√£o no seu docker-compose.yml para ser 0.43.0.

#### (Op√ß√£o 2) Migra√ß√£o de Banco de Dados

Se voc√™ deseja migrar seu banco de dados para a nova imagem postgres:16, siga estas etapas:

1. Fa√ßa dump do seu banco de dados do cont√™iner antigo postgres-spilo

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Certifique-se de que seu arquivo de backup n√£o esteja vazio.

2. Atualize seu docker-compose.yml para usar a imagem postgres:16 como no arquivo [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml).

3. Restaure o banco de dados para o novo cont√™iner postgres:16

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 para v0.42.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.42.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Vari√°veis de Ambiente**

- Removido: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Adicionado: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 para v0.41.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.41.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Vari√°veis de Ambiente**

- Removido: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 para v0.40.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.40.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Vari√°veis de Ambiente**

- Adicionado: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 para v0.35.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.35.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.35` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

**Vari√°veis de Ambiente**

- Substitu√≠mos `ENABLE_DB_MIGRATIONS` por `DISABLE_DB_MIGRATIONS` (o valor padr√£o agora √© `false`, voc√™ provavelmente n√£o precisa definir nada)

### v0.33.0 para v0.34.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.34.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.34` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

**Vari√°veis de Ambiente**

- Removido: `FRONT_BASE_URL`
- Adicionado: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Atualizamos a maneira como lidamos com o URL do frontend.
Agora voc√™ pode definir o URL do frontend usando as vari√°veis `FRONT_DOMAIN`, `FRONT_PROTOCOL` e `FRONT_PORT`.
Se FRONT_DOMAIN n√£o estiver definido, o URL do frontend ser√° revertido para `SERVER_URL`.

### v0.32.0 para v0.33.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.33.0

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

O comando `yarn command:prod cache:flush` ir√° limpar o cache do Redis.
O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.33` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

A partir desta vers√£o, a imagem twenty-postgres para DB tornou-se obsoleta e twenty-postgres-spilo √© usado em seu lugar.
Se desejar continuar usando a imagem twenty-postgres, basta substituir `twentycrm/twenty-postgres:${TAG}` por `twentycrm/twenty-postgres` no docker-compose.yml.

### v0.31.0 para v0.32.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.32.0

**Migra√ß√£o de esquema e dados**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.32` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

**Vari√°veis de Ambiente**

Atualizamos a maneira como lidamos com a conex√£o Redis.

- Removido: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Adicionado: `REDIS_URL`

Atualize o seu arquivo `.env` para usar a nova vari√°vel `REDIS_URL` em vez dos par√¢metros individuais de conex√£o Redis.

Tamb√©m simplificamos a maneira como lidamos com os tokens JWT.

- Removido: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Adicionado: `APP_SECRET`

Atualize o seu arquivo `.env` para usar a nova vari√°vel `APP_SECRET` em vez dos segredos individuais de tokens (voc√™ pode usar o mesmo segredo de antes ou gerar uma nova string aleat√≥ria)

**Conta Conectada**

Se voc√™ estiver usando uma conta conectada para sincronizar seus e-mails e calend√°rios do Google, ser√° necess√°rio ativar a [People API](https://developers.google.com/people) no seu console do Google Admin.

### v0.30.0 para v0.31.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.31.0

**Migra√ß√£o de esquema e dados**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.31` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

### v0.24.0 para v0.30.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.30.0

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Atualizamos nosso [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) para refletir isso.
Certifique-se de atualizar sua configura√ß√£o e de atualizar suas vari√°veis de ambiente de acordo:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Migra√ß√£o de esquema e dados**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.30` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

### v0.23.0 para v0.24.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.24.0

Execute os seguintes comandos:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes √† estrutura do banco de dados (esquemas centrais e de metadados)
O `yarn command:prod upgrade-0.24` cuida da migra√ß√£o de dados de todos os espa√ßos de trabalho.

### v0.22.0 para v0.23.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.23.0

Execute os seguintes comandos:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes ao Banco de Dados.
O `yarn command:prod upgrade-0.23` cuida da migra√ß√£o de dados, incluindo transferir atividades para tarefas/notas.

### v0.21.0 para v0.22.0

Atualize sua inst√¢ncia Twenty para usar a imagem v0.22.0

Execute os seguintes comandos:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

O comando `yarn database:migrate:prod` aplicar√° as migra√ß√µes ao Banco de Dados.
O comando `yarn command:prod workspace:sync-metadata -f` sincronizar√° a defini√ß√£o de objetos padr√£o com as tabelas de metadados e aplicar√° as migra√ß√µes necess√°rias aos workspaces existentes.
O comando `yarn command:prod upgrade-0.22` aplicar√° transforma√ß√µes espec√≠ficas de dados para adaptar-se √†s novas `object defaultRequestInstrumentationOptions`.




