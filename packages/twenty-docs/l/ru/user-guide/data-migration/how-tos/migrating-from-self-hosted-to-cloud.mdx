---
title: Миграция с локального на облако
description: Пошаговое руководство по миграции вашего самостоятельно размещённого экземпляра Twenty в Twenty Cloud.
---

## Обзор

В этом руководстве описан процесс переноса ваших данных из самостоятельно размещённого экземпляра Twenty в Twenty Cloud. Процесс включает настройку облачного рабочего пространства, экспорт данных и их повторный импорт.

<Note>Представления, рабочие процессы и роли необходимо воссоздать вручную после миграции. Запланируйте время на эту настройку.</Note>

## Шаг 1: Создайте облачное рабочее пространство

1. Перейдите на [app.twenty.com](https://app.twenty.com) и создайте новое рабочее пространство
2. Пройдите начальный мастер настройки
3. Запишите URL нового рабочего пространства

## Шаг 2: Воссоздайте модель данных

Перед импортом данных воссоздайте ваши пользовательские объекты и поля:

1. Перейдите в **Настройки → Модель данных** в вашем облачном экземпляре
2. Создайте пользовательские объекты, соответствующие вашей конфигурации в самостоятельно размещённом экземпляре
3. Добавьте пользовательские поля к стандартным и пользовательским объектам
4. Настройте параметры полей (уникальность, обязательность и т. д.)

<Note>Сделайте скриншоты модели данных вашего самостоятельно размещённого экземпляра для справки или держите оба экземпляра открытыми рядом.</Note>

## Шаг 3: Пригласите всех пользователей

<Warning>
  **Важно: Пригласите пользователей ПЕРЕД импортом данных.**

  Пользователи должны принять приглашения до импорта любых записей, которые на них ссылаются (например, поля владельца аккаунта). Если пользователи ещё не существуют, эти связи нельзя будет сопоставить.
</Warning>

1. Перейдите в **Настройки → Участники** в вашем облачном экземпляре
2. Пригласите всех участников команды, у которых были аккаунты в самостоятельно размещённой версии
3. **Дождитесь, пока все примут** приглашения
4. Проверьте, что все пользователи отображаются в списке «Участники»

## Шаг 4: Экспортируйте данные из самостоятельно размещённой версии

Экспортируйте каждый объект из вашего самостоятельно размещённого экземпляра:

1. Перейдите к каждому объекту (Компании, Люди, Возможности и т. д.)
2. Настройте представление так, чтобы отображались **все столбцы**, которые вы хотите перенести
3. Нажмите **⋮ → Экспорт представления**
4. Сохраните каждый CSV-файл с понятным именем (например, `companies-export.csv`)

**Экспортируйте в следующем порядке** (для справки при импорте):

1. Компании
2. Люди
3. Возможности
4. Пользовательские объекты (с учётом зависимостей)
5. Задачи, заметки

## Шаг 5: Обновите ссылки на участников рабочего пространства

Экспортированные CSV-файлы содержат идентификаторы пользователей из вашего самостоятельно размещённого экземпляра. Эти идентификаторы не совпадут с облачным экземпляром, поэтому их нужно заменить на адреса электронной почты.

**Для каждого CSV-файла со ссылками на пользователей (владелец, исполнитель и т. д.):**

1. Откройте CSV в табличном редакторе
2. Добавьте новый столбец рядом с каждым столбцом идентификатора пользователя (например, `accountOwnerEmail` рядом с `accountOwnerId`)
3. Укажите **адрес электронной почты** каждого пользователя
4. Вы можете удалить старый столбец с идентификатором или оставить его (при импорте он будет пропущен)

**Пример:**

До:

```csv
name,domain,accountOwnerId
Acme Corp,https://acme.com,old-uuid-123
```

После:

```csv
name,domain,accountOwnerEmail
Acme Corp,https://acme.com,john@yourcompany.com
```

<Note>Используйте те же адреса электронной почты, которые пользователи использовали для принятия приглашения в облачное рабочее пространство.</Note>

## Шаг 6: Спланируйте порядок импорта

Импортируйте файлы в правильном порядке, чтобы сохранить связи:

1. **Компании** в первую очередь (без зависимостей)
2. **Люди** во вторую очередь (связь с компаниями)
3. **Возможности** в третью очередь (связь с компаниями и людьми)
4. **Пользовательские объекты** (с учётом зависимостей)
5. **Задачи и заметки** в последнюю очередь (связь с другими записями)

См. [как импортировать связи](/l/ru/user-guide/data-migration/how-tos/import-relations-between-objects-via-csv) для подробностей о сохранении связей.

## Шаг 7: Импорт в облако

Для каждого CSV-файла, по порядку:

1. Перейдите к объекту в вашем облачном экземпляре
2. Нажмите **⋮ → Импорт записей**
3. Загрузите файл CSV
4. Сопоставьте столбцы с полями:
   * Сопоставьте столбцы с адресами электронной почты пользователей соответствующим полям связей
   * Сопоставьте остальные столбцы как обычно
5. Проверьте и исправьте любые ошибки
6. Подтвердите импорт
7. Проверьте несколько записей, прежде чем переходить к следующему файлу

## Шаг 8: Воссоздайте конфигурацию

После импорта данных вручную воссоздайте:

### Представления

* Воссоздайте сохранённые представления с фильтрами, сортировками и настройками столбцов
* Настройте канбан- и календарные представления

### Рабочие процессы

* Воссоздайте автоматизации в **Настройки → Рабочие процессы**
* Протестируйте каждый рабочий процесс, прежде чем полагаться на него

### Роли и разрешения

* Настройте роли в **Настройки → Роли**
* Назначьте пользователям соответствующие роли

### Интеграции

* Подключите заново синхронизацию почты и календаря для каждого пользователя
* Перенастройте любые интеграции API с новыми ключами API

## Послемиграционный контрольный список

<Check>Все данные успешно импортированы</Check>
<Check>Связи между объектами работают корректно</Check>
<Check>Назначения пользователей (владелец, исполнитель) сопоставлены корректно</Check>
<Check>Представления воссозданы</Check>
<Check>Рабочие процессы воссозданы и протестированы</Check>
<Check>Роли и разрешения настроены</Check>
<Check>Синхронизация почты/календаря восстановлена</Check>
<Check>Интеграции API обновлены новыми ключами</Check>

## Часто задаваемые вопросы

<AccordionGroup>
  <Accordion title="Можно ли автоматически перенести рабочие процессы?">
    Пока нет. Рабочие процессы необходимо воссоздать вручную в вашем облачном экземпляре.
  </Accordion>

  <Accordion title="Что насчёт вложений и изображений?">
    Вложения не включаются в экспорт CSV. Вам потребуется повторно загрузить все вложения вручную, перенести их через API или связаться с нашей командой для помощи при крупных миграциях.
  </Accordion>

  <Accordion title="Можно ли держать оба экземпляра запущенными во время миграции?">
    Да, мы рекомендуем оставлять самостоятельно размещённый экземпляр запущенным, пока вы не убедитесь, что миграция в облако завершена. Просто следите, чтобы не создавать новые данные в обеих системах.
  </Accordion>

  <Accordion title="Что делать, если пользователь ещё не принял приглашение?">
    Записи, ссылающиеся на этого пользователя, не будут импортированы, либо связь останется пустой. Убедитесь, что все пользователи приняли приглашения перед импортом данных.
  </Accordion>
</AccordionGroup>

## Нужна Помощь?

Для сложных миграций или больших наборов данных свяжитесь с нами по адресу [contact@twenty.com](mailto:contact@twenty.com) или изучите наши [услуги по внедрению](/l/ru/user-guide/getting-started/capabilities/implementation-services).
