---
title: Использование веток в рабочих процессах
description: Разберитесь, как работают ветки и как управлять тем, какой путь выполняется.
---

## Как работают ветки

В редакторе рабочего процесса вы можете создавать несколько путей (веток), выходящих из одного узла. Это позволяет строить сложные автоматизации с разными результатами.

**Важно**: при запуске рабочего процесса **все ветки по умолчанию выполняются параллельно**. Нет встроенной логики "if/else" для выбора одной ветки вместо другой — каждый путь будет запускаться одновременно.

## Управление тем, какая ветка запускается

Чтобы выполнять только одну ветку на основании определённых условий, **добавьте узел Filter в начале каждой ветки**.

### Пример настройки

1. Создайте рабочий процесс с несколькими ветками от одного узла
2. Добавьте узел **Filter** в качестве первого шага в каждой ветке
3. Задайте условия на каждом узле Filter, чтобы определить, когда эта ветка должна продолжить выполнение
4. Продолжат выполнение только те ветки, для которых выполнены условия узла Filter

<img src="/images/user-guide/workflows/branches-with-filters.png" style={{width:'100%'}} />

### Как работают фильтры

* Если условие Filter выполнено: ветка продолжает выполнение
* Если условие Filter не выполнено: ветка останавливается на узле Filter

Это фактически создаёт условную логику, при которой на основе ваших данных выполняется только соответствующая ветка.

## Пример: маршрутизация по размеру сделки

**Сценарий**: когда сделка закрывается, отправляйте разные уведомления в зависимости от её размера.

1. **Триггер**: сделка обновлена (стадия = «Закрыта — выиграна»)
2. **Ветка 1**: фильтр по сумме > $10,000 → отправить сообщение в Slack в #big-deals
3. **Ветка 2**: фильтр по сумме ≤ $10,000 → отправить письмо менеджеру по продажам

Обе ветки запускаются, но продолжит выполнение после своего Filter только та, что соответствует сумме сделки.

## Создание веток

<Note>
  Чтобы создать новую ветку из существующего шага, нажмите кнопку **+** на этом шаге и добавьте действие. Вы можете добавить несколько веток, нажав **+** несколько раз.
</Note>

1. В редакторе рабочего процесса выберите шаг, от которого вы хотите создать ветку
2. Нажмите **+**, чтобы добавить действие
3. Будет создана одна ветка
4. Нажмите **+** ещё раз на том же шаге, чтобы создать дополнительные ветки
5. Каждая ветка может иметь собственную последовательность действий

## Объединение веток

После того как параллельные ветки завершат работу, вы можете объединить их обратно в один путь:

1. Завершите действия в ветках
2. Добавьте новый шаг, который должен выполняться после всех веток
3. Перетащите соединение с последнего шага каждой ветки к этому новому шагу
4. Объединенный шаг ожидает завершения всех подключенных веток перед выполнением

### Пример: обработка, затем уведомление

```
Триггер
   │
   ├── Ветка A: Обновить запись клиента
   │
   └── Ветка B: Создать заявку в поддержку

       ↘  ↙

   Объединённый шаг: Отправить подтверждающее письмо
```

Подтверждающее письмо отправится только после завершения обновления клиента и создания заявки.

## Лучшие практики

* Всегда используйте **узлы Filter** в начале веток, когда требуется условное выполнение
* Делайте условия веток **взаимно исключающимися**, чтобы избежать дублирования действий
* Тестируйте рабочие процессы с разными данными, чтобы убедиться, что запускаются правильные ветки
* **Переименовывайте шаги веток** так, чтобы было ясно, что делает каждая ветка
* **Объединяйте ветки**, когда нужно финальное действие после параллельной обработки

## Связанные материалы

* [FAQ по рабочим процессам](/l/ru/user-guide/workflows/how-tos/need-more-help/workflows-faq) — ответы о параллельном выполнении
* [Действия рабочего процесса](/l/ru/user-guide/workflows/capabilities/workflow-actions) — доступные действия для веток
