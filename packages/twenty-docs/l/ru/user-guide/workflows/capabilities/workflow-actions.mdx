---
title: Действия рабочего процесса
description: Узнайте о действиях, доступных в рабочих процессах Twenty.
---

import { VimeoEmbed } from '/snippets/vimeo-embed.mdx';

## О действиях

Действия определяют, что произойдет после срабатывания триггера. Вы можете связывать несколько действий вместе, чтобы создавать сложные автоматизации.

<Tip>
  * Используйте средство выбора переменных (нажмите значок `(x+)`), чтобы просматривать доступные данные из предыдущих шагов
  * Наведите курсор на любое поле ввода, чтобы увидеть, из какого шага поступает переменная — это полезно, когда одно и то же поле (например, ID) существует в нескольких предыдущих шагах
  * Присваивайте каждому действию описательное имя для упрощения сопровождения
</Tip>

## Действия с записями

<img src="/images/user-guide/workflows/workflow_actions.png" style={{width:'100%'}} />

### Создать запись

Добавляет новую запись в выбранный объект.

**Настройка**:

* Выберите целевой объект
* Заполните обязательные и необязательные поля
* Используйте данные из предыдущих шагов или введите значения вручную, чтобы заполнить поля

**Вывод**: Данные вновь созданной записи доступны для использования на последующих шагах.

### Обновление записи

Изменяет существующую запись в выбранном объекте.

<img src="/images/user-guide/workflows/update_record.png" style={{width:'100%'}} />

**Настройка**:

* Выберите целевой объект
* Выберите конкретную запись для обновления.
  * Вы можете либо выбрать конкретную запись, используя раскрывающееся меню, где показаны все доступные записи.
  * Либо можно выбрать запись динамически, указав запись, найденную на предыдущем шаге, с помощью `(x+)`. На этом этапе вы не можете искать запись по различным критериям. Если вы ещё не определили запись, добавьте шаг `Search Record` перед шагом `Update Record`.
* Выберите поля для изменения и введите новые значения

**Вывод**: Данные обновленной записи доступны для использования в последующих шагах.

### Удаление записи

Удаляет запись из выбранного объекта.

**Настройка**:

* Выберите целевой объект
* Выберите конкретную запись для удаления

**Вывод**: Данные удаленной записи остаются доступными для использования в последующих шагах.

### Поиск записей

Находит записи в выбранном объекте, используя условия фильтрации.

**Настройка**:

* Выберите объект для поиска
* Установите критерии фильтра для сужения результатов
* Настройте сортировку и ограничения

**Вывод**: Возвращает записи, которые могут быть использованы в последующих шагах.

<Note>
  **Ограничение**: Search Records возвращает максимум **200 записей**. Если нужно обработать больше, добавьте точные фильтры, чтобы сократить результаты, или используйте запланированные рабочие процессы для пакетной обработки.
</Note>

**Рекомендация**: Используйте [ветвления](/l/ru/user-guide/workflows/capabilities/workflow-branches) после Search Records для обработки сценариев "найдено" и "не найдено".

### Добавить или обновить запись

Создаёт новую запись или обновляет существующую на основе критериев сопоставления. Это полезно, если вы не уверены, существует ли уже запись.

<img src="/images/user-guide/workflows/upsert_double_identifier.png" style={{width:'100%'}} />

**Настройка**:

* Выберите целевой объект
* Обратите внимание, какие поля можно использовать для сопоставления: email — для People, домен — для Companies, ID — для любого объекта или любое поле, помеченное как Unique. Ниже нужно заполнить как минимум одно из них.
* Заполните значения полей. Не забудьте указать как минимум один уникальный идентификатор.

<Note>
  **Сопоставление обычно работает даже лучше, если указывать только один уникальный идентификатор.** Например, на скриншоте ниже компании сопоставляются по их домену. Указывать ID не обязательно.
</Note>

<img src="/images/user-guide/workflows/upsert_simple_identifier.png" style={{width:'100%'}} />

* Используйте данные из предыдущих шагов для заполнения полей

**Как это работает**:

1. Ищет запись, соответствующую вашим критериям
2. Если найдена → обновляет существующую запись
3. Если не найдена → создает новую запись

**Вывод**: Данные созданной или обновленной записи доступны для использования в последующих шагах.

## Действия потока

### Итератор

**Перебирает массив записей**, возвращенный на предыдущем этапе, позволяя выполнять действия для каждой записи по отдельности.

**Настройка**:

* Выберите массив записей с предыдущего шага (например, результаты из Search Records, из Manual trigger with Bulk availability, из code node)
* Определите действия, которые нужно выполнить для каждой записи в цикле.

<Note>
  - Внутри итератора можно добавить несколько действий.
  - При использовании ветвлений внутри итератора убедитесь, что последний шаг каждой ветки возвращается к итератору, чтобы замкнуть цикл.
</Note>

* Доступ к полям `Current Item`: чтобы использовать поля записи, которая обрабатывается в данный момент, нажмите на шаг **Iterator**, затем выберите **Current item**. Будет отображен список доступных полей этой записи, и их можно выбрать для использования в последующих действиях.

<VimeoEmbed videoId="1146577247" title="Видеодемонстрация" />

### Фильтр

Фильтрует записи на основе указанных условий, пропуская только записи, соответствующие критериям.

**Настройка**:

* Выберите запись для фильтрации
* Определите условия фильтрации и критерии
* Настройте, какие записи должны пройти через последующие шаги

<Note>
  1. **Вывод**: Узлы фильтра не возвращают данные — они работают как шлюзы. Если условия выполнены, рабочий процесс продолжается. Если нет, рабочий процесс останавливается на этой ветке.
  2. Оператор `IS` можно использовать с числовыми полями. Он работает как `EQUAL`.
</Note>

### Задержка

Приостанавливает выполнение рабочего процесса на указанное время или до определенной даты/времени.

**Типы задержек**:

| Тип                      | Описание                                                         |
| ------------------------ | ---------------------------------------------------------------- |
| **Длительность**         | Ожидать заданный промежуток времени (дни, часы, минуты, секунды) |
| **Запланированная дата** | Ждать до определенной даты и времени                             |

**Настройка длительности**:

* Укажите дни, часы, минуты и/или секунды
* Объединяйте несколько единиц (например, 2 дня и 4 часа)

**Настройка запланированной даты**:

* Выберите дату и время
* Можно ссылаться на поле даты с предыдущего шага (например, связаться повторно через 3 дня после встречи)

**Сценарии использования**:

* Подождать 24 часа перед отправкой повторного письма
* Пауза до даты закрытия сделки
* Запланировать действия на рабочие часы

<Note>
  Запланированная дата не может быть в прошлом. Если используется поле даты с предыдущего шага и эта дата уже прошла, рабочий процесс завершится с ошибкой.
</Note>

**Ограничения и кредиты**:

* **Нет максимального ограничения по длительности** — вы можете задавать задержки в минутах, днях, неделях или больше
* **Списывается 1 кредит** при выполнении узла Задержка, независимо от длительности
* **Кредиты не списываются** во время ожидания — задержка на 5 минут стоит столько же, сколько задержка на 5 дней

## Коммуникационные действия

### Отправить письмо

Отправляет email из вашего рабочего процесса. Подходит для шаблонных групповых писем. Письма будут выглядеть так же, как те, что вы отправляете из своего почтового ящика.
Не подходит для рассылок (им требуется более богатое форматирование) или автоматических цепочек писем.

**Предварительные условия**: добавьте учетную запись электронной почты в Настройки → Учетные записи

**Настройка**:

* Выберите учетную запись электронной почты отправителя

<Note>
  Вы можете отправлять письма только из почтовых ящиков, синхронизированных с вашей собственной учетной записью Twenty. Отправка из почтовых ящиков других участников команды (например, из электронной почты владельца учетной записи) запланирована.
</Note>

Для всех следующих шагов вы можете использовать переменные из предыдущих шагов для персонализации.

* Введите email-адрес получателя.

<Note>
  На данный момент возможен только один получатель.
</Note>

* Установите строку темы.
* Составьте текст сообщения. Можно форматировать ссылки, создавать нумерованные и маркированные списки, добавлять вложения.

<Note>
  Добавление HTML-подписей пока невозможно.
</Note>

### Форма

Выводит форму во время выполнения рабочего процесса для сбора информации от пользователя. Ответы затем можно использовать на последующих шагах для создания записей, отправки писем или выполнения любых других действий на основе введенных данных.

<Warning>
  **Формы предназначены только для ручных триггеров**. Для рабочих процессов с другими триггерами (запись создана, обновлена и т. д.) формы доступны только через интерфейс запуска рабочего процесса, и это не ожидаемый пользователем опыт. Центр уведомлений будет выпущен в 2026 году для полноценной поддержки форм в автоматизированных рабочих процессах.
</Warning>

**Настройка**:

* Настройте поля, которые пользователям предложат заполнить. Для каждого поля выберите
  * тип: текст, число, дата, заданная запись, поле выбора. Поля выбора доступны для всех объектов.
  * метку
  * значение по умолчанию в `Placeholder` (необязательно)
* Отредактируйте заголовок формы

**Вывод**: ответы формы доступны для использования в последующих шагах.

**Пример**: Рабочий процесс "Quick Lead" доступен по умолчанию во всех рабочих пространствах, доступен в любом месте через Command Menu `Cmd + K`.

**Как заполнить форму**:

* Запустите свой ручной рабочий процесс из командного меню `Cmd K`
* Заполните форму, отображаемую в боковой панели, и нажмите `Submit`.

<Note>
  Поля нельзя сделать обязательными.
</Note>

<VimeoEmbed videoId="1147277989" title="Видеодемонстрация" />

## Интеграционные действия

### Код

Выполняет кастомный JavaScript в вашем рабочем процессе.

**Настройка**:

* Получайте доступ к переменным из предыдущих шагов. Вы можете динамически изменять имена переменных.

<VimeoEmbed videoId="1147281795" title="Видеодемонстрация" />

* Напишите код JavaScript в редакторе
* Возвращайте переменные для использования в последующих шагах
* Проверяйте код непосредственно в шаге

<Note>
  Если вам нужно использовать внешние ключи API в вашем коде, их необходимо вводить прямо в тело функции. Нельзя настроить ключи API в другом месте и ссылаться на них в бессерверной функции.
</Note>

<Tip>
  **Работаете с массивами?** Массивы из внешних систем или с предыдущих шагов могут приходить как строки. См. [Как обрабатывать массивы в действиях Code](/l/ru/user-guide/workflows/how-tos/advanced-configurations/handle-arrays-in-code-actions) для решения.
</Tip>

<Tip>
  Нажмите квадратный значок в правом верхнем углу редактора кода, чтобы отобразить его на весь экран — это полезно, поскольку ширина редактора по умолчанию ограничена.
</Tip>

### HTTP-запрос

Отправляет запрос внешнему API в рамках вашего рабочего процесса.

<img src="/images/user-guide/workflows/http_action.png" style={{width:'100%'}} />

**Настройка**:

* Введите URL конечной точки API. Можно использовать параметры из предыдущих шагов.
* Выберите метод HTTP (GET, POST, PUT, PATCH, DELETE)
* Добавьте необходимые заголовки и значения
* Предоставьте пример ответа для предварительного просмотра структуры

## Действия ИИ

### ИИ-агент — скоро

Запускает ИИ-агента внутри вашего рабочего процесса для выполнения интеллектуальных задач.

**Настройка**:

* **Агент**: Выберите существующего ИИ-агента или используйте агента по умолчанию
* **Промпт**: Напишите инструкцию для ИИ-агента
* Ссылайтесь на переменные из предыдущих шагов в промпте

**Что могут делать ИИ-агенты**:

* Анализировать и резюмировать данные
* Классифицировать или категоризировать записи
* Генерировать текстовый контент
* Принимать решения на основе данных
* Взаимодействовать с данными вашей CRM с помощью инструментов

**Вывод**: Ответ ИИ-агента доступен для использования в последующих шагах. Если у агента есть схема структурированного вывода, ответ будет соответствовать этому формату.

<Note>
  Действия ИИ-агента потребляют кредиты рабочего процесса в зависимости от используемой модели ИИ. См. [Кредиты рабочих процессов](/l/ru/user-guide/workflows/capabilities/workflow-credits) для подробностей.
</Note>

<Note>
  ИИ-агенты соблюдают права доступа на основе ролей. Вы можете назначать агентам конкретные роли в **Настройки → Роли**, чтобы контролировать, к каким данным у них есть доступ. См. [Разрешения](/l/ru/user-guide/permissions-access/capabilities/permissions) для подробностей.
</Note>
