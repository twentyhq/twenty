---
title: Устранение неполадок рабочего процесса
description: Распространённые проблемы с рабочими процессами и способы их решения.
---

## Распространенные проблемы и решения

### Рабочий процесс не запускается

**Симптомы**: Ваш рабочий процесс не запускается, когда вы этого ожидаете.

**Возможные причины**:

1. **Рабочий процесс не активирован**: Убедитесь, что для рабочего процесса установлен статус "Active", а не "Draft"
2. **Условия триггера не выполняются**: Убедитесь, что триггер соответствует ожидаемому событию
3. **Поле не отслеживается**: Для триггеров "Record is Updated" убедитесь, что нужное поле отслеживается
4. **Разрешения**: Проверьте, есть ли у вас разрешение на запуск рабочих процессов

**Решения**:

* Проверьте статус рабочего процесса в списке рабочих процессов
* Протестируйте с конкретным действием, которое должно его запустить
* Проверьте конфигурацию триггера
* Свяжитесь с администратором по поводу разрешений

### Триггер рабочего процесса срабатывает слишком рано (пустые поля)

**Симптомы**: При ручном создании записи в интерфейсе рабочий процесс срабатывает до того, как вы успеете заполнить все поля. Рабочий процесс запускается с преимущественно пустыми значениями полей.

**Почему это происходит**: Twenty сохраняет всё в режиме реального времени — нет раздельных режимов "edit" и "read". Когда вы создаёте запись, она сохраняется сразу, что вызывает событие "Record is created" до того, как вы успеете заполнить дополнительные поля.

**Когда "Record is created" работает хорошо**:

* Записи, созданные через вызовы API (поля заполняются одним запросом)
* Записи, созданные через импорт
* Автоматическое создание записей из других рабочих процессов

**Решение**: Для записей, созданных вручную в интерфейсе, используйте в качестве триггера **"Record is created or updated"**. Таким образом:

* Рабочий процесс запускается после того, как пользователь завершил заполнение и сохранение полей
* Вы получаете полные данные, а не пустые значения

<Tip>
  Если вы хотите, чтобы рабочий процесс запускался только один раз для каждой записи, добавьте действие Filter, чтобы проверить поле, например `createdAt equals updatedAt` (первое сохранение), или используйте пользовательское поле-флажок, чтобы отслеживать, запускался ли рабочий процесс ранее.
</Tip>

### Сбои действий

**Симптомы**: Рабочий процесс запускается, но некоторые действия завершаются с ошибкой.

**Возможные причины**:

1. **Отсутствующие данные**: Обязательные поля пустые
2. **Недопустимые ссылки**: Переменные из предыдущих шагов отсутствуют
3. **Ошибки API**: Внешние сервисы возвращают ошибки
4. **Проблемы с разрешениями**: Действие требует разрешений, которых у вас нет

**Решения**:

* Проверьте сведения о запуске рабочего процесса на наличие сообщений об ошибках
* Убедитесь, что все обязательные поля заполнены
* Протестируйте соединения с API отдельно
* Проверьте разрешения ролей

### Ошибки HTTP-запросов

**Симптомы**: Действия HTTP Request завершаются с ошибкой или возвращают неожиданные результаты.

**Распространённые коды ошибок**:

* **400**: Некорректный запрос — проверьте формат тела запроса
* **401**: Неавторизовано — проверьте ключ API
* **403**: Запрещено — проверьте разрешения API
* **404**: Не найдено — проверьте URL конечной точки
* **429**: Слишком много запросов — реализуйте ограничение частоты
* **500**: Ошибка сервера — проблема внешнего сервиса

**Решения**:

* Проверьте URL конечной точки API
* Проверьте заголовки аутентификации
* Сначала протестируйте вызов API вне Twenty
* Добавьте обработку ошибок в действиях Code

### Ошибки действий Code

**Симптомы**: Код JavaScript не выполняется.

**Распространённые проблемы**:

1. **Синтаксические ошибки**: Опечатки или недопустимый JavaScript
2. **Неопределённые переменные**: Обращение к переменным, которые не существуют
3. **Ошибки типов**: Операции с некорректными типами данных
4. **Тайм-ауты**: Код выполняется слишком долго

**Решения**:

* Используйте проверку в встроенном редакторе кода
* Сначала протестируйте логику кода в консоли JavaScript
* Добавьте операторы console.log для отладки
* Упростите сложные операции

### Письма не отправляются

**Симптомы**: Действие Send Email не доставляет письма.

**Возможные причины**:

1. **Не подключена учетная запись электронной почты**: Проверьте Settings → Accounts
2. **Недопустимый адрес электронной почты**: Адрес электронной почты получателя имеет неверный формат
3. **Ограничения на отправку**: Достигнуты лимиты скорости у провайдера электронной почты
4. **Спам-фильтры**: Письма блокируются

**Решения**:

* Проверьте подключение учетной записи электронной почты
* Проверьте адреса электронной почты получателей
* Проверьте лимиты провайдера электронной почты
* Проверьте содержимое письма на наличие признаков спама

## Отладка рабочих процессов

### Использование запусков рабочего процесса

1. Перейдите в редактор рабочего процесса
2. Откройте панель **Runs**
3. Найдите запуск со сбоем
4. Нажмите, чтобы увидеть подробности по шагам
5. Просмотрите сообщения об ошибках и выходные данные

### Тестирование отдельных шагов

1. Для действий Code используйте кнопку **Test**
2. Для HTTP-запросов протестируйте конечную точку отдельно
3. Создайте тестовые записи, чтобы запускать рабочие процессы
4. Используйте ручные триггеры для контролируемого тестирования

### Распространённые шаблоны отладки

**Добавьте логирование**:
Используйте действия Code, чтобы записывать промежуточные значения для отладки.

**Изолируйте шаги**:
Тестируйте каждый шаг отдельно, чтобы выявить сбои.

**Проверьте поток данных**:
Убедитесь, что каждый шаг получает ожидаемые входные данные.

## Рекомендации по предотвращению проблем

### Перед активацией

* Тщательно протестируйте в режиме черновика
* Проверьте все подключения к API
* Внимательно проверьте условия триггера
* Задокументируйте ожидаемое поведение

### Во время разработки

* Используйте понятные названия шагов
* Добавьте комментарии в действиях Code
* Тестируйте с реалистичными данными
* Планируйте обработку крайних случаев

### После активации

* Внимательно отслеживайте первые запуски
* Настройте оповещения о сбоях
* Регулярно просматривайте историю запусков
* По возможности делайте рабочие процессы простыми
