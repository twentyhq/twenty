---
title: Pr≈Øvodce upgradem
---

## Obecn√© pokyny

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Pokud jste pou≈æili Docker Compose, postupujte takto:

1. V termin√°lu, na hostiteli, kde Twenty bƒõ≈æ√≠, vypnƒõte Twenty: `docker compose down`

2. Upgradujte verzi zmƒõnou hodnoty `TAG` v souboru .env vedle va≈°eho docker-compose. (Doporuƒçujeme zv√°≈æit verzi `major.minor`, jako je `v0.53`)

3. Opƒõtovnƒõ zapnƒõte Twenty pomoc√≠ `docker compose up -d`

Chcete-li upgradovat svou instanci o nƒõkolik verz√≠, nap≈ô√≠klad z v0.33.0 na v0.35.0, mus√≠te svou instanci postupnƒõ upgradovat, v tomto p≈ô√≠kladu z v0.33.0 na v0.34.0 a pot√© z v0.34.0 na v0.35.0.

**Ujistƒõte se, ≈æe m√°te po ka≈æd√©m upgradu nepo≈°kozenou z√°lohu.**

## Kroky upgradu specifick√© pro danou verzi

## v1.0

Ahoj Twenty v1.0! üéâ

## v0.60

### Vylep≈°en√≠ v√Ωkonu

V≈°echny interakce s metadatov√Ωm API byly optimalizov√°ny pro lep≈°√≠ v√Ωkon, zejm√©na pro manipulaci s metadaty objekt≈Ø a operace vytv√°≈ôen√≠ pracovn√≠ch prostor≈Ø.

We've refactored our caching strategy to prioritize cache hits over database queries when possible, significantly improving the performance of metadata API operations.

Pokud po upgradu naraz√≠te na probl√©my s v√Ωkonem, m≈Ø≈æe b√Ωt nutn√© vypr√°zdnit cache, aby bylo zaji≈°tƒõno jej√≠ sladƒõn√≠ s nejnovƒõj≈°√≠mi zmƒõnami. Spus≈•te tento p≈ô√≠kaz v kontejneru twenty-server:

```bash
yarn command:prod cache:flush
```

### v0.55

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.55 image

U≈æ nemus√≠te spou≈°tƒõt ≈æ√°dn√Ω p≈ô√≠kaz, nov√Ω obraz se automaticky postar√° o spu≈°tƒõn√≠ v≈°ech po≈æadovan√Ωch migrac√≠.

### Chyba `U≈æivatel nem√° opr√°vnƒõn√≠`

Pokud po upgradu naraz√≠te na chyby autorizace na vƒõt≈°inƒõ po≈æadavk≈Ø, m≈Ø≈æe b√Ωt nutn√© vypr√°zdnit cache, abyste znovu provedli vyhodnocen√≠ nejnovƒõj≈°√≠ch opr√°vnƒõn√≠.

Ve sv√©m kontejneru `twenty-server` spus≈•te:

```bash
yarn command:prod cache:flush
```

Tento probl√©m je specifick√Ω pro tuto verzi Twenty a nemƒõl by b√Ωt vy≈æadov√°n pro budouc√≠ upgrady.

### v0.54

Od verze `0.53`, nejsou nutn√© ≈æ√°dn√© manu√°ln√≠ akce.

#### Omezen√≠ metadatov√©ho sch√©matu

Slouƒçili jsme sch√©ma `metadata` do `core`, abychom zjednodu≈°ili naƒç√≠t√°n√≠ dat z `TypeORM`.
Slouƒçili jsme krok p≈ô√≠kazu `migrate` do p≈ô√≠kazu `upgrade`. Nedoporuƒçujeme ruƒçnƒõ spou≈°tƒõt `migrate` v ≈æ√°dn√©m z va≈°ich kontejner≈Ø server/worker.

### Od v0.53

Od `0.53` je upgrade programovƒõ upraven v r√°mci `DockerFile`, co≈æ znamen√°, ≈æe od t√©to chv√≠le ji≈æ nemus√≠te ruƒçnƒõ spou≈°tƒõt ≈æ√°dn√Ω p≈ô√≠kaz.

Ujistƒõte se, ≈æe upgradujete svou instanci postupnƒõ, ani≈æ byste p≈ôeskoƒçili hlavn√≠ verzi (nap≈ô. `0.43.3` na `0.44.0` je povoleno, ale `0.43.1` na `0.45.0` nikoli), aby se p≈ôede≈°lo asynchronizaci verz√≠ pracovn√≠ho prostoru, co≈æ by mohlo m√≠t za n√°sledek chybu p≈ôi bƒõhu a chybƒõj√≠c√≠ funkƒçnost.

Chcete-li zkontrolovat, zda byl pracovn√≠ prostor spr√°vnƒõ migrov√°n, m≈Ø≈æete zkontrolovat jeho verzi v datab√°zi v tabulce `core.workspace`.

Mƒõla by se v≈ædy nach√°zet v rozmez√≠ va≈°√≠ aktu√°ln√≠ instance Twenty `major.minor` verze. M≈Ø≈æete zkontrolovat verzi instance na ovl√°dac√≠m panelu administr√°tora (na `/settings/admin-panel`, p≈ô√≠stupn√©, pokud m√°te v datab√°zi nastaveno u≈æivatelsk√© vlastnosti `canAccessFullAdminPanel` na true) nebo spu≈°tƒõn√≠m `echo $APP_VERSION` ve va≈°em kontejneru `twenty-server`.

Chcete-li opravit asynchronizaci verz√≠ pracovn√≠ho prostoru, budete muset upgradovat z odpov√≠daj√≠c√≠ verze twenty podle souvisej√≠c√≠ho pr≈Øvodce upgradem po jednotliv√Ωch kroc√≠ch, a≈æ do dosa≈æen√≠ po≈æadovan√© verze.

#### Odstranƒõn√≠ `auditLog`

Odstranili jsme standardn√≠ objekt auditLog, co≈æ znamen√°, ≈æe v√°≈° z√°lo≈æn√≠ soubor m≈Ø≈æe b√Ωt po t√©to migraci v√Ωraznƒõ zmen≈°en.

### v0.51 a≈æ v0.52

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.52 image

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### M√°m pracovn√≠ prostor zablokovan√Ω ve verzi mezi `0.52.0` a `0.52.6`

Bohu≈æel `0.52.0` a `0.52.6` byly zcela odstranƒõny z dockerHub.
Budete muset ruƒçnƒõ zmƒõnit verzi pracovn√≠ho prostoru na `0.51.0` v datab√°zi a upgradovat pomoc√≠ twenty verze `0.52.11` podle jej√≠ho v√Ω≈°e uveden√©ho pr≈Øvodce upgradem.

### v0.50 a≈æ v0.51

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.51 image

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 a≈æ v0.50.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.50.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Mutace Docker-compose.yml

Tato verze obsahuje mutaci `docker-compose.yml`, kter√° zaji≈°≈•uje, ≈æe slu≈æba `worker` m√° p≈ô√≠stup k objemu `server-local-data`.
Aktualizujte sv≈Øj m√≠stn√≠ `docker-compose.yml` pomoc√≠ [docker-compose.yml v0.50.0](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 a≈æ v0.44.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.44.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 a≈æ v0.43.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.43.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade
```

V t√©to verzi jsme tak√© p≈ôe≈°li na obraz postgres:16 v docker-compose.yml.

#### (Mo≈ænost 1) Migrace datab√°ze

Zachov√°n√≠ existuj√≠c√≠ho obrazu postgres-spilo je v po≈ô√°dku, ale budete muset zmrazit verzi v `docker-compose.yml` na 0.43.0.

#### (Mo≈ænost 2) Migrace datab√°ze

Pokud chcete migrovat svou datab√°zi na nov√Ω obraz postgres:16, postupujte podle tƒõchto krok≈Ø:

1. Z√°lohujte svou datab√°zi z kontejneru postgres-spilo

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Ujistƒõte se, ≈æe v√°≈° z√°lo≈æn√≠ soubor nen√≠ pr√°zdn√Ω.

2. Upgradujte sv≈Øj `docker-compose.yml` na pou≈æit√≠ obrazu postgres:16 podle [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) soubor.

3. Obnovte datab√°zi do nov√©ho kontejneru postgres:16

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 a≈æ v0.42.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.42.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Promƒõnn√© prost≈ôed√≠**

* Odstranƒõno: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
* P≈ôid√°no: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 a≈æ v0.41.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.41.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Promƒõnn√© prost≈ôed√≠**

* Odstranƒõno: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 a≈æ v0.40.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.40.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Promƒõnn√© prost≈ôed√≠**

* P≈ôid√°no: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 a≈æ v0.35.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.35.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.35` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

**Promƒõnn√© prost≈ôed√≠**

* Nahradili jsme `ENABLE_DB_MIGRATIONS` s `DISABLE_DB_MIGRATIONS` (v√Ωchoz√≠ hodnota je nyn√≠ `false`, pravdƒõpodobnƒõ nemus√≠te nastavovat nic)

### v0.33.0 a≈æ v0.34.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.34.0 image

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.34` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

**Promƒõnn√© prost≈ôed√≠**

* Odstranƒõno: `FRONT_BASE_URL`
* P≈ôid√°no: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Aktualizovali jsme zp≈Øsob, jak√Ωm zpracov√°v√°me frontend URL.
Nyn√≠ m≈Ø≈æete nastavit frontend URL pomoc√≠ promƒõnn√Ωch `FRONT_DOMAIN`, `FRONT_PROTOCOL` a `FRONT_PORT`.
Pokud nen√≠ FRONT_DOMAIN nastavena, frontend URL se vr√°t√≠ na `SERVER_URL`.

### v0.32.0 a≈æ v0.33.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.33.0 image

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

P≈ô√≠kaz `yarn command:prod cache:flush` vypr√°zdn√≠ cache Redis.
P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.33` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

Od t√©to verze se obraz twenty-postgres pro DB stal zastaral√Ωm a m√≠sto nƒõj se pou≈æ√≠v√° twenty-postgres-spilo.
Pokud chcete pokraƒçovat v pou≈æ√≠v√°n√≠ obrazu twenty-postgres, jednodu≈°e nahraƒète `twentycrm/twenty-postgres:${TAG}` za `twentycrm/twenty-postgres` v docker-compose.yml.

### v0.31.0 a≈æ v0.32.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.32.0 image

**Migrace sch√©matu a dat**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.32` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

**Promƒõnn√© prost≈ôed√≠**

Aktualizovali jsme zp≈Øsob, jak√Ωm zpracov√°v√°me p≈ôipojen√≠ k Redis.

* Odstranƒõno: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
* P≈ôid√°no: `REDIS_URL`

Aktualizujte sv≈Øj `.env` soubor tak, aby pou≈æ√≠val novou promƒõnnou `REDIS_URL` m√≠sto jednotliv√Ωch parametr≈Ø p≈ôipojen√≠ k Redis.

Tak√© jsme zjednodu≈°ili zp≈Øsob, jak√Ωm zpracov√°v√°me tokeny JWT.

* Odstranƒõno: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
* P≈ôid√°no: `APP_SECRET`

Aktualizujte sv≈Øj `.env` soubor tak, aby pou≈æ√≠val novou promƒõnnou `APP_SECRET` m√≠sto jednotliv√Ωch token≈Ø (m≈Ø≈æete pou≈æ√≠t stejn√Ω tajn√Ω ≈ôetƒõzec jako d≈ô√≠ve nebo vygenerovat nov√Ω n√°hodn√Ω ≈ôetƒõzec)

**Propojen√Ω √∫ƒçet**

Pokud pou≈æ√≠v√°te propojen√Ω √∫ƒçet k synchronizaci va≈°ich email≈Ø a kalend√°≈ô≈Ø Google, budete muset aktivovat [People API](https://developers.google.com/people) na konzoli Google Admin.

### v0.30.0 a≈æ v0.31.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.31.0 image

**Migrace sch√©matu a dat**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.31` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

### v0.24.0 a≈æ v0.30.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.30.0 image

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Aktualizovali jsme n√°≈° [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml), aby to odr√°≈æel.
Ujistƒõte se, ≈æe jste aktualizovali svou konfiguraci a sv√© promƒõnn√© prost≈ôed√≠ odpov√≠daj√≠c√≠m zp≈Øsobem:

```
REDIS_HOST={v√°≈°-redis-host}
REDIS_PORT={v√°≈°-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Migrace sch√©matu a dat**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.30` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

### v0.23.0 a≈æ v0.24.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.24.0 image

Spus≈•te n√°sleduj√≠c√≠ p≈ô√≠kazy:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny struktury datab√°ze (core a metadata sch√©mata)
P≈ô√≠kaz `yarn command:prod upgrade-0.24` se postar√° o datovou migraci v≈°ech pracovn√≠ch m√≠st.

### v0.22.0 a≈æ v0.23.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.23.0 image

Spus≈•te n√°sleduj√≠c√≠ p≈ô√≠kazy:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny na datab√°zi.
P≈ô√≠kaz `yarn command:prod upgrade-0.23` se postar√° o datovou migraci, vƒçetnƒõ p≈ôesunu aktivit na √∫koly/pozn√°mky.

### v0.21.0 a≈æ v0.22.0

Upgradujte svou instanci Twenty pro pou≈æit√≠ v0.22.0 image

Spus≈•te n√°sleduj√≠c√≠ p≈ô√≠kazy:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

P≈ô√≠kaz `yarn database:migrate:prod` aplikuje zmƒõny na datab√°zi.
P≈ô√≠kaz `yarn command:prod workspace:sync-metadata -f` synchronizuje definici standardn√≠ch objekt≈Ø s tabulkami metadata a aplikuje nezbytn√© migrace na existuj√≠c√≠ pracovn√≠ prostory.
P≈ô√≠kaz `yarn command:prod upgrade-0.22` aplikuje specifick√© datov√© transformace pro adaptaci na nov√© objektov√© defaultRequestInstrumentationOptions.
