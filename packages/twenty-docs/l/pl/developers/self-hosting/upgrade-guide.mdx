---
title: Przewodnik aktualizacji
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## OgÃ³lne wskazÃ³wki

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

JeÅ›li uÅ¼yÅ‚eÅ› Docker Compose, postÄ™puj zgodnie z tymi krokami:

1. W terminalu, na hoÅ›cie, na ktÃ³rym dziaÅ‚a Twenty, wyÅ‚Ä…cz Twenty: `docker compose down`

2. Zaktualizuj wersjÄ™, zmieniajÄ…c wartoÅ›Ä‡ `TAG` w pliku .env obok docker-compose. ( Zalecamy korzystanie z wersji `major.minor`, takie jak `v0.53` )

3. PrzywrÃ³Ä‡ pracÄ™ Twenty w trybie online za pomocÄ… `docker compose up -d`

JeÅ›li chcesz zaktualizowaÄ‡ swojÄ… instancjÄ™ o kilka wersji, np. z v0.33.0 do v0.35.0, musisz zaktualizowaÄ‡ instancjÄ™ kolejno, w tym przykÅ‚adzie z v0.33.0 do v0.34.0, a nastÄ™pnie z v0.34.0 do v0.35.0.

**Upewnij siÄ™, Å¼e po kaÅ¼dej zaktualizowanej wersji masz nieuszkodzonÄ… kopiÄ™ zapasowÄ….**

## Kroki aktualizacji specyficzne dla wersji

## v1.0

Witaj Twenty v1.0! ğŸ‰

## v0.60

### Ulepszenia wydajnoÅ›ci

All interactions with the metadata API have been optimized for better performance, particularly for object metadata manipulation and workspace creation operations.

We've refactored our caching strategy to prioritize cache hits over database queries when possible, significantly improving the performance of metadata API operations.

JeÅ›li napotkasz jakiekolwiek problemy z dziaÅ‚aniem po aktualizacji, moÅ¼e byÄ‡ konieczne oprÃ³Å¼nienie pamiÄ™ci podrÄ™cznej, aby upewniÄ‡ siÄ™, Å¼e jest zsynchronizowana z najnowszymi zmianami. Uruchom to polecenie w swoim kontenerze twenty-server:

```bash
yarn command:prod cache:flush
```

### v0.55

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.55

Nie musisz juÅ¼ uruchamiaÄ‡ Å¼adnych poleceÅ„, nowy obraz automatycznie zadba o uruchomienie wszystkich wymaganych migracji.

### BÅ‚Ä…d 'UÅ¼ytkownik nie ma uprawnieÅ„'

JeÅ›li napotkasz bÅ‚Ä™dy autoryzacji przy wiÄ™kszoÅ›ci Å¼Ä…daÅ„ po aktualizacji, moÅ¼e byÄ‡ konieczne oprÃ³Å¼nienie pamiÄ™ci podrÄ™cznej, aby ponownie przeliczyÄ‡ najnowsze uprawnienia.

W swoim kontenerze `twenty-server` uruchom:

```bash
yarn command:prod cache:flush
```

Ten problem jest specyficzny dla tej wersji Twenty i nie powinien byÄ‡ wymagany w przyszÅ‚ych aktualizacjach.

### v0.54

Od wersji `0.53` nie sÄ… wymagane Å¼adne dziaÅ‚ania manualne.

#### PrzestarzaÅ‚oÅ›Ä‡ schematu meta danych

We've merged the `metadata` schema into the `core` one to simplify data retrieval from `TypeORM`.
PoÅ‚Ä…czyliÅ›my krok polecenia `migrate` w ramach polecenia `upgrade`. Nie zalecamy rÄ™cznego uruchamiania `migrate` w Å¼adnym z waszych kontenerÃ³w serwera/worker.

### Od v0.53

Starting from `0.53`, upgrade is programmatically done within the `DockerFile`, this means from now on, you shouldn't have to run any command manually anymore.

Make sure to keep upgrading your instance sequentially, without skipping any major version (e.g. `0.43.3` to `0.44.0` is allowed, but `0.43.1` to `0.45.0` isn't), else could lead to workspace version desynchronization that could result in runtime error and missing functionality.

Aby sprawdziÄ‡, czy przestrzeÅ„ robocza zostaÅ‚a poprawnie zmigrowana, moÅ¼na sprawdziÄ‡ jej wersjÄ™ w bazie danych w tabeli `core.workspace`.

Powinna zawsze znajdowaÄ‡ siÄ™ w zakresie bieÅ¼Ä…cej wersji `major.minor` instancji Twenty. MoÅ¼esz zobaczyÄ‡ swojÄ… wersjÄ™ instancji na panelu administracyjnym (pod `/settings/admin-panel`, dostÄ™pnym, jeÅ›li twÃ³j uÅ¼ytkownik ma ustawionÄ… wÅ‚aÅ›ciwoÅ›Ä‡ `canAccessFullAdminPanel` na true w bazie danych) lub uruchamiajÄ…c `echo $APP_VERSION` w swoim kontenerze `twenty-server`.

To fix a desynchronized workspace version, you will have to upgrade from the corresponding twenty's version following related upgrade guide sequentially and so on until it reaches desired version.

#### UsuniÄ™cie `auditLog`

UsunÄ™liÅ›my standardowy obiekt auditLog, co oznacza, Å¼e rozmiar kopii zapasowej moÅ¼e znacznie siÄ™ zmniejszyÄ‡ po tej migracji.

### v0.51 do v0.52

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.52

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Mam przestrzeÅ„ roboczÄ… zablokowanÄ… w wersji miÄ™dzy `0.52.0` a `0.52.6`

Niestety `0.52.0` i `0.52.6` zostaÅ‚y caÅ‚kowicie usuniÄ™te z dockerHub.
You will have to manually update your workspace version to `0.51.0` in database and upgrade using twenty version `0.52.11` following its just above upgrade guide.

### v0.50 do v0.51

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.51

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 do v0.50.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.50.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Mutacja Docker-compose.yml

Ta wersja obejmuje mutacjÄ™ `docker-compose.yml`, aby daÄ‡ usÅ‚udze `worker` dostÄ™p do wolumenu `server-local-data`.
Zaktualizuj lokalny plik `docker-compose.yml` przy uÅ¼yciu [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 do v0.44.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.44.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 do v0.43.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.43.0

```
yarn database:migrate:prod
yarn command:prod upgrade
```

W tej wersji przeszliÅ›my rÃ³wnieÅ¼ na obraz postgres:16 w docker-compose.yml.

#### (Opcja 1) Migracja bazy danych

Utrzymanie istniejÄ…cego obrazu postgres-spilo jest w porzÄ…dku, ale musisz zamroziÄ‡ wersjÄ™ w swoim docker-compose.yml na 0.43.0.

#### (Opcja 2) Migracja bazy danych

JeÅ›li chcesz przenieÅ›Ä‡ swojÄ… bazÄ™ danych na nowy obraz postgres:16, postÄ™puj zgodnie z tymi krokami:

1. ZrzuÄ‡ swojÄ… bazÄ™ danych z starego kontenera postgres-spilo

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Upewnij siÄ™, Å¼e plik zrzutu nie jest pusty.

2. Zaktualizuj swÃ³j docker-compose.yml, aby uÅ¼ywaÄ‡ obrazu postgres:16, zgodnie z plikiem [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml).

3. PrzywrÃ³Ä‡ bazÄ™ danych do nowego kontenera postgres:16

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 do v0.42.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.42.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Zmienna Å›rodowiskowa**

- UsuniÄ™te: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Dodane: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 do v0.41.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.41.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Zmienna Å›rodowiskowa**

- UsuniÄ™te: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 do v0.40.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.40.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Zmienna Å›rodowiskowa**

- Dodane: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 do v0.35.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.35.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.35` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

**Zmienna Å›rodowiskowa**

- ZastÄ…piliÅ›my `ENABLE_DB_MIGRATIONS` z `DISABLE_DB_MIGRATIONS` (domyÅ›lna wartoÅ›Ä‡ jest teraz `false`, prawdopodobnie nie bÄ™dziesz musiaÅ‚ niczego ustawiaÄ‡).

### v0.33.0 do v0.34.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.34.0

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.34` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

**Zmienna Å›rodowiskowa**

- UsuniÄ™te: `FRONT_BASE_URL`
- Dodane: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

ZaktualizowaliÅ›my sposÃ³b obsÅ‚ugi adresu URL frontend.
Teraz moÅ¼esz ustawiÄ‡ adres URL frontend za pomocÄ… zmiennych `FRONT_DOMAIN`, `FRONT_PROTOCOL` i `FRONT_PORT`.
JeÅ›li FRONT_DOMAIN nie jest ustawiona, adres URL frontend ustawi siÄ™ w `SERVER_URL`.

### v0.32.0 do v0.33.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.33.0

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

Polecenie `yarn command:prod cache:flush` oprÃ³Å¼ni pamiÄ™Ä‡ podrÄ™cznÄ… Redis.
Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.33` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

PoczÄ…wszy od tej wersji, obraz twenty-postgres dla DB staÅ‚ siÄ™ przestarzaÅ‚y, a zamiast niego uÅ¼ywany jest twenty-postgres-spilo.
JeÅ›li chcesz nadal uÅ¼ywaÄ‡ obrazu twenty-postgres, po prostu zamieÅ„ `twentycrm/twenty-postgres:${TAG}` na `twentycrm/twenty-postgres` w docker-compose.yml.

### v0.31.0 do v0.32.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.32.0

**Migracja schematu i danych**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.32` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

**Zmienna Å›rodowiskowa**

ZaktualizowaliÅ›my sposÃ³b obsÅ‚ugi poÅ‚Ä…czeÅ„ Redis.

- UsuniÄ™te: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Dodane: `REDIS_URL`

Zaktualizuj swÃ³j plik `.env`, aby uÅ¼ywaÄ‡ nowej zmiennej `REDIS_URL` zamiast indywidualnych parametrÃ³w poÅ‚Ä…czenia Redis.

We have also simplified the way we handle the JWT tokens.

- UsuniÄ™te: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Dodane: `APP_SECRET`

Update your `.env` file to use the new `APP_SECRET` variable instead of the individual tokens secrets (you can use the same secret as before or generate a new random string)

**PowiÄ…zane Konto**

If you are using connected account to synchronize your Google emails and calendars, you will need to activate the [People API](https://developers.google.com/people) on your Google Admin console.

### v0.30.0 do v0.31.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.31.0

**Migracja schematu i danych:**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.31` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

### v0.24.0 do v0.30.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.30.0

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. ZaktualizowaliÅ›my nasz [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml), aby to odzwierciedlaÄ‡.
Upewnij siÄ™, Å¼e zaktualizowaÅ‚eÅ› swojÄ… konfiguracjÄ™ i Å¼e zaktualizowaÅ‚eÅ› swoje zmienne Å›rodowiskowe odpowiednio:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Migracja schematu i danych:**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.30` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

### v0.23.0 do v0.24.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.24.0

Uruchom nastÄ™pujÄ…ce polecenia:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

Polecenie `yarn database:migrate:prod` zastosuje migracje w strukturze bazy danych (schematy core i meta danych)
Polecenie `yarn command:prod upgrade-0.24` zajmuje siÄ™ migracjÄ… danych wszystkich przestrzeni roboczych.

### v0.22.0 do v0.23.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.23.0

Uruchom nastÄ™pujÄ…ce polecenia:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

Polecenie `yarn database:migrate:prod` zastosuje migracje do Bazy danych.
Polecenie `yarn command:prod upgrade-0.23` zajmuje siÄ™ migracjÄ… danych, w tym przenoszeniem dziaÅ‚aÅ„ do zadaÅ„/ notatek.

### v0.21.0 do v0.22.0

Zaktualizuj instancjÄ™ Twenty, aby uÅ¼ywaÄ‡ obrazu v0.22.0

Uruchom nastÄ™pujÄ…ce polecenia:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

Polecenie `yarn database:migrate:prod` zastosuje migracje do Bazy danych.
Polecenie `yarn command:prod workspace:sync-metadata -f` zsynchronizuje definicjÄ™ standardowych obiektÃ³w z tabelami metadanych i zastosuje wymagane migracje do istniejÄ…cych obszarÃ³w roboczych.
The `yarn command:prod upgrade-0.22` command will apply specific data transformations to adapt to the new object defaultRequestInstrumentationOptions.




