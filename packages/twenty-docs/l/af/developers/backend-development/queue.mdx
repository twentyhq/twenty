---
title: Message Queue
image: /images/user-guide/emails/emails_header.png
---

<Frame>
  <img src="/images/user-guide/emails/emails_header.png" alt="Header" />
</Frame>

Wagrye fasiliteer asinkroniese bedrywighede om uitgevoer te word. Dit kan gebruik word vir die uitvoer van agtergrondaktiwiteite soos die stuur van 'n verwelkomings-e-pos by registrasie.
Elke gebruiksgeval sal sy eie wagry-klas hÃª wat uitgebrei is vanaf `MessageQueueServiceBase`.

Tans ondersteun ons slegs `bull-mq`[bull-mq](https://bullmq.io/) as die wagry drywer.

## Stappe om 'n nuwe wagry te skep en te gebruik

1. Voeg 'n wagry-naam vir jou nuwe wagry by onder die enum `MESSAGE_QUEUES`.
2. Verskaf die fabriekimplementering van die wagry met die wagry-naam as die afhanklikheid-token.
3. Spuit die wagry wat jy geskep het, in die vereiste module/diens in met die wagry-naam as die afhanklikheid-token.
4. Voeg werknemerklas by met token-gebaseerde inspuiting net soos produsent.

### Voorbeeld gebruik

```ts
class Resolver {
  constructor(@Inject(MESSAGE_QUEUES.custom) private queue: MessageQueueService) {}

  async onSomeAction() {
    //business logic
    await this.queue.add(someData);
  }
}

//async worker
class CustomWorker {
  constructor(@Inject(MESSAGE_QUEUES.custom) private queue: MessageQueueService) {
    this.initWorker();
  }

  async initWorker() {
    await this.queue.work(async ({ id, data }) => {
      //worker logic
    });
  }
}
```

