---
title: Upgrade guide
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Algemene riglyne

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

As jy Docker Compose gebruik het, volg hierdie stappe:

1. In 'n terminal op die gasheer waar Twenty loop, skakel Twenty af met: `docker compose down`

2. Opgradeer die weergawe deur die `TAG`-waarde in die .env-lÃªer naby jou docker-compose te verander. (Ons beveel aan dat jy `major.minor` weergawes gebruik soos `v0.53`)

3. Bring Twenty weer aanlyn met `docker compose up -d`

As jy jou instansie met 'n paar weergawes wil opgradeer, bv. van v0.33.0 tot v0.35.0, moet jy die instansie stapsgewys opgradeer, in hierdie voorbeeld van v0.33.0 tot v0.34.0, dan van v0.34.0 tot v0.35.0.

**Maak seker dat jy na elke opgraderde weergawe 'n onbeskadigde rugsteun het.**

## Weergawe-spesifieke opgraderingsstappe

## v1.0

Hallo Twenty v1.0! ðŸŽ‰

## v0.60

### Prestasieverbeterings

Alle interaksies met die metadata API is geoptimaliseer vir beter prestasie, veral vir objek-metadata manipulasie en werksgebied skepping operasies.

Ons het ons kasstrategie herstruktureer om kas treffers bo databasissequeries te prioritiseer waar moontlik, wat die prestasie van metadata API-operasies aansienlik verbeter.

As jy na opgradering enige looptydfoute ervaar, moet jy dalk jou kas spoel om te verseker dat dit gesinkroniseer is met die nuutste veranderinge. Voer hierdie opdrag in jou twenty-dienshouer uit:

```bash
yarn command:prod cache:flush
```

### v0.55

Opgradeer jou Twenty-instansie om die v0.55 prent te gebruik.

Jy hoef nie langer enige opdragte te voer nie, die nuwe prent sal outomaties sorg vir die loop van alle vereiste migrasies.

### `Gebruiker het nie toestemming`-fout

As jy magtigingsfoute op die meeste versoeke ervaar nÃ¡ opgradering, moet jy dalk jou kas spoel om die nuutste toestemmings te hersien.

In jou `twenty-diens` houer, voer uit:

```bash
yarn command:prod cache:flush
```

Hierdie kwessie is spesifiek vir hierdie Twenty-weergawe en moet nie benodig word vir toekomstige opgraderings nie.

### v0.54

Sedert weergawe `0.53`, geen manuele aksies meer nodig nie.

#### Afskaling van metadata-skema

Ons het die `metadata`-skema saamgevoeg met die `core` om dataherwinning van `TypeORM` te vereenvoudig.
Ons het die `migrate` opdrag stap binne-in die `upgrade` opdrag geÃ¯ntegreer. Ons beveel nie aan om `migrate` handmatig binne enige van jou diens/werknemer houers te loop nie.

### Sedert v0.53

Vanaf `0.53` word opgraderings programmaties binne die `DockerFile` gedoen, dit beteken van nou af, jy hoef nie meer enige opdrag handmatig uit te voer nie.

Maak seker om jou instansie stapsgewys op te gradeer, sonder om enige groot weergawe oor te slaan (bv. `0.43.3` na `0.44.0` is toegelaat, maar `0.43.1` na `0.45.0` is nie), anders kan dit lei tot werksgebied-weergawe-desinchronisasie wat looptydfoute en ontbrekende funksionaliteit kan veroorsaak.

Om te kontroleer of 'n werksgebied korrek gemigreer is, kan jy sy weergawe in die databasis in die `core.workspace` tafel hersien.

Dit moet altyd in die reeks van jou huidige Twenty-instansie `major.minor` weergawe wees, jy kan jou instansie-weergawe in die admin-paneel sien (by `/settings/admin-panel`, toeganklik as jou gebruiker die `canAccessFullAdminPanel` eienskap gestel het op waar in die databasis) of deur `echo $APP_VERSION` in jou `twenty-diens`-houer uit te voer.

Om 'n desinchroniseerde werksgebied-weergawe reg te stel, sal jy van die ooreenstemmende Twenty-weergawe aflaiend moet opgradeer volgens verwante opgraderingsgids stapsgewys en verder totdat dit die gewenste weergawe bereik.

#### Verwydering van `auditLog`

Ons het die `auditLog` standaard objek verwyder, wat beteken dat jou rugsteun grootte aansienlik verminder kan word na hierdie migrasie.

### v0.51 tot v0.52

Opgradeer jou Twenty-instansie om die v0.52 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Ek het 'n werksgebied wat geblokkeer is tussen weergawe `0.52.0` en `0.52.6`

Ongelukkig is `0.52.0` en `0.52.6` heeltemal van dockerHub verwyder.
Jy sal jou werksgebied weergawe handmatig moet opdateer na `0.51.0` in die databasis en dan met Twenty weergawe `0.52.11` verstel, deur sy net bokant opgraderingsgids te volg.

### v0.50 tot v0.51

Opgradeer jou Twenty-instansie om die v0.51 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 tot v0.50.0

Opgradeer jou Twenty-instansie om die v0.50.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml mutasie

Hierdie weergawe sluit 'n `docker-compose.yml` mutasie in om die `werknemer` diens toegang tot die `draagbare-lokale-data` volume te gee.
Werk asseblief jou plaaslike `docker-compose.yml` op met [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 tot v0.44.0

Opgradeer jou Twenty-instansie om die v0.44.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 tot v0.43.0

Opgradeer jou Twenty-instansie om die v0.43.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade
```

In hierdie weergawe het ons ook na postgres:16 beeld in docker-compose.yml oorgeskakel.

#### (Opsie 1) Databasismigrasie

Om die bestaande postgres-spilo prent te behou is heeltemal reg, maar jy sal die weergawe in jou docker-compose.yml moet vries na 0.43.0.

#### (Opsie 2) Databasismigrasie

As jy jou databasis na die nuwe postgres:16 beeld wil migreer, volg asseblief hierdie stappe:

1. Laaai jou databasis uit die ou postgres-spilo houer

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Maak seker dat jou dump-lÃªer nie leeg is nie.

2. Opgradeer jou docker-compose.yml om die postgres:16 beeld te gebruik soos in die [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) lÃªer.

3. Herstel die databasis na die nuwe postgres:16 houer

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 tot v0.42.0

Opgradeer jou Twenty-instansie om die v0.42.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Omgewingsveranderlikes**

- Verwyder: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Bygevoeg: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 tot v0.41.0

Opgradeer jou Twenty-instansie om die v0.41.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Omgewingsveranderlikes**

- Verwyder: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 tot v0.40.0

Opgradeer jou Twenty-instansie om die v0.40.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Omgewingsveranderlikes**

- Added: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 tot v0.35.0

Opgradeer jou Twenty-instansie om die v0.35.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.35` neem sorg van die datamigrasie van alle werksruimtes.

**Omgewingsveranderlikes**

- Ons het `ENABLE_DB_MIGRATIONS` vervang met `DISABLE_DB_MIGRATIONS` (standaardwaarde is nou `vals`, jy hoef waarskynlik niks te stel nie)

### v0.33.0 tot v0.34.0

Opgradeer jou Twenty-instansie om die v0.34.0 beeld te gebruik.

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.34` neem sorg van die datamigrasie van alle werksruimtes.

**Omgewingsveranderlikes**

- Verwyder: `FRONT_BASE_URL`
- Bygevoeg: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Ons het die manier waarop ons die voorkant URL hanteer, opgedateer.
Jy kan nou die voorkant URL instel deur die `FRONT_DOMAIN`, `FRONT_PROTOCOL` en `FRONT_PORT` veranderlikes te gebruik.
As `FRONT_DOMAIN` nie gestel is nie, sal die voorkant URL terugval na `SERVER_URL`.

### v0.32.0 tot v0.33.0

Opgradeer jou Twenty-instansie om die v0.33.0 beeld te gebruik.

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

Die opdrag `yarn command:prod cache:flush` sal die Redis kas spoel.
Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.33` neem sorg van die datamigrasie van alle werksruimtes.

Starting from this version, twenty-postgres image for DB became deprecated and twenty-postgres-spilo is used instead.
If you want to keep using twenty-postgres image, simply replace `twentycrm/twenty-postgres:${TAG}` with `twentycrm/twenty-postgres` in docker-compose.yml.

### v0.31.0 tot v0.32.0

Opgradeer jou Twenty-instansie om die v0.32.0 beeld te gebruik.

**Skema en datamigrasie**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.32` neem sorg van die datamigrasie van alle werksruimtes.

**Omgewingsveranderlikes**

Ons het die manier waarop ons die Redis-verbinding hanteer, opgedateer.

- Verwyder: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Bygevoeg: `REDIS_URL`

Werk jou `.env`-lÃªer op om die nuwe `REDIS_URL` veranderlike te gebruik in plaas van die individuele Redis-verbindingparameters.

Ons het ook die manier waarop ons die JWT-tekens hanteer, vereenvoudig.

- Verwyder: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Bygevoeg: `APP_SECRET`

Werk jou `.env`-lÃªer op om die nuwe `APP_SECRET` veranderlike te gebruik in plaas van die individuele tekens geheime (jy kan dieselfde geheim as voorheen gebruik of 'n nuwe ewekansige string genereer)

**Verbonde Rekening**

If you are using connected account to synchronize your Google emails and calendars, you will need to activate the [People API](https://developers.google.com/people) on your Google Admin console.

### v0.30.0 tot v0.31.0

Opgradeer jou Twenty-instansie om die v0.31.0 beeld te gebruik.

**Skema en datamigrasie**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.31` neem sorg van die datamigrasie van alle werksruimtes.

### v0.24.0 tot v0.30.0

Opgradeer jou Twenty-instansie om die v0.30.0 beeld te gebruik.

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Ons het ons [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) opgedateer om dit te reflekteer.
Maak seker dat jy jou konfigurasie opdateer en jou omgewing veranderlikes dienooreenkomstig bywerk:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Skema en datamigrasie**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.30` neem sorg van die datamigrasie van alle werksruimtes.

### v0.23.0 tot v0.24.0

Opgradeer jou Twenty-instansie om die v0.24.0 beeld te gebruik.

Voer die volgende opdragte uit:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die databasisstruktuur (kern en metadata schemas)
Die `yarn command:prod upgrade-0.24` neem sorg van die datamigrasie van alle werksruimtes.

### v0.22.0 tot v0.23.0

Opgradeer jou Twenty-instansie om die v0.23.0 beeld te gebruik.

Voer die volgende opdragte uit:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

Die `yarn database:migrate:prod` bevel sal die migrasies toepas op die Databasis.
Die `yarn command:prod upgrade-0.23` neem sorg van die datamigrasie, insluitend die oordrag van aktiwiteite na take/nota's.

### v0.21.0 tot v0.22.0

Opgradeer jou Twenty-instansie om die v0.22.0 beeld te gebruik.

Voer die volgende opdragte uit:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

Die `yarn database:migrate:prod` opdrag sal die migrasies toepas op die Databasis.
Die `yarn command:prod workspace:sync-metadata -f` bevel sal die definisie van standaard objekte na die metadata tabelle sinkroniseer en die vereiste migrasies op bestaande werkruimtes toepas.
Die `yarn command:prod upgrade-0.22` bevel sal spesifieke datatransformasies toepas om aan te pas by die nuwe objek defaultRequestInstrumentationOptions.




