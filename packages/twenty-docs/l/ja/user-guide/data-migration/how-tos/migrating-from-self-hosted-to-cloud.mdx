---
title: セルフホストからクラウドへの移行
description: Twenty のセルフホストのインスタンスを Twenty Cloud に移行するためのステップバイステップガイド。
---

## 概要

このガイドでは、Twenty のセルフホストのインスタンスから Twenty Cloud へデータを移行する手順を説明します。 クラウドのワークスペースをセットアップし、データをエクスポートしてから再インポートする流れです。

<Note>移行後、ビュー、ワークフロー、役割は手動で再作成する必要があります。 この構成作業のための時間を確保してください。</Note>

## ステップ 1: クラウドワークスペースを作成する

1. [app.twenty.com](https://app.twenty.com) にアクセスし、新しいワークスペースを作成します
2. 初期セットアップウィザードを完了します
3. 新しいワークスペースの URL を控えておきます

## ステップ 2: データモデルを再作成する

データをインポートする前に、カスタムオブジェクトとフィールドを再作成してください:

1. クラウドのインスタンスで **設定 → データモデル** に移動します
2. セルフホスト環境の設定に一致するカスタムオブジェクトを作成します
3. 標準オブジェクトおよびカスタムオブジェクトにカスタムフィールドを追加します
4. フィールドの設定（一意、必須など）を行います

<Note>参照用にセルフホスト環境のデータモデルのスクリーンショットを撮るか、両方のインスタンスを並べて開いたままにしておきましょう。</Note>

## ステップ 3: すべてのユーザーを招待する

<Warning>
  **重要: データをインポートする前にユーザーを招待してください。**

  ユーザーを参照するレコード（例: Account Owner フィールド）をインポートする前に、ユーザーは招待を受諾している必要があります。 ユーザーがまだ存在しない場合、それらのリレーションはマッピングできません。
</Warning>

1. クラウドのインスタンスで **設定 → メンバー** に移動します
2. セルフホストでアカウントを持っていたチームメンバー全員を招待します
3. **全員が招待を受諾するのを待ちます**
4. メンバー一覧にすべてのユーザーが表示されていることを確認します

## ステップ 4: セルフホストからデータをエクスポートする

セルフホストのインスタンスから各オブジェクトをエクスポートします:

1. 各オブジェクト（会社、連絡先、商談など）に移動します
2. 移行したい**すべての列**が表示されるようにビューを設定します
3. **⋮ → Export view** をクリックします
4. 各 CSV ファイルをわかりやすい名前で保存します（例: `companies-export.csv`）

インポート時の参照のため、**この順序でエクスポート**してください:

1. 会社
2. 人物
3. 商談
4. カスタムオブジェクト（依存関係に従って）
5. タスク、メモ

## ステップ 5: ワークスペースのメンバー参照を更新する

エクスポートした CSV には、セルフホストのインスタンスのユーザー ID が含まれています。 これらの ID はクラウドのインスタンスと一致しないため、メールアドレスに置き換える必要があります。

**ユーザー参照（Owner、Assignee など）がある各 CSV ファイルについて:**

1. CSV をスプレッドシートアプリで開きます
2. 各ユーザー ID 列の隣に新しい列を追加します（例: `accountOwnerId` の隣に `accountOwnerEmail`）
3. 各ユーザーの**メールアドレス**を入力します
4. 古い ID 列は削除しても残しても構いません（インポート時にスキップされます）

**例:**

以前:

```csv
name,domain,accountOwnerId
Acme Corp,https://acme.com,old-uuid-123
```

以降:

```csv
name,domain,accountOwnerEmail
Acme Corp,https://acme.com,john@yourcompany.com
```

<Note>クラウドのワークスペース招待を受諾した際にユーザーが使用したものと同じメールアドレスを使用してください。</Note>

## ステップ 6: インポート順序を計画する

リレーションを維持するため、正しい順序でファイルをインポートします:

1. 最初に**会社**（依存関係なし）
2. 次に**連絡先**（会社にリンク）
3. 3 番目に**商談**（会社および連絡先にリンク）
4. **カスタムオブジェクト**（依存関係に従って）
5. 最後に**タスクとメモ**（他のレコードにリンク）

リレーションの維持方法の詳細は、[リレーションをインポートする方法](/l/ja/user-guide/data-migration/how-tos/import-relations-between-objects-via-csv) を参照してください。

## ステップ 7: クラウドにインポートする

各 CSV ファイルについて、順番に実行します:

1. クラウドのインスタンスで対象のオブジェクトに移動します
2. **⋮ → Import records** をクリックします
3. CSV ファイルをアップロードします
4. 列をフィールドにマッピングします:
   * ユーザーのメールアドレス列を適切なリレーションフィールドにマッピングします
   * その他の列は通常どおりマッピングします
5. エラーを確認して修正します
6. インポートを確認します
7. 次のファイルに進む前に、いくつかのレコードを確認します

## ステップ 8: 設定を再作成する

データのインポート後、次の項目を手動で再作成します:

### ビュー

* フィルター、並べ替え、列の構成を含む保存済みビューを再作成します
* カンバンビューやカレンダービューを設定します

### ワークフロー

* **設定 → ワークフロー** で自動化を再作成します
* 運用に入れる前に各ワークフローをテストします

### 役割と権限

* **設定 → 役割** で役割を設定します
* ユーザーに適切な役割を割り当てます

### 統合

* 各ユーザーのメールおよびカレンダーの同期を再接続します
* 新しい API キーで各種 API 連携を再設定します

## ポスト移行チェックリスト

<Check>すべてのデータが正常にインポートされている</Check>
<Check>オブジェクト間のリレーションが正しく機能している</Check>
<Check>ユーザーの割り当て（Owner、Assignee）が正しくマッピングされている</Check>
<Check>ビューを再作成済み</Check>
<Check>ワークフローを再作成し、テスト済み</Check>
<Check>役割と権限を構成済み</Check>
<Check>メール/カレンダーの同期を再接続済み</Check>
<Check>API 連携を新しいキーで更新済み</Check>

## FAQ

<AccordionGroup>
  <Accordion title="ワークフローを自動的に移行できますか？">
    現時点ではできません。 ワークフローはクラウドのインスタンスで手動で再作成する必要があります。
  </Accordion>

  <Accordion title="ファイルの添付や画像はどうなりますか？">
    CSV のエクスポートにはファイルの添付は含まれません。 添付ファイルは手動で再アップロードするか、API で移行するか、大規模な移行については弊社チームにご連絡ください。
  </Accordion>

  <Accordion title="移行中に両方のインスタンスを稼働させておけますか？">
    はい、クラウドへの移行が完了したことを確認するまでは、セルフホストのインスタンスを稼働させておくことを推奨します。 ただし、両方の環境で新しいデータを作成しないようご注意ください。
  </Accordion>

  <Accordion title="ユーザーがまだ招待を受諾していない場合はどうなりますか？">
    そのユーザーを参照するレコードはインポートに失敗するか、リレーションが空になります。 データをインポートする前に、すべてのユーザーが招待を受諾していることを確認してください。
  </Accordion>
</AccordionGroup>

## ヘルプが必要ですか?

複雑な移行や大規模なデータセットについては、[contact@twenty.com](mailto:contact@twenty.com) までご連絡いただくか、[導入支援サービス](/l/ja/user-guide/getting-started/capabilities/implementation-services)をご覧ください。
