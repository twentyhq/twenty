---
title: Depanare
---

## Depanare

Dac캒 칥nt칙mpina탵i orice problem캒 칥n timp ce configura탵i mediul pentru dezvoltare, actualiza탵i instan탵a dvs. sau g캒zdui탵i pe cont propriu,
iat캒 c칙teva solu탵ii la problemele comune.

### G캒zduire proprie

#### Prima instalare rezult캒 칥n `autentificare parola e탳uat캒 pentru utilizatorul "postgres"`

游뚿 **IMPORTANT: Aceast캒 solu탵ie este DOAR pentru instal캒rile noi** 游뚿
Dac캒 ave탵i deja o instan탵캒 Twenty cu date de produc탵ie, **NU** urma탵i ace탳ti pa탳i deoarece vor 탳terge permanent baza dvs. de date!

칉n timp ce instala탵i Twenty pentru prima dat캒, este posibil s캒 dori탵i s캒 schimba탵i parola implicit캒 a bazei de date.
Parola pe care o seta탵i 칥n timpul primei instal캒ri devine stocat캒 permanent 칥n volumul bazei de date. Dac캒 mai t칙rziu 칥ncerca탵i s캒 schimba탵i aceast캒 parol캒 칥n configura탵ia dvs. f캒r캒 a elimina vechiul volum, ve탵i ob탵ine erori de autentificare deoarece baza de date folose탳te 칥nc캒 parola original캒.

丘멆잺 AVERTIZARE: Urm캒torii pa탳i vor 탲TERGE PERMANENT toate datele din baza de date! 丘멆잺
Continua탵i doar dac캒 aceasta este o instalare recent캒 f캒r캒 date importante.

Pentru a actualiza `PG_DATABASE_PASSWORD` trebuie s캒:

```sh
# Actualiza탵i PG_DATABASE_PASSWORD 칥n .env
docker compose down --volumes
docker compose up -d
```

#### CR line breaks found [Windows]

Acest lucru se datoreaz캒 caracterelor de pauz캒 de linie ale Windows 탳i configura탵iei git. 칉ncerca탵i s캒 rula탵i:

```
git config --global core.autocrlf false
```

Apoi 탳terge탵i depozitul 탳i clona탵i-l din nou.

#### Schema de metadate lips캒

칉n timpul instal캒rii Twenty, trebuie s캒 aproviziona탵i baza de date postgres cu schemele, extensiile 탳i utilizatorii corec탵i.
Dac캒 reu탳i탵i s캒 executa탵i aceast캒 aprovizionare, ar trebui s캒 ave탵i schemele `default` 탳i `metadata` 칥n baza dvs. de date.
Dac캒 nu, asigura탵i-v캒 c캒 nu ave탵i mai mult de o instan탵캒 postgres func탵ion칙nd pe computerul dvs.

#### Nu se poate g캒si modulul 'twenty-emails' sau declara탵iile de tip corespunz캒toare.

Trebuie s캒 construi탵i pachetul `twenty-emails` 칥nainte de a rula ini탵ializarea bazei de date cu `npx nx run twenty-emails:build`

#### Pachetul twenty-x lips캒

Asigura탵i-v캒 c캒 rula탵i yarn 칥n directorul r캒d캒cin캒 탳i apoi rula탵i `npx nx server:dev twenty-server`. Dac캒 acest lucru nu func탵ioneaz캒, 칥ncerca탵i s캒 construi탵i manual pachetul lips캒.

#### Lint la salvare nu func탵ioneaz캒

Acesta ar trebui s캒 func탵ioneze implicit cu extensia eslint instalat캒. Dac캒 acest lucru nu func탵ioneaz캒, 칥ncerca탵i s캒 ad캒uga탵i acest lucru la setarea vscode (칥n sfera containerului dev):

```
"editor.codeActionsOnSave": {

  "source.fixAll.eslint": "explicit"

}
```

#### 칉n timpul rul캒rii `npx nx start` sau `npx nx start twenty-front`, apare o eroare Out of memory

칉n `packages/twenty-front/.env` decomenta탵i `VITE_DISABLE_TYPESCRIPT_CHECKER=true` 탳i `VITE_DISABLE_ESLINT_CHECKER=true` pentru a dezactiva verific캒rile de fundal, astfel reduc칙nd cantitatea de RAM necesar캒.

**If it does not work:**
Run only the services you need, instead of `npx nx start`. De exemplu, dac캒 lucra탵i la server, rula탵i doar `npx nx worker twenty-server`

**If it does not work:**
If you tried to run only `npx nx run twenty-server:start` on WSL and it's failing with the below memory error:

`EROARE FATAL캑: Mark-compacts ineficiente l칙ng캒 limita heap-ului Alocarea a e탳uat - JavaScript heap out of memory`

Solu탵ia este s캒 executa탵i comanda de mai jos 칥n terminal sau s캒 o ad캒uga탵i 칥n profilul .bashrc pentru a se seta automat:

`export NODE_OPTIONS="--max-old-space-size=8192"`

Flag-ul --max-old-space-size=8192 seteaz캒 o limit캒 superioar캒 de 8 GB pentru heap-ul Node.js; utilizarea se adapteaz캒 la cerin탵ele aplica탵iei.
Referin탵캒: https://stackoverflow.com/questions/56982005/where-do-i-set-node-options-max-old-space-size-2048

**If it does not work:**
Investigate which processes are taking you most of your machine RAM. La Twenty, am observat c캒 unele extensii VScode consumau mult캒 RAM, a탳a c캒 le dezactiv캒m temporar.

**If it does not work:**
Restart your machine helps to clean up ghost processes.

#### 칉n timp ce rula탵i `npx nx start` apar [0] 탳i [1] ciudate 칥n jurnale

Acest lucru este de a탳teptat deoarece comanda `npx nx start` ruleaz캒 mai multe comenzi 칥n fundal

#### Nu sunt trimise e-mailuri

De cele mai multe ori, este deoarece `worker` nu ruleaz캒 칥n fundal. 칉ncerca탵i s캒 rula탵i

```
npx nx worker twenty-server
```

#### Nu pot conecta contul meu Microsoft 365

De cele mai multe ori, este deoarece administratorul dvs. nu a activat licen탵a Microsoft 365 pentru contul dvs. Verifica탵i [https://admin.microsoft.com/](https://admin.microsoft.com/Adminportal/Home).

Dac캒 ave탵i un cod de eroare `AADSTS50020`, probabil 칥nseamn캒 c캒 utiliza탵i un cont personal Microsoft. Aceasta nu este 칥nc캒 suportat캒. Mai multe informa탵ii [aici](https://learn.microsoft.com/fr-fr/troubleshoot/entra/entra-id/app-integration/error-code-aadsts50020-user-account-identity-provider-does-not-exist)

#### 칉n timp ce ruleaz캒 `yarn` apar avertismente 칥n consol캒

Avertismentele inform캒 despre tragerea de dependen탵e suplimentare care nu sunt specificate explicit 칥n `package.json`, a탳a c캒 at칙ta timp c칙t nu apare o eroare de 칥ntrerupere, totul ar trebui s캒 func탵ioneze conform a탳tept캒rilor.

#### C칙nd utilizatorul acceseaz캒 pagina de autentificare, apare o eroare despre utilizatorul neautorizat care 칥ncearc캒 s캒 acceseze spa탵iul de lucru 칥n jurnale

Acest lucru este a탳teptat deoarece utilizatorul este neautorizat c칙nd este deconectat, deoarece identitatea sa nu este verificat캒.

#### Cum s캒 verifica탵i dac캒 worker-ul dvs. ruleaz캒?

* Accesa탵i [webhook-test.com](https://webhook-test.com/) 탳i copia탵i **Your Unique Webhook URL**.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-test.jpg" alt="Webhook test" />
</div>

* Deschide탵i aplica탵ia Twenty, naviga탵i la `/settings` 탳i activa탵i comutatorul **Avansat** 칥n col탵ul din st칙nga jos al ecranului.
* Crea탵i un nou webhook.
* Lipi탵i **Your Unique Webhook URL** 칥n c칙mpul **Endpoint Url** din Twenty. Seta탵i **Filtrele** pe `Companii` 탳i `Create`.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-settings.jpg" alt="Set캒ri webhook" />
</div>

* Accesa탵i `/objects/companies` 탳i crea탵i un nou registru de companie.
* 칉ntoarce탵i-v캒 la [webhook-test.com](https://webhook-test.com/) 탳i verifica탵i dac캒 a fost primit un nou **POST request**.

<div style={{textAlign: 'center'}}>
  <img src="/images/docs/developers/self-hosting/webhook-test-result.jpg" alt="Rezultatul testului webhook" />
</div>

* Dac캒 este primit un **POST request**, worker-ul dvs. ruleaz캒 cu succes. 칉n caz contrar, trebuie s캒 depana탵i worker-ul dvs.

#### Front-end-ul nu porne탳te 탳i returneaz캒 eroarea TS5042: Op탵iunea 'project' nu poate fi amestecat캒 cu fi탳iere surs캒 pe linia de comand캒

Comment out checker plugin in `packages/twenty-ui/vite-config.ts` like in example below

```
plugins: [
      react({ jsxImportSource: '@emotion/react' }),
      tsconfigPaths(),
      svgr(),
      dts(dtsConfig),
      // checker(checkersConfig),
      wyw({
        include: [
          '**/OverflowingTextWithTooltip.tsx',
          '**/Chip.tsx',
          '**/Tag.tsx',
          '**/Avatar.tsx',
          '**/AvatarChip.tsx',
        ],
        babelOptions: {
          presets: ['@babel/preset-typescript', '@babel/preset-react'],
        },
      }),
    ],
```

#### Panoul de administrare nu este accesibil

Rula탵i `UPDATE core."user" SET "canAccessFullAdminPanel" = TRUE WHERE email = 'tine@domeniult캒u.com';` 칥n containerul de baze de date pentru a ob탵ine acces la panoul de administrare.

### Docker compose cu un singur click

#### Nu se poate conecta

Dac캒 nu v캒 pute탵i conecta dup캒 configurare:

1. Rula탵i urm캒toarele comenzi:
   ```bash
   docker exec -it twenty-server-1 yarn
   docker exec -it twenty-server-1 npx nx database:reset  --configuration=no-seed
   ```
2. Reporni탵i containerele Docker:
   ```bash
   docker compose down
   docker compose up -d
   ```

Re탵ine탵i c캒 comenzile database:reset vor 탳terge complet baza dvs. de date 탳i o vor recrea de la zero.

#### Probleme de conexiune 칥n spatele unui proxy invers

Dac캒 rula탵i Twenty 칥n spatele unui proxy invers 탳i 칥nt칙mpina탵i probleme de conexiune:

1. **Verifica탵i SERVER_URL:**

   Asigura탵i-v캒 c캒 `SERVER_URL` din fi탳ierul dvs. `.env` corespunde cu URL-ul dvs. de acces extern, inclusiv `https` dac캒 SSL este activat.

2. **Verifica탵i Set캒rile Proxy-ului Invers:**

   * Confirma탵i c캒 proxy-ul invers transmite corect cererile c캒tre serverul Twenty.
   * Asigura탵i-v캒 c캒 headerele precum `X-Forwarded-For` 탳i `X-Forwarded-Proto` sunt setate corect.

3. **Reporni탵i Serviciile:**

   Dup캒 ce face탵i schimb캒ri, reporni탵i at칙t proxy-ul invers, c칙t 탳i containerele Twenty.

#### Eroare la 칥nc캒rcarea unei imagini - permisiune refuzat캒

Schimbarea propriet캒탵ii folderului de date pe gazd캒 de la root la un alt utilizator 탳i grup rezolv캒 aceast캒 problem캒.

## Ob탵inerea de ajutor

Dac캒 칥nt칙mpina탵i probleme care nu sunt acoperite 칥n acest ghid:

* Verifica탵i jurnalele:

  Vizualiza탵i jurnalele containerului pentru mesaje de eroare:

  ```bash
  docker compose logs
  ```

* Suport Comunitar:

  Contacta탵i [comunitatea Twenty](https://github.com/twentyhq/twenty/issues) sau [canalele de suport](https://discord.gg/cx5n4Jzs57) pentru asisten탵캒.
