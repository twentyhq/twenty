---
title: Uppgraderingsguide
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Allm칛nna riktlinjer

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Om du anv칛nde Docker Compose, f칬lj dessa steg:

1. I en terminal, p친 v칛rden d칛r Twenty k칬rs, st칛ng av Twenty: `docker compose down`

2. Uppgradera versionen genom att 칛ndra `TAG`-v칛rdet i .env-filen n칛ra din docker-compose. (Vi rekommenderar att anv칛nda `major.minor` version som `v0.53`)

3. S칛tt ig친ng Twenty igen med `docker compose up -d`

Om du vill uppgradera din instans med n친gra versioner, t.ex. fr친n v0.33.0 till v0.35.0, m친ste du uppgradera din instans sekventiellt, i det h칛r exemplet fr친n v0.33.0 till v0.34.0, sedan fr친n v0.34.0 till v0.35.0.

**Se till att efter varje uppgraderad version har du en icke-korrupt s칛kerhetskopia.**

## Versionsspecifika uppgraderingssteg

## v1.0

Hej Twenty v1.0! 游꿀

## v0.60

### Prestandaf칬rb칛ttringar

Alla interaktioner med metadata-API:t har optimerats f칬r b칛ttre prestanda, s칛rskilt f칬r manipulering av objektmetadata och skapande av arbetsytor.

Vi har omstrukturerat v친r cachestrategi f칬r att prioritera cachetr칛ffar 칬ver databasfr친gor n칛r det 칛r m칬jligt, vilket avsev칛rt f칬rb칛ttrar prestanda f칬r metadata-API-operationer.

Om du st칬ter p친 n친gra problem vid k칬rning efter uppgradering kan du beh칬va rensa cachen f칬r att s칛kerst칛lla att den 칛r synkroniserad med de senaste 칛ndringarna. K칬r detta kommando i din twenty-server-container:

```bash
yarn command:prod cache:flush
```

### v0.55

Uppgradera din Twenty-instans till att anv칛nda v0.55-bilden

Du beh칬ver inte l칛ngre k칬ra n친got kommando, den nya bilden tar automatiskt hand om att k칬ra alla n칬dv칛ndiga migrationer.

### `Anv칛ndaren har inte beh칬righet` fel

Om du st칬ter p친 auktoriseringsfel p친 de flesta f칬rfr친gningar efter uppgradering kan du beh칬va rensa din cache f칬r att r칛kna om de senaste beh칬righeterna.

I din `twenty-server`-container, k칬r:

```bash
yarn command:prod cache:flush
```

Detta problem 칛r specifikt f칬r denna Twenty-version och b칬r inte beh칬vas f칬r framtida uppgraderingar.

### v0.54

Sedan version `0.53`, inga manuella 친tg칛rder beh칬vs.

#### Metadata-schema avveckling

Vi har sammanfogat `metadata`-schema till `core` f칬r att f칬renkla datatillg친ng fr친n `TypeORM`.
Vi har sammanfogat `migrate` kommandosteget inom `upgrade` kommandot. Vi rekommenderar inte att k칬ra `migrate` manuellt inom n친gon av dina server-/arbetsbeh친llare.

### Sedan v0.53

Fr친n och med `0.53`, uppgraderingen g칬rs programmeringsm칛ssigt inom `DockerFile`, vilket inneb칛r att du fr친n och med nu inte b칬r beh칬va k칬ra n친got kommando manuellt l칛ngre.

Se till att forts칛tta uppgradera din instans sekventiellt, utan att hoppa 칬ver n친gon st칬rre version (t.ex. `0.43.3` till `0.44.0` 칛r till친tet, men `0.43.1` till `0.45.0` 칛r inte), annars kan det leda till desynkronisering av arbetsytaversionen som kan resultera i k칬rfel och saknad funktionalitet.

F칬r att kontrollera om en arbetsyta har migrerats korrekt kan du granska dess version i databasen i tabellen `core.workspace`.

Det b칬r alltid ligga inom intervallet f칬r din nuvarande Twenty-instans `major.minor` version, du kan se din instansversion i administrat칬rspanelen (p친 `/settings/admin-panel`, 친tkomligt om din anv칛ndare har `canAccessFullAdminPanel` egenskap satt till true i databasen) eller genom att k칬ra `echo $APP_VERSION` i din `twenty-server`-container.

F칬r att 친tg칛rda en osynkroniserad arbetsytaversion m친ste du uppgradera fr친n motsvarande Twentys version genom att f칬lja den relaterade uppgraderingsguiden sekventiellt och s친 vidare tills 칬nskad version uppn친s.

#### `auditLog` borttagning

Vi har tagit bort standardobjektet auditLog, vilket inneb칛r att din s칛kerhetskopiors storlek kan minska avsev칛rt efter denna migration.

### v0.51 till v0.52

Uppgradera din Twenty-instans till att anv칛nda v0.52-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Jag har en arbetsyta blockerad i version mellan `0.52.0` och `0.52.6`

Tyv칛rr har `0.52.0` och `0.52.6` helt tagits bort fr친n dockerHub.
Du m친ste manuellt uppdatera din arbetsytaversion till `0.51.0` i databasen och uppgradera med twenty version `0.52.11` genom att f칬lja den just ovanst친ende uppgraderingsguiden.

### v0.50 till v0.51

Uppgradera din Twenty-instans till att anv칛nda v0.51-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 till v0.50.0

Uppgradera din Twenty-instans till att anv칛nda v0.50.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml mutation

Denna version inkluderar en `docker-compose.yml`-mutation f칬r att ge tj칛nstenen `worker` 친tkomst till volymen `server-local-data`.
V칛nligen uppdatera din lokala `docker-compose.yml` med [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 till v0.44.0

Uppgradera din Twenty-instans till att anv칛nda v0.44.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 till v0.43.0

Uppgradera din Twenty-instans till att anv칛nda v0.43.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade
```

I den h칛r versionen har vi ocks친 bytt till en postgres:16-bild i docker-compose.yml.

#### (Alternativ 1) Datamigrering

Att beh친lla den befintliga postgres-spilo-bilden 칛r okej, men du m친ste frysa versionen i din docker-compose.yml till 0.43.0.

#### (Alternativ 2) Datamigrering

Om du vill migrera din databas till den nya postgres:16-bilden, f칬lj dessa steg:

1. Dumpa din databas fr친n den gamla postgres-spilo-beh친llaren

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Se till att dumpfilen inte 칛r tom.

2. Uppgradera din docker-compose.yml f칬r att anv칛nda postgres:16 bilden som i [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) filen.

3. 칀terst칛ll databasen till den nya postgres:16-beh친llaren

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 till v0.42.0

Uppgradera din Twenty-instans till att anv칛nda v0.42.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Milj칬variabler**

- Borttaget: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Tillagt: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 till v0.41.0

Uppgradera din Twenty-instans till att anv칛nda v0.41.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Milj칬variabler**

- Borttaget: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 till v0.40.0

Uppgradera din Twenty-instans till att anv칛nda v0.40.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Milj칬variabler**

- Tillagt: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 till v0.35.0

Uppgradera din Twenty-instans till att anv칛nda v0.35.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.35` tar hand om datamigreringen av alla arbetsytor.

**Milj칬variabler**

- Vi ersatte `ENABLE_DB_MIGRATIONS` med `DISABLE_DB_MIGRATIONS` (standardv칛rdet 칛r nu `false`, du beh칬ver f칬rmodligen inte st칛lla in n친got)

### v0.33.0 till v0.34.0

Uppgradera din Twenty-instans till att anv칛nda v0.34.0-bilden

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.34` tar hand om datamigreringen av alla arbetsytor.

**Milj칬variabler**

- Borttaget: `FRONT_BASE_URL`
- Tillagt: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Vi har uppdaterat s칛ttet vi hanterar frontend-adressen.
Du kan nu st칛lla in frontend-adressen med hj칛lp av variablerna `FRONT_DOMAIN`, `FRONT_PROTOCOL` och `FRONT_PORT`.
Om FRONT_DOMAIN inte 칛r inst칛llt kommer frontend-adressen att falla tillbaka till `SERVER_URL`.

### v0.32.0 till v0.33.0

Uppgradera din Twenty-instans till att anv칛nda v0.33.0-bilden

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

Kommandot `yarn command:prod cache:flush` kommer att rensa Redis-cachen.
Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.33` tar hand om datamigreringen av alla arbetsytor.

Starting from this version, twenty-postgres image for DB became deprecated and twenty-postgres-spilo is used instead.
If you want to keep using twenty-postgres image, simply replace `twentycrm/twenty-postgres:${TAG}` with `twentycrm/twenty-postgres` in docker-compose.yml.

### v0.31.0 till v0.32.0

Uppgradera din Twenty-instans till att anv칛nda v0.32.0-bilden

**Schema och datamigrering**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.32` tar hand om datamigreringen av alla arbetsytor.

**Milj칬variabler**

Vi har uppdaterat s칛ttet vi hanterar Redis-anslutningen.

- Borttaget: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Tillagt: `REDIS_URL`

Uppdatera din `.env`-fil f칬r att anv칛nda den nya `REDIS_URL`-variabeln ist칛llet f칬r de individuella Redis-anslutningsparametrarna.

Vi har ocks친 f칬renklat s칛ttet vi hanterar JWT-tokens.

- Borttaget: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Tillagt: `APP_SECRET`

Uppdatera din `.env`-fil f칬r att anv칛nda den nya `APP_SECRET`-variabeln ist칛llet f칬r de individuella token-hemligheterna (du kan anv칛nda samma hemlighet som tidigare eller generera en ny slumpm칛ssig str칛ng)

**Anslutet konto**

Om du anv칛nder ett kopplat konto f칬r att synkronisera dina Google-e-postmeddelanden och kalendrar m친ste du aktivera [People API](https://developers.google.com/people) i din Google Admin-konsol.

### v0.30.0 till v0.31.0

Uppgradera din Twenty-instans till att anv칛nda v0.31.0-bilden

**Schema och datamigrering**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.31` tar hand om datamigreringen av alla arbetsytor.

### v0.24.0 till v0.30.0

Uppgradera din Twenty-instans till att anv칛nda v0.30.0-bilden

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Vi har uppdaterat v친r [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) f칬r att 친terspegla detta.
Se till att uppdatera din konfiguration och dina milj칬variabler d칛refter:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Schema och datamigrering**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.30` tar hand om datamigreringen av alla arbetsytor.

### v0.23.0 till v0.24.0

Uppgradera din Twenty-instans till att anv칛nda v0.24.0-bilden

K칬r f칬ljande kommandon:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasstrukturen (k칛rn- och metadatascheman)
Kommandot `yarn command:prod upgrade-0.24` tar hand om datamigreringen av alla arbetsytor.

### v0.22.0 till v0.23.0

Uppgradera din Twenty-instans till att anv칛nda v0.23.0-bilden

K칬r f칬ljande kommandon:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationerna p친 databasen.
Kommandot `yarn command:prod upgrade-0.23` tar hand om datamigreringen, inklusive att 칬verf칬ra aktiviteter till uppgifter/anteckningar.

### v0.21.0 till v0.22.0

Uppgradera din Twenty-instans till att anv칛nda v0.22.0-bilden

K칬r f칬ljande kommandon:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

Kommandot `yarn database:migrate:prod` kommer att till칛mpa migrationer p친 databasen.
Kommandot `yarn command:prod workspace:sync-metadata -f` kommer att synkronisera definitionen av standardobjekt till metadatatabellerna och till칛mpa n칬dv칛ndiga migrationer till befintliga arbetsytor.
Kommandot `yarn command:prod upgrade-0.22` kommer att till칛mpa specifika datatransformationer f칬r att anpassa till den nya objektstandardinst칛llningen defaultRequestInstrumentationOptions.




