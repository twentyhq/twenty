---
title: Opgraderingsvejledning
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## General guidelines

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Hvis du anvendte Docker Compose, f칮lg disse trin:

1. 칀bn en terminal p친 v칝rtsmaskinen, hvor Twenty k칮rer, og sluk for Twenty: `docker compose down`

2. Opgrader versionen ved at 칝ndre `TAG`-v칝rdien i .env-filen t칝t p친 din docker-compose. (Vi anbefaler at bruge major.minor version som f.eks. `v0.53`)

3. Bring Twenty tilbage online med `docker compose up -d`

Hvis du vil opgradere din instans med nogle versioner, f.eks. fra v0.33.0 til v0.35.0, skal du opgradere din instans sekventielt, i dette eksempel fra v0.33.0 til v0.34.0, derefter fra v0.34.0 til v0.35.0.

**S칮rg for, at hver opgraderet version har en ikke-korrupt backup.**

## Version-specifikke opgraderingstrin

## v1.0

Hej Twenty v1.0! 游꿀

## v0.60

### Ydelsesforbedringer

All interactions with the metadata API have been optimized for better performance, particularly for object metadata manipulation and workspace creation operations.

We've refactored our caching strategy to prioritize cache hits over database queries when possible, significantly improving the performance of metadata API operations.

Hvis du st칮der p친 runtime-problemer efter opgradering, kan det v칝re n칮dvendigt at t칮mme din cache for at sikre, at den er synkroniseret med de seneste 칝ndringer. K칮r denne kommando i din twenty-server-konteiner:

```bash
yarn command:prod cache:flush
```

### v0.55

Opgrader din Twenty-instans til at bruge v0.55-billedet

Du beh칮ver ikke l칝ngere at k칮re nogen kommando, det nye billede vil automatisk tage sig af at k칮re alle n칮dvendige migrationer.

### `User does not have permission` fejl

If you encounter authorization errors on most requests after upgrading, you may need to flush your cache to recompute the latest permissions.

In your `twenty-server` container, run:

```bash
yarn command:prod cache:flush
```

Dette problem er specifikt for denne Twenty-version og b칮r ikke v칝re n칮dvendigt for fremtidige opgraderinger.

### v0.54

Siden version `0.53`, er ingen manuelle handlinger n칮dvendige.

#### Metadata schema deprecation

Vi har flettet `metadata` skemaet ind i `core` for at forenkle dataindhentning fra `TypeORM`.
Vi har flettet `migrate`-kommandoen ind i `upgrade`-kommandoen. We do not recommend running `migrate` manually within any of your server/worker containers.

### Siden v0.53

Fra `0.53`, er opgradering programmeret inden for `DockerFile`, det betyder fra nu af, du ikke skal k칮re nogen kommando manuelt l칝ngere.

S칮rg for at forts칝tte med at opgradere din instans sekventielt uden at springe nogen st칮rre version over (f.eks. `0.43.3` til `0.44.0` er tilladt, men `0.43.1` til `0.45.0` er ikke), ellers kan det f칮re til synkroniseringsfejl for arbejdsomr친dets version, som kan resultere i runtime-fejl og manglende funktionalitet.

For at kontrollere om et arbejdsomr친de er korrekt migreret, kan du gennemg친 dets version i databasen i `core.workspace` tabel.

Den b칮r altid v칝re inden for din aktuelle Twentys instans `major.minor` version, du kan se din instans version i administrationspanelet (p친 `/settings/admin-panel`, tilg칝ngelig hvis din brugers `canAccessFullAdminPanel` ejendom er indstillet til sand i databasen) eller ved at k칮re `echo $APP_VERSION` i din `twenty-server` container.

For at rette en desynkroniseret arbejdsomr친deversion skal du opgradere fra den tilsvarende Twentys version ved at f칮lge den relaterede opgraderingsvejledning sekventielt og s친 videre, indtil den n친r den 칮nskede version.

#### `auditLog` fjernelse

Vi har fjernet denne standartauditLog-objekt, hvilket betyder, at din backupst칮rrelse muligvis reduceres markant efter denne migration.

### v0.51 til v0.52

Opgrader din Twenty-instans for at bruge v0.52-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Jeg har et arbejdsomr친de fastl친st i version mellem `0.52.0` og `0.52.6`

Desv칝rre er `0.52.0` og `0.52.6` fuldst칝ndigt fjernet fra dockerHub.
You will have to manually update your workspace version to `0.51.0` in database and upgrade using twenty version `0.52.11` following its just above upgrade guide.

### v0.50 til v0.51

Opgrader din Twenty-instans for at bruge v0.51-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0 til v0.50.0

Opgrader din Twenty-instans for at bruge v0.50.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml mutation

Denne version inkluderer en `docker-compose.yml` mutation for at give `worker`-service adgang til `server-local-data`-volumen.
Venligst opdater din lokale `docker-compose.yml` med [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml)

### v0.43.0 til v0.44.0

Opgrader din Twenty-instans for at bruge v0.44.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0 til v0.43.0

Opgrader din Twenty-instans for at bruge v0.43.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade
```

In this version, we have also switched to postgres:16 image in docker-compose.yml.

#### (Valg 1) Database-migrering

Bevarelse af den eksisterende postgres-spilo-billede er fin, men du skal fryse versionen i din docker-compose.yml at v칝re 0.43.0.

#### (Valg 2) Database-migrering

Hvis du vil migrere din database til den nye postgres:16-billede, f칮lg venligst disse trin:

1. Eksporter din database fra den gamle postgres-spilo-konteiner

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

S칮rg for, at din dump-fil ikke er tom.

2. Opgrader din docker-compose.yml for at bruge postgres:16-billedet som i [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) filen.

3. Gendan databasen til den nye postgres:16-konteiner

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0 til v0.42.0

Opgrader din Twenty-instans for at bruge v0.42.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Milj칮variabler**

- Fjernet: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Tilf칮jet: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0 til v0.41.0

Opgrader din Twenty-instans for at bruge v0.41.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Milj칮variabler**

- Fjernet: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0 til v0.40.0

Opgrader din Twenty-instans for at bruge v0.40.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Milj칮variabler**

- Tilf칮jet: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0 til v0.35.0

Opgrader din Twenty-instans for at bruge v0.35.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.35` s칮rger for datamigreringen af alle arbejdsomr친der.

**Milj칮variabler**

- Vi erstattede `ENABLE_DB_MIGRATIONS` med `DISABLE_DB_MIGRATIONS` (standardv칝rdien er nu `false`, du beh칮ver sandsynligvis ikke at indstille noget)

### v0.33.0 til v0.34.0

Opgrader din Twenty-instans for at bruge v0.34.0-billedet

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.34` s칮rger for datamigreringen af alle arbejdsomr친der.

**Milj칮variabler**

- Fjernet: `FRONT_BASE_URL`
- Tilf칮jet: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Vi har opdateret m친den vi h친ndterer frontend-URL'en.
Du kan nu angive frontend-URL'en ved hj칝lp af variablerne `FRONT_DOMAIN`, `FRONT_PROTOCOL` og `FRONT_PORT`.
Hvis FRONT_DOMAIN ikke er indstillet, vil frontend-URL'en falde tilbage til `SERVER_URL`.

### v0.32.0 til v0.33.0

Opgrader din Twenty-instans for at bruge v0.33.0-billedet

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

Kommandoen `yarn command:prod cache:flush` vil t칮mme Redis-cachen.
Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.33` s칮rger for datamigreringen af alle arbejdsomr친der.

Fra denne version blev twenty-postgres-billedet til DB deprecieret, og twenty-postgres-spilo bruges i stedet.
Hvis du vil forts칝tte med at bruge twenty-postgres-billedet, skal du blot erstatte `twentycrm/twenty-postgres:${TAG}` med `twentycrm/twenty-postgres` i docker-compose.yml.

### v0.31.0 til v0.32.0

Opgrader din Twenty-instans for at bruge v0.32.0-billedet

**Skema- og datamigrering**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.32` s칮rger for datamigreringen af alle arbejdsomr친der.

**Milj칮variabler**

Vi har opdateret m친den vi h친ndterer Redis-forbindelsen.

- Fjernet: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Tilf칮jet: `REDIS_URL`

Opdater din `.env`-fil for at bruge den nye `REDIS_URL` variabel i stedet for de individuelle Redis-forbindelsesparametre.

Vi har ogs친 forenklet m친den vi h친ndterer JWT-tokens.

- Fjernet: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Tilf칮jet: `APP_SECRET`

Opdater din `.env`-fil for at bruge den nye `APP_SECRET` variabel i stedet for de individuelle tokens hemmeligheder (du kan bruge samme secret som f칮r eller generere en ny tilf칝ldig streng)

**Forbundet Konto**

Hvis du bruger en forbundet konto til at synkronisere dine Google e-mails og kalendere, skal du aktivere [People API](https://developers.google.com/people) i din Google Admin-konsol.

### v0.30.0 til v0.31.0

Opgrader din Twenty-instans for at bruge v0.31.0-billedet

**Skema- og datamigrering**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.31` s칮rger for datamigreringen af alle arbejdsomr친der.

### v0.24.0 til v0.30.0

Opgrader din Twenty-instans for at bruge v0.30.0-billedet

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Vi har opdateret vores [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) for at afspejle dette.
S칮rg for at opdatere din konfiguration og dine milj칮variablerne tilsvarende:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Skema- og datamigrering**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.30` s칮rger for datamigreringen af alle arbejdsomr친der.

### v0.23.0 til v0.24.0

Opgrader din Twenty-instans for at bruge v0.24.0-billedet

K칮r f칮lgende kommandoer:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til databasestrukturen (kerne og metadataskemaer)
Kommandoen `yarn command:prod upgrade-0.24` s칮rger for datamigreringen af alle arbejdsomr친der.

### v0.22.0 til v0.23.0

Opgrader din Twenty-instans for at bruge v0.23.0-billedet

K칮r f칮lgende kommandoer:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til Database.
Kommandoen `yarn command:prod upgrade-0.23` s칮rger for datamigrationen, herunder overf칮rsel af aktiviteter til opgaver/noter.

### v0.21.0 til v0.22.0

Opgrader din Twenty-instans for at bruge v0.22.0-billedet

K칮r f칮lgende kommandoer:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

Kommandoen `yarn database:migrate:prod` anvender migrationerne til Database.
Kommandoen `yarn command:prod workspace:sync-metadata -f` vil synkronisere definitionen af standardobjekter til metadata tabellerne og anvende n칮dvendige migreringer til eksisterende arbejdsomr친der.
The `yarn command:prod upgrade-0.22` command will apply specific data transformations to adapt to the new object defaultRequestInstrumentationOptions.




