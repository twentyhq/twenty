---
title: Mappearkitektur
info: A detailed look into our server folder architecture
image: /images/user-guide/fields/field.png
---

<Frame>
  <img src="/images/user-guide/fields/field.png" alt="Header" />
</Frame>

Strukturen af backend mappen er som følger:

```
server
  └───ability
  └───constants 
  └───core
  └───database
  └───decorators
  └───filters
  └───guards
  └───health
  └───integrations
  └───metadata
  └───workspace
  └───utils
```

## Ability

Definerer tilladelser og inkluderer håndterere for hver enhed.

## Dekoratorer

Defines custom decorators in NestJS for added functionality.

Se [brugerdefinerede dekoratører](https://docs.nestjs.com/custom-decorators) for flere detaljer.

## Filtre

Inkluderer undtagelsesfiltre til at håndtere undtagelser, der kan forekomme i GraphQL-endepunkter.

## Guards

See [guards](https://docs.nestjs.com/guards) for more details.

## Health

Inkluderer et offentligt tilgængeligt REST API (healthz), der returnerer en JSON for at bekræfte, om databasen fungerer som forventet.

## Metadata

Definerer brugerdefinerede objekter og gør en GraphQL API (graphql/metadata) tilgængelig.

## Arbejdsområde

Genererer og leverer brugerdefineret GraphQL-skema baseret på metadata.

### Arbejdsområdets mappearkitektur

```
workspace

  └───workspace-schema-builder
    └───factories 
    └───graphql-types
    └───database
    └───interfaces
    └───object-definitions
    └───services
    └───storage
    └───utils
  └───workspace-resolver-builder
    └───factories
    └───interfaces
  └───workspace-query-builder
    └───factories
    └───interfaces
  └───workspace-query-runner
    └───interfaces
    └───utils 
  └───workspace-datasource
  └───workspace-manager
  └───workspace-migration-runner
  └───utils 
  └───workspace.module.ts   
  └───workspace.factory.spec.ts    
  └───workspace.factory.ts      
```

Rodmappen af arbejdsområdet inkluderer `workspace.factory.ts`, en fil, der indeholder funktionen `createGraphQLSchema`. Denne funktion genererer arbejdsområde-specifik skema ved at bruge metadata til at tilpasse et skema til individuelle arbejdsområder. Ved at adskille skemakonstruktionen og resolver-konstruktionen bruger vi funktionen `makeExecutableSchema`, som kombinerer disse separate elementer.

Denne strategi handler ikke kun om organisation, men hjælper også med optimering, såsom caching af genererede typedefinitioner for at forbedre ydeevne og skalerbarhed.

### Arbejdsområdets skemabygger

Genererer GraphQL-skemaet og inkluderer:

#### Fabrikker:

Specialiserede konstruktører til at generere GraphQL-relaterede konstruktioner.

- Factory-typen oversætter feltmetadata til GraphQL-typer ved hjælp af `TypeMapperService`.
- The type-definition.factory creates GraphQL input or output objects derived from `objectMetadata`.

#### GraphQL Types

Inkluderer enumerationer, inputs, objekter og scalars og fungerer som byggestenene til skema-konstruktionen.

#### Interfaces og objektdefinitioner

Indeholder blueprints for GraphQL-entiteter og omfatter både foruddefinerede og brugerdefinerede typer som `MONEY` eller `URL`.

#### Tjenester

Indeholder tjenesten, der er ansvarlig for at associerer FieldMetadataType med dets passende GraphQL-scalar eller forespørgselsmodifikatorer.

#### Storage

Inkluderer klassen `TypeDefinitionsStorage`, der indeholder genanvendelige typedefinitioner for at forhindre duplikering af GraphQL-typer.

### Workspace Resolver Builder

Skaber resolver-funktioner til forespørgsel og mutation af GraphQL-skemaet.

Hver fabrik i denne mappe er ansvarlig for at producere en distinkt resolver-type, såsom `FindManyResolverFactory`, der er designet til alsidig anvendelse på tværs af forskellige tabeller.

### Workspace Query Runner

Kører de genererede forespørgsler på databasen og analyserer resultatet.
