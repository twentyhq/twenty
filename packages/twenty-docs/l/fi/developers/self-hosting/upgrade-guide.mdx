---
title: P√§ivitysopas
image: /images/user-guide/notes/notes_header.png
---

<Frame>
  <img src="/images/user-guide/notes/notes_header.png" alt="Header" />
</Frame>

## Yleiset ohjeet

**Always make sure to back up your database before starting the upgrade process** by running `docker exec -it {db_container_name_or_id} pg_dumpall -U {postgres_user} > databases_backup.sql`.

To restore backup, run `cat databases_backup.sql | docker exec -i {db_container_name_or_id} psql -U {postgres_user}`.

Jos k√§ytit Docker Composea, noudata n√§it√§ ohjeita:

1. P√§√§telaitteessa, jossa Twenty on k√§ynniss√§, sammuta Twenty: `docker compose down`

2. P√§ivit√§ versio muuttamalla `TAG` -arvoa .env-tiedostossa l√§hell√§ docker-composea. ( Suosittelemme k√§ytt√§m√§√§n version `major.minor` muotoa, kuten `v0.53` )

3. K√§ynnist√§ Twenty uudelleen k√§ytt√§m√§ll√§ `docker compose up -d`

Jos haluat p√§ivitt√§√§ useamman version kerralla, esimerkiksi v0.33.0:sta v0.35.0:aan, sinun on p√§ivitett√§v√§ vaiheittain, t√§ss√§ esimerkiss√§ v0.33.0:sta v0.34.0:aan ja sitten v0.34.0:sta v0.35.0:aan.

**Varmista, ett√§ jokaisen p√§ivityksen j√§lkeen varmuuskopio on ehj√§.**

## Versiokohtaiset p√§ivitysaskeleet

## v1.0

Tervetuloa Twenty versioon v1.0! üéâ

## v0.60

### Suorituskyvyn parannukset

Kaikki vuorovaikutukset metadata API:n kanssa on optimoitu paremman suorituskyvyn saavuttamiseksi, erityisesti kohdemetadatan k√§sittelyss√§ ja ty√∂tilojen luontitoiminnoissa.

Olemme uudistaneet v√§limuististrategiamme niin, ett√§ etusijalle asetetaan v√§limuistin osumat tietokantakyselyiden sijaan aina kun mahdollista, mik√§ parantaa merkitt√§v√§sti metadata API:n suorituskyky√§.

Jos kohtaat suoritusongelmia p√§ivityksen j√§lkeen, saatat joutua tyhjent√§m√§√§n v√§limuistisi varmistaaksesi sen synkronoinnin uusimpien muutosten kanssa. Suorita t√§m√§ komento twenty-server-s√§il√∂ss√§si:

```bash
yarn command:prod cache:flush
```

### v0.55

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.55-kuvaa

Sinun ei tarvitse en√§√§ suorittaa mit√§√§n komentoja, uusi kuva huolehtii automaattisesti kaikista tarvittavista migraatioista.

### `K√§ytt√§j√§ll√§ ei ole oikeuksia` -virhe

Jos kohtaat valtuutusvirheit√§ useimmissa pyynn√∂iss√§ p√§ivityksen j√§lkeen, sinun saattaa olla tarpeen tyhjent√§√§ v√§limuistisi laskeaksesi uusimmat oikeudet uudelleen.

Suorita seuraava komento `twenty-server`-s√§il√∂ss√§si:

```bash
yarn command:prod cache:flush
```

T√§m√§ ongelma koskee vain t√§t√§ Twenty-versiota eik√§ pit√§isi olla tarpeen jatkossa.

### v0.54

Versiosta `0.53` eteenp√§in ei vaadita manuaalisia toimia.

#### Metadataskeeman vanhentuminen

Olemme yhdist√§neet `metadata`-skeeman ja `core`-skeeman yksinkertaistaaksemme datan hakua `TypeORM`:st√§.
Olemme yhdist√§neet `migrate`-komennon vaiheet `upgrade`-komennon sis√§lle. Emme suosittele `migrate`:n ajamista manuaalisesti miss√§√§n palvelin- tai ty√∂ntekij√§s√§il√∂iss√§si.

### Versiosta v0.53 alkaen

Starting from `0.53`, upgrade is programmatically done within the `DockerFile`, this means from now on, you shouldn't have to run any command manually anymore.

Varmista, ett√§ p√§ivit√§t asennuksesi vaiheittain, ilman ett√§ sivuutat merkitt√§vi√§ versioita (esim. `0.43.3` versioon `0.44.0` on sallittua, mutta ei `0.43.1` versioon `0.45.0`), muuten se voi johtaa ty√∂tilan version ep√§yhten√§isyyksiin, mik√§ voi aiheuttaa suoritusvirheit√§ ja puuttuvaa toiminnallisuutta.

Voit tarkistaa, onko ty√∂tila p√§ivitetty oikein tarkistamalla sen version tietokannasta `core.workspace`-taulussa.

Sen tulisi aina olla nykyisen Twentyn asennusversion `major.minor`-v√§lill√§, voit tarkistaa asennusversion hallintapaneelista (osoitteessa `/settings/admin-panel`, saavutettavissa jos k√§ytt√§j√§ll√§si on `canAccessFullAdminPanel`-omaisuus m√§√§ritetty arvoksi true tietokannassa) tai suorittamalla komento `echo $APP_VERSION` `twenty-server`-s√§il√∂ss√§si.

Voit ratkaista ep√§yhten√§isen ty√∂tilan version p√§ivitt√§m√§ll√§ vastaavasta Twentyn versiosta liittyv√§n p√§ivitysoppaan ohjeiden mukaisesti vaiheittain, kunnes saavutat toivotun version.

#### `auditLog`-poisto

Olemme poistaneet auditLog-standardiobjektin, mik√§ voi pienent√§√§ varmuuskopion kokoa merkitt√§v√§sti t√§m√§n migraation j√§lkeen.

### v0.51:st√§ v0.52:een

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.52-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Minulla on ty√∂tila, joka on juuttunut v√§lill√§ versioiden `0.52.0` ja `0.52.6` v√§liin

Valitettavasti versiot `0.52.0` ja `0.52.6` on poistettu t√§ysin dockerHubista.
Sinun on p√§ivitett√§v√§ ty√∂tilan versioksi `0.51.0` tietokantaan k√§sin ja p√§ivitett√§v√§ Twenty-versiolla `0.52.11` seuraamalla sen yl√§puolella annettua p√§ivitysopasta.

### v0.50:st√§ v0.51:een

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.51-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.44.0:sta v0.50.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.50.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade
```

#### Docker-compose.yml:in muutos

T√§m√§ versio sis√§lt√§√§ `docker-compose.yml`-tiedoston muutoksen, jolla `worker`-palvelulle annetaan p√§√§sy `server-local-data`-volyymiin.
P√§ivit√§ paikallinen `docker-compose.yml` [v0.50.0 docker-compose.yml](https://github.com/twentyhq/twenty/blob/v0.50.0/packages/twenty-docker/docker-compose.yml) avulla

### v0.43.0:sta v0.44.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.44.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade
```

### v0.42.0:sta v0.43.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.43.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade
```

T√§ss√§ versiossa olemme siirtyneet postgres:16-kuvaan docker-compose.yml:ss√§.

#### (Vaihtoehto 1) Tietokannan migraatio

Pidet√§√§n olemassa oleva postgres-spilo-kuva, mutta sinun on j√§√§dytett√§v√§ versio docker-compose.yml:ss√§ versioksi 0.43.0.

#### (Vaihtoehto 2) Tietokannan migraatio

Jos haluat siirt√§√§ tietokantasi uuteen postgres:16-kuvaan, noudata seuraavia vaiheita:

1. Vie tietokanta vanhasta postgres-spilo-s√§il√∂st√§

```
docker exec -it twenty-db-1 sh
pg_dump -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} > databases_backup.sql
exit
docker cp twenty-db-1:/home/postgres/databases_backup.sql .
```

Varmista, ett√§ dump-tiedostosi ei ole tyhj√§.

2. P√§ivit√§ docker-compose.yml k√§ytt√§m√§√§n postgres:16-kuvaa, kuten [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) -tiedostossa on.

3. Palauta tietokanta uuteen postgres:16-s√§il√∂√∂n

```
docker cp databases_backup.sql twenty-db-1:/databases_backup.sql
docker exec -it twenty-db-1 sh
psql -U {YOUR_POSTGRES_USER} -d {YOUR_POSTGRES_DB} -f databases_backup.sql
exit
```

### v0.41.0:st√§ v0.42.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.42.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade-0.42
```

**Ymp√§rist√∂muuttujat**

- Poistettu: `FRONT_PORT`, `FRONT_PROTOCOL`, `FRONT_DOMAIN`, `PORT`
- Lis√§tty: `FRONTEND_URL`, `NODE_PORT`, `MAX_NUMBER_OF_WORKSPACES_DELETED_PER_EXECUTION`, `MESSAGING_PROVIDER_MICROSOFT_ENABLED`, `CALENDAR_PROVIDER_MICROSOFT_ENABLED`, `IS_MICROSOFT_SYNC_ENABLED`

### v0.40.0:sta v0.41.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.41.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade-0.41
```

**Ymp√§rist√∂muuttujat**

- Poistettu: `AUTH_MICROSOFT_TENANT_ID`

### v0.35.0:sta v0.40.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.40.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade-0.40
```

**Ymp√§rist√∂muuttujat**

- Lis√§tty: `IS_EMAIL_VERIFICATION_REQUIRED`, `EMAIL_VERIFICATION_TOKEN_EXPIRES_IN`, `WORKFLOW_EXEC_THROTTLE_LIMIT`, `WORKFLOW_EXEC_THROTTLE_TTL`

### v0.34.0:sta v0.35.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.35.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade-0.35
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.35` huolehtii kaikkien ty√∂tilojen datamigraatioista.

**Ymp√§rist√∂muuttujat**

- Olemme korvanneet `ENABLE_DB_MIGRATIONS` `DISABLE_DB_MIGRATIONS`-muuttujalla (oletusarvo on nyt `false`, luultavasti sinun ei tarvitse asettaa mit√§√§n)

### v0.33.0:sta v0.34.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.34.0-kuvaa

```
yarn database:migrate:prod
yarn command:prod upgrade-0.34
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.34` huolehtii kaikkien ty√∂tilojen datamigraatioista.

**Ymp√§rist√∂muuttujat**

- Poistettu: `FRONT_BASE_URL`
- Lis√§tty: `FRONT_DOMAIN`, `FRONT_PROTOCOL`, `FRONT_PORT`

Olemme p√§ivitt√§neet etuosan URL-osoitteen k√§sittelytavan.
Voit nyt asettaa etuosan URL-osoitteen k√§ytt√§m√§ll√§ muuttujia `FRONT_DOMAIN`, `FRONT_PROTOCOL` ja `FRONT_PORT`.
Jos FRONT_DOMAIN ei ole asetettu, etuosan URL-osoite palautuu `SERVER_URL`:√§√§n.

### v0.32.0:st√§ v0.33.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.33.0-kuvaa

```
yarn command:prod cache:flush
yarn database:migrate:prod
yarn command:prod upgrade-0.33
```

Komento `yarn command:prod cache:flush` tyhjent√§√§ Redis-v√§limuistin.
Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.33` huolehtii kaikkien ty√∂tilojen datamigraatioista.

Starting from this version, twenty-postgres image for DB became deprecated and twenty-postgres-spilo is used instead.
If you want to keep using twenty-postgres image, simply replace `twentycrm/twenty-postgres:${TAG}` with `twentycrm/twenty-postgres` in docker-compose.yml.

### v0.31.0:st√§ v0.32.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.32.0-kuvaa

**Skeeman ja datan migraatio**

```
yarn database:migrate:prod
yarn command:prod upgrade-0.32
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.32` huolehtii kaikkien ty√∂tilojen datamigraatioista.

**Ymp√§rist√∂muuttujat**

We have updated the way we handle the Redis connection.

- Poistettu: `REDIS_HOST`, `REDIS_PORT`, `REDIS_USERNAME`, `REDIS_PASSWORD`
- Lis√§tty: `REDIS_URL`

P√§ivit√§ `.env`-tiedostosi k√§ytt√§m√§√§n uutta `REDIS_URL`-muuttujaa yksitt√§isten Rediksen yhteysparametrien sijasta.

Olemme my√∂s yksinkertaistaneet tapaamme k√§sitell√§ JWT-tokeneita.

- Poistettu: `ACCESS_TOKEN_SECRET`, `LOGIN_TOKEN_SECRET`, `REFRESH_TOKEN_SECRET`, `FILE_TOKEN_SECRET`
- Lis√§tty: `APP_SECRET`

P√§ivit√§ `.env`-tiedostosi k√§ytt√§m√§√§n uutta `APP_SECRET`-muuttujaa yksitt√§isten tokeneiden salasanojen sijasta (voit k√§ytt√§√§ samaa salasanaa kuin aiemmin tai luoda uuden satunnaisen merkkijonon)

**Liitetty tili**

Jos k√§yt√§t yhdistettyj√§ tilej√§ Google-s√§hk√∂postisi ja kalenteriesi synkronoimiseen, sinun on aktivoitava [People API](https://developers.google.com/people) Google-hallintakeskuksessasi.

### v0.30.0:sta v0.31.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.31.0-kuvaa

**Skeeman ja datan migraatio**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.31
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.31` huolehtii kaikkien ty√∂tilojen datamigraatioista.

### v0.24.0:sta v0.30.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.30.0-kuvaa

**Breaking change**:
To enhance performances, Twenty now requires redis cache to be configured. Olemme p√§ivitt√§neet [docker-compose.yml](https://raw.githubusercontent.com/twentyhq/twenty/main/packages/twenty-docker/docker-compose.yml) heijastamaan t√§t√§.
Varmista, ett√§ p√§ivit√§t konfiguraatiosi ja ymp√§rist√∂muuttujasi vastaavasti:

```
REDIS_HOST={your-redis-host}
REDIS_PORT={your-redis-port}
CACHE_STORAGE_TYPE=redis
```

**Skeeman ja datan migraatio**:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.30
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.30` huolehtii kaikkien ty√∂tilojen datamigraatioista.

### v0.23.0:sta v0.24.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.24.0-kuvaa

Suorita seuraavat komennot:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.24
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokannan rakenteeseen (ydin ja metadata-skeemat)
Komento `yarn command:prod upgrade-0.24` huolehtii kaikkien ty√∂tilojen datamigraatioista.

### v0.22.0:sta v0.23.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.23.0-kuvaa

Suorita seuraavat komennot:

```
yarn database:migrate:prod
yarn command:prod upgrade-0.23
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokantaan.
Komento `yarn command:prod upgrade-0.23` huolehtii datamigraatioista, mukaan lukien aktiviteettien siirt√§minen teht√§viin/muistiinpanoihin.

### v0.21.0:sta v0.22.0:aan

P√§ivit√§ Twenty-asennuksesi k√§ytt√§m√§√§n v0.22.0-kuvaa

Suorita seuraavat komennot:

```
yarn database:migrate:prod
yarn command:prod workspace:sync-metadata -f
yarn command:prod upgrade-0.22
```

Komento `yarn database:migrate:prod` soveltaa migraatiot tietokantaan.
The `yarn command:prod workspace:sync-metadata -f` command will sync the definition of standard objects to the metadata tables and apply to required migrations to existing workspaces.
The `yarn command:prod upgrade-0.22` command will apply specific data transformations to adapt to the new object defaultRequestInstrumentationOptions.




