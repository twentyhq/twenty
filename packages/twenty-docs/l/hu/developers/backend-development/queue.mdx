---
title: Message Queue
image: /images/user-guide/emails/emails_header.png
---

<Frame>
  <img src="/images/user-guide/emails/emails_header.png" alt="Header" />
</Frame>

A sorok lehetővé teszik az aszinkron műveletek végrehajtását. Háttérfeladatok végrehajtására használhatók, például üdvözlő e-mail küldése regisztrációkor.
Minden alkalmazási eset a `MessageQueueServiceBase`-ből kiterjesztett saját sorosztályt fog használni.

Jelenleg csak a `bull-mq` [bull-mq](https://bullmq.io/) sor meghajtót támogatjuk.

## Lépések új sor létrehozásához és használatához

1. Adja hozzá új sorának nevét az `MESSAGE_QUEUES` enum alá.
2. Nyújtsa be a sor gyári megvalósítását a sor nevét függőségi tokenként felhasználva.
3. Injektálja az ön által létrehozott sort a szükséges modul/szolgáltatáshoz a sor nevét függőségi tokenként felhasználva.
4. Adjon hozzá worker osztályt token alapú injekcióval, akárcsak a producer esetében.

### Example usage

```ts
class Resolver {
  constructor(@Inject(MESSAGE_QUEUES.custom) private queue: MessageQueueService) {}

  async onSomeAction() {
    //business logic
    await this.queue.add(someData);
  }
}

//async worker
class CustomWorker {
  constructor(@Inject(MESSAGE_QUEUES.custom) private queue: MessageQueueService) {
    this.initWorker();
  }

  async initWorker() {
    await this.queue.work(async ({ id, data }) => {
      //worker logic
    });
  }
}
```

